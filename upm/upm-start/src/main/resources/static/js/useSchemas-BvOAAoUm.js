import{s as r}from"./contast-C3bEivmW.js";import{dX as o,bD as m,d_ as u}from"./bootstrap-DjYyHEgg.js";import{u as f}from"./useDateRangePicker-DjB1zMnJ.js";const C=[{key:o.Sale,label:"卡种管理",addText:"新增卡种",permissions:["template:cardTypeManagement:sale"]},{key:o.Operation,label:"运营管理",addText:"新增数据指标",permissions:["template:cardTypeManagement:operation"]},{key:o.Summary,label:"汇总管理",addText:"新增汇总指标",permissions:["template:cardTypeManagement:summary"]}],i=[{label:"基础",value:"base"},{label:"自定义",value:"custom"}],p=[{label:"数值",value:"number"},{label:"比率",value:"rate"}],I={sumByYear:"汇总值",yearOverYear:"本期值",proportion:"部分值",default:"值"};var n;const N={schema:[{fieldName:"id",label:"ID",component:"Input",dependencies:{show:!1,triggerFields:["id"]}},{component:"Select",componentProps:{allowClear:!0,placeholder:"请选择",showSearch:!1,class:"w-60"},fieldName:"categoryId",label:"所属分类",formItemClass:"col-span-12",dependencies:{trigger(a,s){a.categoryId==="0"&&s.setFieldValue("categoryId",void 0)},triggerFields:["categoryId"]}},{fieldName:"name",label:"名称",component:"Input",componentProps:{placeholder:"请输入名称",allowClear:!0,class:"w-60"},formItemClass:"col-span-12",rules:m().min(1,{message:"请输入名称"}).max(50,{message:"最多输入50个字符"})},{fieldName:"valueType",component:"Select",componentProps:{allowClear:!1,placeholder:"请选择",showSearch:!1,class:"w-60",options:p},defaultValue:"number",formItemClass:"col-span-12",rules:"required",label:"数据类型",help:"当字段值为比率时，显示`%`"},{component:"Select",componentProps:{allowClear:!1,placeholder:"请选择",showSearch:!1,class:"w-60",options:i.filter(a=>a.value==="base")},defaultValue:"base",formItemClass:"col-span-12",fieldName:"businessType",rules:"required",label:"所属类型"},{component:"Select",componentProps:a=>({allowClear:!1,placeholder:"请选择",showSearch:!1,class:"w-60",options:[r[0]]}),formItemClass:"col-span-12",fieldName:"calcWay",label:"汇总方式",defaultValue:(n=r[0])==null?void 0:n.value,rules:"required"},{fieldName:"code",label:"外部编号",component:"Input",componentProps:{placeholder:"请输入",allowClear:!0,class:"w-60"},formItemClass:"col-span-12"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:[{label:"是",value:1},{label:"否",value:0}],optionType:"button"},defaultValue:1,fieldName:"summation",rules:"required",label:"是否合计"},{fieldName:"sortNumber",label:"排序",component:"InputNumber",defaultValue:1,componentProps:{placeholder:"请输入",allowClear:!0,class:"w-60",type:"number",min:0,max:999},formItemClass:"col-span-12",rules:u({message:"请输入数字"}).int({message:"请输入整数"})}]},T={schema:[{fieldName:"id",label:"ID",component:"Input",dependencies:{show:!1,triggerFields:["id"]}},{component:"Select",componentProps:{allowClear:!0,placeholder:"请选择",showSearch:!1,class:"w-60"},disabled:!0,defaultValue:"0",fieldName:"categoryId",label:"所属分类",formItemClass:"col-span-12",dependencies:{show:!1,triggerFields:["categoryId"]}},{fieldName:"name",label:"名称",component:"Input",componentProps:{placeholder:"请输入名称",allowClear:!0,class:"w-60"},formItemClass:"col-span-12",rules:m().min(1,{message:"请输入名称"}).max(50,{message:"最多输入50个字符"})},{fieldName:"valueType",component:"Select",componentProps:{allowClear:!1,placeholder:"请选择",showSearch:!1,class:"w-60",options:p},defaultValue:"number",formItemClass:"col-span-12",rules:"required",label:"数据类型",help:"当字段值为比率时，显示`%`"},{fieldName:"businessType",label:"所属类型",component:"Input",componentProps:{placeholder:"请输入所属类型",allowClear:!0,class:"w-60"},formItemClass:"col-span-12",dependencies:{disabled:a=>a.id,triggerFields:["id"]}},{fieldName:"code",label:"code",component:"Input",componentProps:{placeholder:"",allowClear:!0,class:"w-60",disabled:!0},formItemClass:"col-span-12"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:[{label:"是",value:1},{label:"否",value:0}],optionType:"button"},defaultValue:1,fieldName:"summation",rules:"required",label:"是否合计"}]},{dateRangePresets:h}=f();function v(a){const s={toolbarConfig:{resizable:!0},columns:[{field:"id",title:"编号"},{field:"name",title:"名称"},{field:"categoryId",title:"所属分类",slots:{default:"category"},visible:a===o.Sale},{field:"categoryName",title:"所属分类",visible:![o.Operation,o.Sale].includes(a)},{field:"businessType",title:"所属类型",formatter({cellValue:e}){const l=i.find(t=>t.value===e);return l?l.label:e}},{field:"calcWay",title:"汇总方式",formatter({cellValue:e}){const l=r.find(t=>t.value===e);return l?l.label:e},visible:![o.Operation].includes(a)},{field:"extra",title:"汇总参数",formatter({cellValue:e}){return e!=null?e:"-"},visible:a===o.Summary},{field:"createTime",title:"添加时间"},{width:250,title:"操作",align:"center",slots:{default:"action"},fixed:"right"}]},c={wrapperClass:"grid-cols-3 md:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{labelWidth:75,componentProps:{class:"w-full"}},schema:[{component:"Select",componentProps:{allowClear:!0,placeholder:"请选择"},fieldName:"categoryId",label:"所属分类",dependencies:{show:()=>a===o.Sale,triggerFields:[a]}},{component:"Input",componentProps:{allowClear:!0,placeholder:"请输入分类名称"},fieldName:"categoryName",label:"所属分类",dependencies:{show:()=>![o.Operation,o.Sale].includes(a),triggerFields:[a]}},{component:"Input",componentProps:{allowClear:!0},fieldName:"name",label:"名称",labelWidth:60},{fieldName:"calcWayList",label:"汇总方式",component:"Select",componentProps:{placeholder:"请选择",mode:"multiple",allowClear:!0,showSearch:!1,maxTagCount:1,maxTagTextLength:5,options:r.filter(e=>e.value!=="sum"),filterOption:(e,l)=>l.label.toLowerCase().includes(e.toLowerCase())},dependencies:{show:()=>![o.Operation,o.Sale].includes(a),triggerFields:[a]}},h.datetime("createTime","创建时间")],fieldMappingTime:[["createTime",["startTime","endTime"],"YYYY-MM-DD HH:mm:ss"]],showCollapseButton:!0,submitOnChange:!1,submitOnEnter:!1};return{gridSchemas:s,searchFormSchemas:c,getChooseGridSchemas:e=>[{type:"checkbox",align:"left",width:60},{field:"id",title:"编号"},{field:"name",title:"名称"},{field:"categoryName",title:"所属分类"},{field:"calcWay",title:"汇总方式",formatter({cellValue:l}){const t=r.find(d=>d.value===l);return t?t.label:l}},{field:"extra",title:"汇总参数",formatter({cellValue:l}){return l!=null?l:"-"},visible:!["categorySum","customSum"].includes(e)}],getChooseSearchFormSchemas:e=>[{component:"Input",componentProps:{allowClear:!0,placeholder:"请输入"},fieldName:"categoryName",label:"所属分类",dependencies:{show:()=>!["categorySum"].includes(e),triggerFields:[e]}},{component:"Input",componentProps:{allowClear:!0,placeholder:"请输入"},fieldName:"name",label:"名称",labelWidth:60},{fieldName:"calcWayList",label:"汇总方式",component:"Select",componentProps:{placeholder:"请选择",mode:"multiple",allowClear:!0,showSearch:!1,maxTagCount:1,maxTagTextLength:5,options:["proportion","sumByYear","yearOverYear"].includes(e)?r.filter(l=>!["proportion","remark","sumByYear","yearOverYear"].includes(l.value)):r,filterOption:(l,t)=>t.label.toLowerCase().includes(l.toLowerCase())},dependencies:{show:()=>!["categorySum","customSum"].includes(e),triggerFields:[e]}}]}}export{N as b,I as l,T as o,C as t,v as u,p as v};
