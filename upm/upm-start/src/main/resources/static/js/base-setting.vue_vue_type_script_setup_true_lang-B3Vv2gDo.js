var y=Object.defineProperty,h=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var m=(t,n,e)=>n in t?y(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,c=(t,n)=>{for(var e in n||(n={}))w.call(n,e)&&m(t,e,n[e]);if(f)for(var e of f(n))k.call(n,e)&&m(t,e,n[e]);return t},d=(t,n)=>h(t,I(n));var p=(t,n,e)=>new Promise((a,s)=>{var r=o=>{try{u(e.next(o))}catch(i){s(i)}},l=o=>{try{u(e.throw(o))}catch(i){s(i)}},u=o=>o.done?a(o.value):Promise.resolve(o.value).then(r,l);u((e=e.apply(t,n)).next())});import{en as _,eo as N,ep as x,eq as A,e6 as v,er as O,es as S,bm as B,et as q,bD as g,eu as b,dK as F}from"./bootstrap-DjYyHEgg.js";import{u as V}from"./useUpdateUser-BSjP6UG7.js";import{m as D,v as U,ad as P,b2 as T,j as C,u as K}from"../jse/index-index-rmdNY63r.js";function L(t,n){let e;if(Array.isArray(n)?e=n:typeof n=="string"&&_(n)&&(t==null?void 0:t[n])==null?e=N(n):e=[n],e.length===0)return!1;let a=t;for(let s=0;s<e.length;s++){const r=e[s];if((a==null||!Object.hasOwn(a,r))&&!((Array.isArray(a)||x(a))&&A(r)&&r<a.length))return!1;a=a[r]}return!0}function E(t){return t==null}function G(t,...n){if(E(t))return{};const e={};for(let a=0;a<n.length;a++){let s=n[a];switch(typeof s){case"object":{Array.isArray(s)||(v(s)?s=Array.from(s):s=[s]);break}case"string":case"symbol":case"number":{s=[s];break}}for(const r of s){const l=O(t,r);l===void 0&&!L(t,r)||(typeof r=="string"&&Object.hasOwn(t,r)?e[r]=l:S(e,r,l))}}return e}const M={class:"mt-[16px] md:w-full lg:w-1/2 2xl:w-2/5"},J=D({__name:"base-setting",setup(t){const n=B(),{updateUser:e}=V(),[a,s]=q({commonConfig:{labelWidth:60},handleSubmit:l,resetButtonOptions:{show:!1},schema:[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"id",label:"用户ID",rules:"required"},{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"account",label:"账号",rules:"required"},{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"deptId",label:"部门ID",rules:"required"},{component:"Input",fieldName:"name",label:"姓名",rules:"required"},{component:"Input",fieldName:"nickname",label:"昵称",rules:"required"},{component:"Input",fieldName:"phone",label:"手机号码",rules:g().regex(/^1[3-9]\d{9}$/,"请输入正确的手机号码").optional().or(b(""))},{component:"Input",fieldName:"email",label:"邮箱",rules:g().email("请输入正确的邮箱").optional().or(b(""))},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:u(),optionType:"button"},defaultValue:1,fieldName:"gender",label:"性别"}],submitButtonOptions:{content:"更新信息"}});function r(o){s.setState(i=>d(c({},i),{submitButtonOptions:d(c({},i.submitButtonOptions),{loading:o})}))}function l(){return p(this,null,function*(){try{r(!0);const{valid:o}=yield s.validate();if(!o)return;const i=yield s.getValues();(yield e(i))&&F.success("保存成功")}catch(o){console.error(o)}finally{r(!1)}})}function u(){return[{color:"error",label:"男",value:1},{color:"processing",label:"女",value:0}]}return U(()=>{const o=G(n.userInfo,["id","name","nickname","email","phone","gender","deptId","account"]);s.setValues(o)}),(o,i)=>(T(),P("div",M,[C(K(a))]))}});export{J as _};
