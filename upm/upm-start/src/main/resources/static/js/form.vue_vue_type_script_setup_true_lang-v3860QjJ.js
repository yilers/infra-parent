var k=Object.defineProperty,B=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var w=(t,e,s)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,p=(t,e)=>{for(var s in e||(e={}))A.call(e,s)&&w(t,s,e[s]);if(m)for(var s of m(e))S.call(e,s)&&w(t,s,e[s]);return t},g=(t,e)=>B(t,j(e));var V=(t,e)=>{var s={};for(var a in t)A.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&m)for(var a of m(t))e.indexOf(a)<0&&S.call(t,a)&&(s[a]=t[a]);return s};var _=(t,e,s)=>new Promise((a,c)=>{var f=o=>{try{u(s.next(o))}catch(l){c(l)}},n=o=>{try{u(s.throw(o))}catch(l){c(l)}},u=o=>o.done?a(o.value):Promise.resolve(o.value).then(f,n);u((s=s.apply(t,e)).next())});import{dx as F,dL as L,bj as M,dK as N}from"./bootstrap-DjYyHEgg.js";import{f as R,d as J,g as K}from"./index-C4izEvQb.js";import{m as T,b9 as x,aa as U,ab as q,b2 as z,u as C,bJ as E,ae as G,j as H}from"../jse/index-index-rmdNY63r.js";const I={class:"common-form"},Y=T({__name:"form",setup(t,{expose:e}){const s=x({}),a=F(),c=x(),[f,n]=L(p({showDefaultActions:!1},R)),[u,o]=M({onOpenChange(i){const r=o.getData();c.value=i?r==null?void 0:r.gridApi:null,s.value=i?(r==null?void 0:r.record)||{}:{},n.setValues(s.value)},onConfirm(){return _(this,null,function*(){var r,d;if((yield n.validate()).valid)try{o.lock(!0);const b=yield n.getValues(),v=yield l(b);yield((r=s.value)!=null&&r.id?J:K)(v),N.success("保存成功"),yield a.initShopList(),(d=c.value)==null||d.reload(),o.close()}finally{o.lock(!1)}})}});function l(i){return _(this,null,function*(){const h=i,{id:r,type:d,productPrice:b}=h,v=V(h,["id","type","productPrice"]);return p(g(p({type:d},r&&{id:r}),{productPrice:d===2?b:null}),v)})}const P=U(()=>{var i;return(i=s.value)!=null&&i.id?"编辑商品":"新增商品"});return e(o),(i,r)=>(z(),q(C(u),{title:P.value,class:"w-300px"},{default:E(()=>[G("div",I,[H(C(f))])]),_:1},8,["title"]))}});export{Y as _};
