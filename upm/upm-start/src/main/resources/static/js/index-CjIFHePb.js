var B=Object.defineProperty,M=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var _=(r,t,o)=>t in r?B(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,m=(r,t)=>{for(var o in t||(t={}))V.call(t,o)&&_(r,o,t[o]);if(S)for(var o of S(t))$.call(t,o)&&_(r,o,t[o]);return r},y=(r,t)=>M(r,H(t));var x=(r,t,o)=>new Promise((h,c)=>{var u=i=>{try{n(o.next(i))}catch(d){c(d)}},C=i=>{try{n(o.throw(i))}catch(d){c(d)}},n=i=>i.done?h(i.value):Promise.resolve(i.value).then(u,C);n((o=o.apply(r,t)).next())});import{W as j}from"./index-C4NAiFfA.js";import{dI as G,dJ as J,dz as U,a7 as T}from"./bootstrap-DjYyHEgg.js";import{h as W,n as q}from"./fileTransfer-p8-3apt7.js";import{o as Q}from"./table-FRaKquww.js";import{u as K,_ as X}from"./useTableImport-CNd8lRg2.js";import{u as Z}from"./useDownLoad-Cw45s4VH.js";import{u as ee}from"./useShopCheck-DKIjDUfz.js";import{m as te,b9 as oe,aa as re,be as ie,ab as g,b2 as p,bJ as l,j as b,u as e,bL as P,ai as v,ad as ae,I as se,bb as le,bp as ne}from"../jse/index-index-rmdNY63r.js";import{p as I}from"./contast-C3bEivmW.js";import{u as de}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as me}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as pe}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:E}=de(),k={toolbarConfig:{resizable:!0},columns:[{field:"commonProductName",title:"商品",width:430},{field:"commonOrderNo",title:"订单号",width:200},{field:"commonOrderStatus",title:"订单状态",width:150},{field:"commonProductQuantity",title:"商品数量(件)",width:150},{field:"commonPaymentTime",title:"支付时间",width:150},{field:"commonProductId",title:"商品ID",width:200},{field:"commonCreateTime",title:"订单成交时间",width:160},{field:"pddTotalProductAmount",title:"商品总价(元)",width:250},{field:"commonPaidAmount",title:"用户实付金额(元)",width:150},{field:"pddMerchantReceiveAmount",title:"商家实收金额(元)",width:150},{field:"progressStatus",title:"进度状态",width:150,formatter({cellValue:r}){const t=I.find(o=>o.value===r);return t?t.label:r}}]},ce={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[E.datetime("orderTime","订单成交时间	"),E.datetime("payTime","支付时间	"),{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"productId",label:"商品ID"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"orderNo",label:"订单编号"},{component:"Select",componentProps:{allowClear:!0,options:I,placeholder:"请选择",mode:"multiple",maxTagCount:1,maxTagTextLength:6},fieldName:"progressStatusList",label:"进度状态"}],fieldMappingTime:[["orderTime",["orderCreateStartTime","orderCreateEndTime"],"YYYY-MM-DD HH:mm:ss"],["payTime",["orderPaymentStartTime","orderPaymentEndTime"],"YYYY-MM-DD HH:mm:ss"]]},Ae=te({__name:"index",setup(r){const{checkShopSelected:t}=ee(),{bizImportType:o,bizImportTypeList:h,uploadFormRef:c,isError:u,extension:C,handleImport:n,ImportSettingButton:i}=K({importTypeList:[{id:1,label:"导入数据",bizCode:"PDD_SALES_ORDER_DETAIL",isError:!1,auth:"basic:pddSalesOrderDetails:import"},{id:2,label:"导入异常数据",bizCode:"PDD_SALES_ORDER_DETAIL",isError:!0,auth:"basic:pddSalesOrderDetails:importFail"}],defaultExtension:".xlsx,.csv",errorExtension:".xlsx"}),d=oe(G.pddSalesOrderDetailCsv),L=m({},ce),O=y(m({},k),{toolbarConfig:m({},k.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(s,ue)=>x(null,[s,ue],function*({page:{currentPage:w,pageSize:a}},f){return t()?yield Q(m({current:w,size:a},f)):{result:{records:[],total:0}}})}}}),z={},[A,D]=J({gridEvents:z,formOptions:L,gridOptions:O}),{handleDownload:R,downLoading:N}=Z(),{hasAccessByCodes:Y}=U(),F=re(()=>Y(["basic:pddSalesOrderDetails:list"]));return(w,a)=>{const f=ie("access");return F.value?(p(),g(e(me),{key:0,"auto-content-height":""},{default:l(()=>[b(e(A),null,{"toolbar-actions":l(()=>[(p(!0),ae(se,null,le(e(h),s=>P((p(),g(e(T),{key:s.id,type:"primary",style:{"margin-right":"12px"},onClick:ue=>e(n)(s.bizCode,s.isError,e(D))},{default:l(()=>[v(ne(s.label),1)]),_:2},1032,["onClick"])),[[f,[s.auth],"codes"]])),128))]),"toolbar-tools":l(()=>[P((p(),g(e(T),{loading:e(N),class:"mr-2",type:"primary",onClick:a[0]||(a[0]=s=>e(R)(e(D),d.value))},{icon:l(()=>[b(e(j),{class:"mr-1 inline-block size-6"})]),default:l(()=>[a[1]||(a[1]=v(" 导出数据 ",-1))]),_:1},8,["loading"])),[[f,["basic:pddSalesOrderDetails:export"],"codes"]]),b(e(i))]),_:1}),b(e(X),{ref_key:"uploadFormRef",ref:c,"biz-import-type":e(o),"is-error":e(u),extension:e(C),"upload-fn":e(u)?e(q):e(W)},null,8,["biz-import-type","is-error","extension","upload-fn"])]),_:1})):(p(),g(e(pe),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{Ae as default};
