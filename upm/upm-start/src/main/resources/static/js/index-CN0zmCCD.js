var B=Object.defineProperty,R=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var O=(r,o,e)=>o in r?B(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,p=(r,o)=>{for(var e in o||(o={}))F.call(o,e)&&O(r,e,o[e]);if(y)for(var e of y(o))V.call(o,e)&&O(r,e,o[e]);return r},x=(r,o)=>R(r,A(o));var D=(r,o,e)=>new Promise((b,m)=>{var g=i=>{try{n(e.next(i))}catch(d){m(d)}},C=i=>{try{n(e.throw(i))}catch(d){m(d)}},n=i=>i.done?b(i.value):Promise.resolve(i.value).then(g,C);n((e=e.apply(r,o)).next())});import{W as $}from"./index-C4NAiFfA.js";import{dI as j,dJ as M,dz as Q,a7 as v}from"./bootstrap-DjYyHEgg.js";import{h as Y}from"./fileTransfer-p8-3apt7.js";import{r as H}from"./table-FRaKquww.js";import{u as J,_ as W}from"./useTableImport-CNd8lRg2.js";import{u as U}from"./useDownLoad-Cw45s4VH.js";import{u as K}from"./useShopCheck-DKIjDUfz.js";import{ci as k,m as X,b9 as Z,aa as ee,be as te,ab as f,b2 as c,bJ as l,j as h,u as t,bL as I,ai as T,ad as oe,I as re,bb as ie,bp as ae}from"../jse/index-index-rmdNY63r.js";import{u as se}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as le}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as ne}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:de}=se(),z={toolbarConfig:{custom:!0,export:!1,refresh:!0,resizable:!0,zoom:!0,search:!1},columns:[{title:"序号",type:"seq",width:50},{field:"apiCode",title:"接口编号",width:280},{field:"thirdOrderNo",title:"第三方订单号",width:280},{field:"productCode",title:"产品编号",width:280},{field:"orderNo",title:"爱奇艺订单号",width:280},{field:"apiProductName",title:"接口产品名称",width:150},{field:"orderTime",title:"订单时间",width:150},{field:"orderStatus",title:"订单状态",width:150,formatter({cellValue:r}){return r?"已完成":"已退单"}},{field:"partnerOrderPrice",title:"收入",width:150},{field:"sales",title:"所属销售",width:150},{field:"originalOrderNo",title:"原订单号",width:280},{field:"iqiyiSharePrice",title:"爱奇艺分成价格",width:150}]},pe=[{label:"旗舰店",value:"旗舰店"},{label:"半托管",value:"半托管"}],ce={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[de.datetime("orderTime","订单时间",[k().startOf("month"),k().endOf("month")]),{component:"Select",componentProps:{allowClear:!0,options:pe,placeholder:"请选择"},fieldName:"type",label:"类型"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"thirdOrderNo",label:"第三方订单号"}],fieldMappingTime:[["orderTime",["startTime","endTime"],"YYYY-MM-DD HH:mm:ss"]],showCollapseButton:!0,submitOnChange:!1,submitOnEnter:!1},Se=X({__name:"index",setup(r){const{checkShopSelected:o}=K(),{bizImportType:e,bizImportTypeList:b,uploadFormRef:m,extension:g,handleImport:C,ImportSettingButton:n}=J({importTypeList:[{id:1,label:"旗舰店导入数据",bizCode:"QIGAO_ORDER_DETAIL_QJD",isError:!1,auth:"basic:qiGaoOrderDetails:qijiandianImport"},{id:2,label:"半托管导入数据",bizCode:"QIGAO_ORDER_DETAIL_BTG",isError:!1,auth:"basic:qiGaoOrderDetails:bantuoguanImport"}],defaultExtension:".xlsx,.xls,.csv"}),i=Z(j.qiGaoOrderDetailCsv),d=p({},ce),E=x(p({},z),{toolbarConfig:p({},z.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(s,me)=>D(null,[s,me],function*({page:{currentPage:_,pageSize:a}},u){return o()?yield H(p({current:_,size:a},u)):{result:{records:[],total:0}}})}}}),G={},[S,w]=M({gridEvents:G,formOptions:d,gridOptions:E}),{handleDownload:L,downLoading:q}=U(),{hasAccessByCodes:N}=Q(),P=ee(()=>N(["basic:qiGaoOrderDetails:list"]));return(_,a)=>{const u=te("access");return P.value?(c(),f(t(le),{key:0,"auto-content-height":""},{default:l(()=>[h(t(S),null,{"toolbar-actions":l(()=>[(c(!0),oe(re,null,ie(t(b),s=>I((c(),f(t(v),{key:s.id,type:"primary",style:{"margin-right":"12px"},onClick:me=>t(C)(s.bizCode,s.isError,t(w))},{default:l(()=>[T(ae(s.label),1)]),_:2},1032,["onClick"])),[[u,[s.auth],"codes"]])),128))]),"toolbar-tools":l(()=>[I((c(),f(t(v),{loading:t(q),class:"mr-2",type:"primary",onClick:a[0]||(a[0]=s=>t(L)(t(w),i.value))},{icon:l(()=>[h(t($),{class:"mr-1 inline-block size-6"})]),default:l(()=>[a[1]||(a[1]=T(" 导出数据 ",-1))]),_:1},8,["loading"])),[[u,["basic:qiGaoOrderDetails:export"],"codes"]]),h(t(n))]),_:1}),h(t(W),{ref_key:"uploadFormRef",ref:m,"biz-import-type":t(e),"upload-fn":t(Y),extension:t(g)},null,8,["biz-import-type","upload-fn","extension"])]),_:1})):(c(),f(t(ne),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{Se as default};
