import{b3 as Q,fk as me,H as ie,k as he,a as ce,fl as pe,_ as x,o as be,aw as X,fm as xe,b as H,j as de,fn as Ke,fo as ke,e as U,P as ee,n as O,L as ge,E as $,s as G,U as Oe,I as se,fp as te,fq as Ee,aW as Te,fr as Se,fs as Ne,ft as Pe}from"./bootstrap-DjYyHEgg.js";import{j as S,m as ue,b9 as _,aa as b,bF as we,w as V,Q as Ie,n as _e}from"../jse/index-index-rmdNY63r.js";import{i as De}from"./isSymbol-BoOBgcZb.js";var Ce=/\s/;function $e(e){for(var n=e.length;n--&&Ce.test(e.charAt(n)););return n}var je=/^\s+/;function Ae(e){return e&&e.slice(0,$e(e)+1).replace(je,"")}var ne=NaN,Fe=/^[-+]0x[0-9a-f]+$/i,Le=/^0b[01]+$/i,He=/^0o[0-7]+$/i,Me=parseInt;function ae(e){if(typeof e=="number")return e;if(De(e))return ne;if(Q(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Q(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Ae(e);var r=Le.test(e);return r||He.test(e)?Me(e.slice(2),r?2:8):Fe.test(e)?ne:+e}var W=function(){return me.Date.now()},Ue="Expected a function",Be=Math.max,Ve=Math.min;function We(e,n,r){var a,l,f,c,i,v,m=0,K=!1,s=!1,j=!0;if(typeof e!="function")throw new TypeError(Ue);n=ae(n)||0,Q(r)&&(K=!0,s="maxWait"in r,f=s?Be(ae(r.maxWait)||0,n):f,j="trailing"in r?!!r.trailing:j);function P(u){var h=a,E=l;return a=l=void 0,m=u,c=e.apply(E,h),c}function w(u){return m=u,i=setTimeout(y,n),K?P(u):c}function N(u){var h=u-v,E=u-m,t=n-h;return s?Ve(t,f-E):t}function o(u){var h=u-v,E=u-m;return v===void 0||h>=n||h<0||s&&E>=f}function y(){var u=W();if(o(u))return D(u);i=setTimeout(y,N(u))}function D(u){return i=void 0,j&&a?P(u):(a=l=void 0,c)}function A(){i!==void 0&&clearTimeout(i),m=0,a=v=l=i=void 0}function F(){return i===void 0?c:D(W())}function I(){var u=W(),h=o(u);if(a=arguments,l=this,v=u,h){if(i===void 0)return w(v);if(s)return clearTimeout(i),i=setTimeout(y,n),P(v)}return i===void 0&&(i=setTimeout(y,n)),c}return I.cancel=A,I.flush=F,I}const le=4;function ze(e){const{dropPosition:n,dropLevelOffset:r,prefixCls:a,indent:l,direction:f="ltr"}=e,c=f==="ltr"?"left":"right",i=f==="ltr"?"right":"left",v={[c]:`${-r*l+le}px`,[i]:0};switch(n){case-1:v.top="-3px";break;case 1:v.bottom="-3px";break;default:v.bottom="-3px",v[c]=`${l+le}px`;break}return S("div",{style:v,class:`${a}-drop-indicator`},null)}const fe=()=>{const e=ke();return x(x({},e),{showLine:G([Boolean,Object]),multiple:O(),autoExpandParent:O(),checkStrictly:O(),checkable:O(),disabled:O(),defaultExpandAll:O(),defaultExpandParent:O(),defaultExpandedKeys:$(),expandedKeys:$(),checkedKeys:G([Array,Object]),defaultCheckedKeys:$(),selectedKeys:$(),defaultSelectedKeys:$(),selectable:O(),loadedKeys:$(),draggable:O(),showIcon:O(),icon:U(),switcherIcon:ee.any,prefixCls:String,replaceFields:ge(),blockNode:O(),openAnimation:ee.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":U(),"onUpdate:checkedKeys":U(),"onUpdate:expandedKeys":U()})},B=ue({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:ie(fe(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:Object,setup(e,n){let{attrs:r,expose:a,emit:l,slots:f}=n;he(!(e.treeData===void 0&&f.default));const{prefixCls:c,direction:i,virtual:v}=ce("tree",e),[m,K]=pe(c),s=_();a({treeRef:s,onNodeExpand:function(){var o;(o=s.value)===null||o===void 0||o.onNodeExpand(...arguments)},scrollTo:o=>{var y;(y=s.value)===null||y===void 0||y.scrollTo(o)},selectedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.selectedKeys}),checkedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.checkedKeys}),halfCheckedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.halfCheckedKeys}),loadedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.loadedKeys}),loadingKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.loadingKeys}),expandedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.expandedKeys})}),we(()=>{Oe(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});const P=(o,y)=>{l("update:checkedKeys",o),l("check",o,y)},w=(o,y)=>{l("update:expandedKeys",o),l("expand",o,y)},N=(o,y)=>{l("update:selectedKeys",o),l("select",o,y)};return()=>{const{showIcon:o,showLine:y,switcherIcon:D=f.switcherIcon,icon:A=f.icon,blockNode:F,checkable:I,selectable:u,fieldNames:h=e.replaceFields,motion:E=e.openAnimation,itemHeight:t=28,onDoubleclick:d,onDblclick:p}=e,L=x(x(x({},r),be(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{showLine:!!y,dropIndicatorRender:ze,fieldNames:h,icon:A,itemHeight:t}),k=f.default?X(f.default()):void 0;return m(S(xe,H(H({},L),{},{virtual:v.value,motion:E,ref:s,prefixCls:c.value,class:de({[`${c.value}-icon-hide`]:!o,[`${c.value}-block-node`]:F,[`${c.value}-unselectable`]:!u,[`${c.value}-rtl`]:i.value==="rtl"},r.class,K.value),direction:i.value,checkable:I,selectable:u,switcherIcon:C=>Ke(c.value,D,C,f.leafIcon,y),onCheck:P,onExpand:w,onSelect:N,onDblclick:p||d,children:k}),x(x({},f),{checkable:()=>S("span",{class:`${c.value}-checkbox-inner`},null)})))}}});var Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function re(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},a=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable}))),a.forEach(function(l){qe(e,l,r[l])})}return e}function qe(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var J=function(n,r){var a=re({},n,r.attrs);return S(se,re({},a,{icon:Re}),null)};J.displayName="FolderOpenOutlined";J.inheritAttrs=!1;var Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function oe(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},a=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable}))),a.forEach(function(l){Xe(e,l,r[l])})}return e}function Xe(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var Y=function(n,r){var a=oe({},n,r.attrs);return S(se,oe({},a,{icon:Qe}),null)};Y.displayName="FolderOutlined";Y.inheritAttrs=!1;var T;(function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"})(T||(T={}));function Z(e,n,r){function a(l){const f=l[n.key],c=l[n.children];r(f,l)!==!1&&Z(c||[],n,r)}e.forEach(a)}function Ge(e){let{treeData:n,expandedKeys:r,startKey:a,endKey:l,fieldNames:f={title:"title",key:"key",children:"children"}}=e;const c=[];let i=T.None;if(a&&a===l)return[a];if(!a||!l)return[];function v(m){return m===a||m===l}return Z(n,f,m=>{if(i===T.End)return!1;if(v(m)){if(c.push(m),i===T.None)i=T.Start;else if(i===T.Start)return i=T.End,!1}else i===T.Start&&c.push(m);return r.includes(m)}),c}function z(e,n,r){const a=[...n],l=[];return Z(e,r,(f,c)=>{const i=a.indexOf(f);return i!==-1&&(l.push(c),a.splice(i,1)),!!a.length}),l}var Je=function(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const Ye=()=>x(x({},fe()),{expandAction:G([Boolean,String])});function Ze(e){const{isLeaf:n,expanded:r}=e;return n?S(Ne,null,null):r?S(J,null,null):S(Y,null,null)}const R=ue({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:ie(Ye(),{showIcon:!0,expandAction:"click"}),slots:Object,setup(e,n){let{attrs:r,slots:a,emit:l,expose:f}=n;var c;const i=_(e.treeData||te(X((c=a.default)===null||c===void 0?void 0:c.call(a))));V(()=>e.treeData,()=>{i.value=e.treeData}),Ie(()=>{_e(()=>{var t;e.treeData===void 0&&a.default&&(i.value=te(X((t=a.default)===null||t===void 0?void 0:t.call(a))))})});const v=_(),m=_(),K=b(()=>Ee(e.fieldNames)),s=_();f({scrollTo:t=>{var d;(d=s.value)===null||d===void 0||d.scrollTo(t)},selectedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.selectedKeys}),checkedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.checkedKeys}),halfCheckedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.halfCheckedKeys}),loadedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.loadedKeys}),loadingKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.loadingKeys}),expandedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.expandedKeys})});const P=()=>{const{keyEntities:t}=Te(i.value,{fieldNames:K.value});let d;return e.defaultExpandAll?d=Object.keys(t):e.defaultExpandParent?d=Se(e.expandedKeys||e.defaultExpandedKeys||[],t):d=e.expandedKeys||e.defaultExpandedKeys,d},w=_(e.selectedKeys||e.defaultSelectedKeys||[]),N=_(P());V(()=>e.selectedKeys,()=>{e.selectedKeys!==void 0&&(w.value=e.selectedKeys)},{immediate:!0}),V(()=>e.expandedKeys,()=>{e.expandedKeys!==void 0&&(N.value=e.expandedKeys)},{immediate:!0});const y=We((t,d)=>{const{isLeaf:p}=d;p||t.shiftKey||t.metaKey||t.ctrlKey||s.value.onNodeExpand(t,d)},200,{leading:!0}),D=(t,d)=>{e.expandedKeys===void 0&&(N.value=t),l("update:expandedKeys",t),l("expand",t,d)},A=(t,d)=>{const{expandAction:p}=e;p==="click"&&y(t,d),l("click",t,d)},F=(t,d)=>{const{expandAction:p}=e;(p==="dblclick"||p==="doubleclick")&&y(t,d),l("doubleclick",t,d),l("dblclick",t,d)},I=(t,d)=>{const{multiple:p}=e,{node:L,nativeEvent:k}=d,C=L[K.value.key],M=x(x({},d),{selected:!0}),ve=(k==null?void 0:k.ctrlKey)||(k==null?void 0:k.metaKey),ye=k==null?void 0:k.shiftKey;let g;p&&ve?(g=t,v.value=C,m.value=g,M.selectedNodes=z(i.value,g,K.value)):p&&ye?(g=Array.from(new Set([...m.value||[],...Ge({treeData:i.value,expandedKeys:N.value,startKey:C,endKey:v.value,fieldNames:K.value})])),M.selectedNodes=z(i.value,g,K.value)):(g=[C],v.value=C,m.value=g,M.selectedNodes=z(i.value,g,K.value)),l("update:selectedKeys",g),l("select",g,M),e.selectedKeys===void 0&&(w.value=g)},u=(t,d)=>{l("update:checkedKeys",t),l("check",t,d)},{prefixCls:h,direction:E}=ce("tree",e);return()=>{const t=de(`${h.value}-directory`,{[`${h.value}-directory-rtl`]:E.value==="rtl"},r.class),{icon:d=a.icon,blockNode:p=!0}=e,L=Je(e,["icon","blockNode"]);return S(B,H(H(H({},r),{},{icon:d||Ze,ref:s,blockNode:p},L),{},{prefixCls:h.value,class:t,expandedKeys:N.value,selectedKeys:w.value,onSelect:I,onClick:A,onDblclick:F,onExpand:D,onCheck:u}),a)}}}),q=Pe,at=x(B,{DirectoryTree:R,TreeNode:q,install:e=>(e.component(B.name,B),e.component(q.name,q),e.component(R.name,R),e)});export{at as T};
