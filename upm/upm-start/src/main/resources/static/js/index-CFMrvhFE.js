var $=Object.defineProperty,z=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,u=(e,t)=>{for(var o in t||(t={}))O.call(t,o)&&y(e,o,t[o]);if(_)for(var o of _(t))R.call(t,o)&&y(e,o,t[o]);return e},k=(e,t)=>z(e,E(t));var h=(e,t,o)=>new Promise((p,d)=>{var f=n=>{try{i(o.next(n))}catch(s){d(s)}},g=n=>{try{i(o.throw(n))}catch(s){d(s)}},i=n=>n.done?p(n.value):Promise.resolve(n.value).then(f,g);i((o=o.apply(e,t)).next())});import{dJ as j,dz as B,dK as V}from"./bootstrap-DjYyHEgg.js";import{i as v,s as G,j as J,k as q}from"./index-C4izEvQb.js";import{u as K}from"./useShopCheck-DKIjDUfz.js";import L from"./editHistoryForm-EWknRe8h.js";import{_ as M}from"./form.vue_vue_type_script_setup_true_lang-v3860QjJ.js";import{_ as P}from"./table-action.vue_vue_type_style_index_0_lang-BluPqhNI.js";import{_ as N}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as U}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{m as I,b9 as S,v as Q,aU as T,aa as W,ab as x,b2 as w,bJ as C,j as l,u as a}from"../jse/index-index-rmdNY63r.js";import"./contast-C3bEivmW.js";import"./index-EkdSFYQU.js";import"./index-DMLMl1eR.js";import"./isPlainObject-DfbxWMXa.js";import"./index-Bw6N7aDv.js";import"./shallowequal-W2RnI4nT.js";import"./index-CM6A-82x.js";import"./Dropdown-D1vLSWoc.js";import"./rotate-cw-Dzdn7gja.js";const ho=I({__name:"index",setup(e){const{checkShopSelected:t}=K(),o=S(),p=u({},G),d=k(u({},v),{toolbarConfig:u({},v.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(yo,ko)=>h(null,[yo,ko],function*({page:{currentPage:r,pageSize:m}},c){return t()?yield J(u({current:r,size:m},c)):{result:{records:[],total:0}}})}}}),f={},[g,i]=j({gridEvents:f,formOptions:p,gridOptions:d}),n=()=>{t()&&(o.value.setData({gridApi:i}),o.value.open())},s=r=>{t()&&(o.value.setData({record:r,gridApi:i}),o.value.open())},F=r=>h(null,null,function*(){yield q(r.id),V.success("删除成功"),i.reload()}),b=S(),A=()=>{t()&&(b.value.setData({gridApi:i}),b.value.open())};Q(()=>{}),T(()=>{});const{hasAccessByCodes:D}=B(),H=W(()=>D(["basic:customConfigurationProduct:list"]));return(r,m)=>H.value?(w(),x(a(N),{key:0,"auto-content-height":""},{default:C(()=>[l(a(g),null,{"toolbar-actions":C(()=>[l(a(P),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["basic:customConfigurationProduct:add"],onClick:n.bind(null)},{label:"修改历史数据",type:"primary",icon:"ant-design:edit-outlined",onClick:A.bind(null)}]},null,8,["actions"])]),action:C(({row:c})=>[l(a(P),{actions:[{label:"编辑",icon:"ant-design:edit-outlined",type:"link",size:"small",auth:["basic:customConfigurationProduct:edit"],onClick:s.bind(null,c)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",auth:["basic:customConfigurationProduct:delete"],popConfirm:{title:"确定删除吗？",confirm:F.bind(null,c)}}]},null,8,["actions","drop-down-actions"])]),_:1}),l(M,{ref_key:"customConfigurationProductFormRef",ref:o},null,512),l(L,{ref_key:"editHistoryFormRef",ref:b,onOnSubmit:m[0]||(m[0]=c=>a(i).reload())},null,512)]),_:1})):(w(),x(a(U),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}});export{ho as default};
