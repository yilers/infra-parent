var w=Object.defineProperty;var v=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var _=(e,s,a)=>s in e?w(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,p=(e,s)=>{for(var a in s||(s={}))P.call(s,a)&&_(e,a,s[a]);if(v)for(var a of v(s))V.call(s,a)&&_(e,a,s[a]);return e};var d=(e,s,a)=>new Promise((m,u)=>{var n=r=>{try{o(a.next(r))}catch(l){u(l)}},f=r=>{try{o(a.throw(r))}catch(l){u(l)}},o=r=>r.done?m(r.value):Promise.resolve(r.value).then(n,f);o((a=a.apply(e,s)).next())});import{dL as x,bj as B,dK as k}from"./bootstrap-DjYyHEgg.js";import{f as y,g as C}from"./index-BWhM0zNP.js";import{f as N}from"./index-DazI-itC.js";import{m as j,b9 as h,aa as F,ab as M,b2 as R,u as A,bJ as S,ae as J,j as K}from"../jse/index-index-rmdNY63r.js";const L={class:"common-form"},H=j({__name:"form",setup(e,{expose:s}){const a=h({}),m=h(),[u,n]=x(p({showDefaultActions:!1},N)),[f,o]=B({onOpenChange(i){const t=o.getData();m.value=i?t==null?void 0:t.gridApi:null,a.value=i?(t==null?void 0:t.record)||{}:{},n.setValues(a.value)},onConfirm(){return d(this,null,function*(){var t,c;if((yield n.validate()).valid)try{o.lock(!0);const b=yield n.getValues(),g=yield r(b);yield((t=a.value)!=null&&t.id?y:C)(g),k.success("保存成功"),(c=m.value)==null||c.reload(),o.close()}finally{o.lock(!1)}})}});function r(i){return d(this,null,function*(){const{platformName:t,id:c}=i;return p({platformName:t},c&&{id:c})})}const l=F(()=>{var i;return(i=a.value)!=null&&i.id?"编辑平台":"新增平台"});return s(o),(i,t)=>(R(),M(A(f),{title:l.value,class:"w-300px"},{default:S(()=>[J("div",L,[K(A(u))])]),_:1},8,["title"]))}});export{H as _};
