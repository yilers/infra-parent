var y=Object.defineProperty,B=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var x=(i,s,e)=>s in i?y(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e,r=(i,s)=>{for(var e in s||(s={}))T.call(s,e)&&x(i,e,s[e]);if(h)for(var e of h(s))z.call(s,e)&&x(i,e,s[e]);return i},c=(i,s)=>B(i,E(s));var _=(i,s,e)=>new Promise((u,l)=>{var m=t=>{try{n(e.next(t))}catch(o){l(o)}},d=t=>{try{n(e.throw(t))}catch(o){l(o)}},n=t=>t.done?u(t.value):Promise.resolve(t.value).then(m,d);n((e=e.apply(i,s)).next())});import{dJ as S,dz as v}from"./bootstrap-DjYyHEgg.js";import{g as L}from"./fileTransfer-p8-3apt7.js";import{u as N}from"./useDownLoad-Cw45s4VH.js";import{a as V}from"./dateTime-Ce6Ez397.js";import{B as $}from"./index-ClU3eF4t.js";import{_ as j}from"./table-action.vue_vue_type_style_index_0_lang-BluPqhNI.js";import{_ as A}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as D}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{m as F,aa as G,ab as b,b2 as C,bJ as p,j as g,u as a}from"../jse/index-index-rmdNY63r.js";import"./useShopCheck-DKIjDUfz.js";import"./index-Bw6N7aDv.js";import"./shallowequal-W2RnI4nT.js";import"./index-CM6A-82x.js";import"./Dropdown-D1vLSWoc.js";import"./rotate-cw-Dzdn7gja.js";const H={1:"processing",2:"success",3:"error"},J={1:"处理中",2:"已完成",3:"失败"},w={toolbarConfig:{resizable:!0},columns:[{title:"导出时间",field:"createTime",width:190},{title:"耗时时间",field:"consumingTime",width:190},{field:"taskName",title:"导出名称",width:380},{field:"status",title:"导出状态",slots:{default:"status"},width:190},{field:"errorReason",title:"错误原因"},{field:"fileExtension",title:"文件类型",width:150},{field:"totalCount",title:"数量",width:150},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:120}]},it=F({__name:"index",setup(i){const s=c(r({},w),{toolbarConfig:r({},w.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:t=>_(null,[t],function*({page:{currentPage:d,pageSize:n}}){const o=yield L({current:d,size:n}),k=o.records.map(f=>c(r({},f),{consumingTime:V(f.startTime,f.endTime)}));return c(r({},o),{records:k})})}}}),[e]=S({gridOptions:s}),{handleBlobDownload:u}=N(),{hasAccessByCodes:l}=v(),m=G(()=>l(["basic:exportFile:list"]));return(d,n)=>m.value?(C(),b(a(A),{key:0,"auto-content-height":""},{default:p(()=>[g(a(e),{"table-title":"导出数据文件"},{action:p(({row:t})=>[g(a(j),{actions:[{label:"下载",size:"small",type:"link",icon:"ant-design:cloud-download-outlined",auth:["basic:exportFile:download"],ifShow(){return t.status===2},loading:t.loading,onClick:a(u).bind(null,{id:t.id,name:t.taskName,fileExtension:t.fileExtension},o=>t.loading=o),disabled:t.status!==2}]},null,8,["actions"])]),status:p(({row:t})=>[g(a($),{status:a(H)[t.status],text:a(J)[t.status],class:"badge-3-words"},null,8,["status","text"])]),_:1})]),_:1})):(C(),b(a(D),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}});export{it as default};
