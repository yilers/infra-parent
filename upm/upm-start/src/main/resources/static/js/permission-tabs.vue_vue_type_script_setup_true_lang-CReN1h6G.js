import{dz as g}from"./bootstrap-DjYyHEgg.js";import{b9 as C,aa as a,w as B,m as P,ab as f,ad as h,u as m,b2 as b,aJ as x,bJ as _,bb as A,I as T,ac as S}from"../jse/index-index-rmdNY63r.js";import{T as I,a as J}from"./index-wrrfkh6D.js";function N(r){const{hasAccessByCodes:v}=g(),t=C(""),u=a(()=>Array.isArray(r)?r:r.value),l=a(()=>u.value.reduce((e,c)=>(e[c.key]=c.permissions.length===0||v(c.permissions),e),{})),i=a(()=>u.value.filter(e=>l.value[e.key]).map(e=>e.key)),s=a(()=>u.value.find(e=>e.key===t.value)),d=a(()=>{var e;return((e=s.value)==null?void 0:e.templateType)||""}),k=a(()=>{var e;return((e=s.value)==null?void 0:e.businessCategory)||""}),p=a(()=>{var e;return((e=s.value)==null?void 0:e.label)||""}),o=a(()=>{var e;return((e=s.value)==null?void 0:e.direction)||""}),y=a(()=>{var e;return((e=s.value)==null?void 0:e.link)||""}),n=a(()=>{var e;return((e=s.value)==null?void 0:e.attachParams)||""});return B(i,e=>{if(e.length===0){t.value="";return}(!t.value||!e.includes(t.value))&&(t.value=e[0])},{immediate:!0}),{activeTab:t,accessibleTabs:i,tabPermissions:l,handleTabChange:e=>{const c=e;i.value.includes(c)&&(t.value=c)},templateType:d,businessCategory:k,currentTabInfo:s,tabName:p,link:y,attachParams:n,direction:o}}const R={key:1,class:"p-4 text-center text-gray-500"},K=P({__name:"permission-tabs",props:{configs:{},tabBarStyle:{default:()=>({marginBottom:0})}},emits:["change"],setup(r,{emit:v}){const t=r,u=v,{activeTab:l,accessibleTabs:i,tabPermissions:s,handleTabChange:d}=N(t.configs),k=o=>{d(o),u("change",o)},p=o=>{};return(o,y)=>m(i).length>0?(b(),f(m(I),{key:0,"active-key":m(l),"onUpdate:activeKey":y[0]||(y[0]=n=>x(l)?l.value=n:null),"tab-bar-style":r.tabBarStyle,onChange:k,onTabScroll:p},{default:_(()=>[(b(!0),h(T,null,A(r.configs,n=>(b(),h(T,{key:n.key},[m(s)[n.key]?(b(),f(m(J),{key:n.key,tab:n.label},null,8,["tab"])):S("",!0)],64))),128))]),_:1},8,["active-key","tab-bar-style"])):(b(),h("div",R,"暂无权限访问任何标签页"))}});export{K as _,N as u};
