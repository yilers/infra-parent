var V=Object.defineProperty,$=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var T=(a,t,o)=>t in a?V(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,p=(a,t)=>{for(var o in t||(t={}))Y.call(t,o)&&T(a,o,t[o]);if(x)for(var o of x(t))j.call(t,o)&&T(a,o,t[o]);return a},S=(a,t)=>$(a,R(t));var _=(a,t,o)=>new Promise((g,c)=>{var u=r=>{try{n(o.next(r))}catch(m){c(m)}},y=r=>{try{n(o.throw(r))}catch(m){c(m)}},n=r=>r.done?g(r.value):Promise.resolve(r.value).then(u,y);n((o=o.apply(a,t)).next())});import{W as G}from"./index-C4NAiFfA.js";import{dI as H,dJ as q,dz as J,a7 as v}from"./bootstrap-DjYyHEgg.js";import{h as U,r as W}from"./fileTransfer-p8-3apt7.js";import{w as K}from"./table-FRaKquww.js";import{u as Q,_ as X}from"./useTableImport-CNd8lRg2.js";import{u as Z}from"./useDownLoad-Cw45s4VH.js";import{u as ee}from"./useShopCheck-DKIjDUfz.js";import{ci as k,m as te,b9 as oe,aa as ae,be as re,ab as h,b2 as d,bJ as s,j as b,u as e,bL as P,ai as D,ad as ie,I as le,bb as se,bp as ne}from"../jse/index-index-rmdNY63r.js";import{p as N}from"./contast-C3bEivmW.js";import{u as me}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as pe}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as de}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:ce}=me(),L={toolbarConfig:{resizable:!0},columns:[{title:"序号",type:"seq",width:50,fixed:"left"},{field:"paymentType",title:"打款类型",width:150},{field:"payerName",title:"打款人",width:200},{field:"receiverName",title:"收款人",width:200},{field:"receiverAlipay",title:"收款方支付宝",width:200},{field:"paymentAmount",title:"打款金额(元)",width:150},{field:"paymentTime",title:"打款时间",width:150},{field:"alipayTradeNo",title:"支付宝交易号",width:270},{field:"relatedOrderNo",title:"关联订单",width:210},{field:"relatedOrderAmount",title:"关联订单金额",width:150},{field:"paymentStatus",title:"打款状态",width:150},{field:"remark",title:"备注",width:200},{field:"message",title:"留言",width:300},{field:"progressStatus",title:"进度状态",width:150,formatter({cellValue:a}){const t=N.find(o=>o.value===a);return t?t.label:a}},{field:"createTime",title:"创建时间",width:160}]},ue={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[ce.datetime("paymentTime","打款时间",[k().startOf("month"),k().endOf("month")]),{component:"Select",componentProps:{allowClear:!0,options:N,placeholder:"请选择",mode:"multiple",maxTagCount:1,maxTagTextLength:6},fieldName:"progressStatusList",label:"进度状态"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"paymentType",label:"打款类型"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"relatedOrderNo",label:"关联订单"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"payerName",label:"打款人"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"alipayTradeNo",label:"支付宝交易号"}],fieldMappingTime:[["paymentTime",["startTime","endTime"],"YYYY-MM-DD HH:mm:ss"]],showCollapseButton:!0,submitOnChange:!1,submitOnEnter:!1},Ae=te({__name:"index",setup(a){const{checkShopSelected:t}=ee(),{bizImportType:o,bizImportTypeList:g,uploadFormRef:c,isError:u,extension:y,handleImport:n,ImportSettingButton:r}=Q({importTypeList:[{id:1,label:"导入数据",bizCode:"TM_SMALL",isError:!1,auth:"basic:tmallSmallPaymentDetail:import"},{id:2,label:"导入异常数据",bizCode:"TM_SMALL",isError:!0,auth:"basic:tmallSmallPaymentDetail:importFail"}],defaultExtension:".xlsx,.csv",errorExtension:".xlsx"}),m=oe(H.tmallSmallPaymentCsv),z=p({},ue),I=S(p({},L),{toolbarConfig:p({},L.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(l,fe)=>_(null,[l,fe],function*({page:{currentPage:C,pageSize:i}},f){return t()?yield K(p({current:C,size:i},f)):{result:{records:[],total:0}}})}}}),E={},[O,w]=q({gridEvents:E,formOptions:z,gridOptions:I}),{handleDownload:A,downLoading:B}=Z(),{hasAccessByCodes:F}=J(),M=ae(()=>F(["basic:tmallSmallPaymentDetail:list"]));return(C,i)=>{const f=re("access");return M.value?(d(),h(e(pe),{key:0,"auto-content-height":""},{default:s(()=>[b(e(O),null,{"toolbar-actions":s(()=>[(d(!0),ie(le,null,se(e(g),l=>P((d(),h(e(v),{key:l.id,type:"primary",style:{"margin-right":"12px"},onClick:fe=>e(n)(l.bizCode,l.isError,e(w))},{default:s(()=>[D(ne(l.label),1)]),_:2},1032,["onClick"])),[[f,[l.auth],"codes"]])),128))]),"toolbar-tools":s(()=>[P((d(),h(e(v),{loading:e(B),class:"mr-2",type:"primary",onClick:i[0]||(i[0]=l=>e(A)(e(w),m.value))},{icon:s(()=>[b(e(G),{class:"mr-1 inline-block size-6"})]),default:s(()=>[i[1]||(i[1]=D(" 导出数据 ",-1))]),_:1},8,["loading"])),[[f,["basic:tmallSmallPaymentDetail:export"],"codes"]]),b(e(r))]),_:1}),b(e(X),{ref_key:"uploadFormRef",ref:c,"biz-import-type":e(o),extension:e(y),"is-error":e(u),"upload-fn":e(u)?e(W):e(U)},null,8,["biz-import-type","extension","is-error","upload-fn"])]),_:1})):(d(),h(e(de),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{Ae as default};
