var x=Object.defineProperty,M=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var y=(e,i,t)=>i in e?x(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,n=(e,i)=>{for(var t in i||(i={}))j.call(i,t)&&y(e,t,i[t]);if(g)for(var t of g(i))D.call(i,t)&&y(e,t,i[t]);return e},S=(e,i)=>M(e,_(i));var P=(e,i,t)=>new Promise((c,r)=>{var m=l=>{try{o(t.next(l))}catch(s){r(s)}},u=l=>{try{o(t.throw(l))}catch(s){r(s)}},o=l=>l.done?c(l.value):Promise.resolve(l.value).then(m,u);o((t=t.apply(e,i)).next())});import{W as Y}from"./index-C4NAiFfA.js";import{dI as I,dJ as L,dz as K,a7 as N}from"./bootstrap-DjYyHEgg.js";import{C as U}from"./table-FRaKquww.js";import{u as V}from"./useDownLoad-Cw45s4VH.js";import{u as z}from"./useShopCheck-DKIjDUfz.js";import{ci as T,m as E,b9 as R,aa as W,ab as f,b2 as h,bJ as w,u as d,ac as G,ai as $,j as J}from"../jse/index-index-rmdNY63r.js";import{_ as q}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{_ as H}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import"./fileTransfer-p8-3apt7.js";import"./rotate-cw-Dzdn7gja.js";const Q=[{label:"账单类型",value:"bill"},{label:"产品分类",value:"product"}],X=[{title:"结算金额",children:[{field:"reconciliationTime",title:"对账年月",width:150},{field:"billType",title:"账单类型",width:130},{field:"productCategory",title:"产品分类",width:130},{field:"tobFlowAmount",title:"	TOB流水金额",width:150},{field:"tobAbnormalFlow",title:"	TOB异常流水",width:150},{field:"tobBillAmount",title:"TOB账单金额",width:150},{field:"failedOrderFlow",title:"失败订单流水",width:150},{field:"marginDeducted",title:"保证金被扣及售后",width:150},{field:"tobUserPaymentAdjustment",title:"TOB用户实付应调账",width:150},{field:"specialIncome",title:"特殊收入（实物）",width:150},{field:"deposit",title:"定金",width:150},{field:"platformSubsidy",title:"平台补贴",width:150},{field:"limitedTimeSubsidy",title:"秒杀补贴",width:150},{field:"goldCoins",title:"淘金币",width:150},{field:"farmSubsidy",title:"芭芭农场砍价补贴",width:150},{field:"pointReward",title:"集分宝",width:150},{field:"huiyingbao",title:"惠营宝",width:150},{field:"adjustmentAmount",title:"应调账金额",width:150},{field:"settlementAmount",title:"应结算金额",width:150}]},{title:"平台达人发票",children:[{field:"autoRenewalServiceFee",title:"自动续订服务费",width:150},{field:"basicSoftwareServiceFee",title:"基础软件服务费",width:150},{field:"categoryCommissionNew",title:"类目佣金(新)",width:150},{field:"rechargeSoftware",title:"各种充值软件服务费",width:150},{field:"studentPrice",title:"学生价技术服务费",width:150},{field:"photosynthesis",title:"光合平台软件服务费",width:150},{field:"withholdingPoints",title:"代扣返点积分",width:150},{field:"consumerExper",title:"消费者体验提升计划服务费",width:150},{field:"billionsSubsidyServiceFee",title:"百补服务费",width:150},{field:"billionsSubsidyLive",title:"百亿补贴直播",width:150},{field:"juhuasanServiceFee",title:"聚划算服务费",width:150},{field:"tcpLiveStar",title:"TCP直播达人",width:150},{field:"aliMamaCpsPurchase",title:"阿里妈妈CPS采买",width:150},{field:"newMembers",title:"品牌新享",width:150},{field:"taobaoUnionCpsPurchase",title:"淘宝联盟CPS采买",width:150}]},{field:"expendSummation",title:"合计支出",width:150},{title:"代理商KPI",children:[{field:"cashWriteOffAmount",title:"现金核销金额",width:150},{title:"调减金额",width:150,children:[{field:"smallAmountPayment",title:"小额打款",width:150},{field:"jointMembership",title:"联合会员",width:150},{field:"testOrder",title:"测试订单",width:150}]},{field:"agentKpi",title:"代理商KPI",width:150}]},{title:"KPI数据分类",children:[{field:"kpiDataClassOwnBusiness",title:"自营收入",width:150},{title:"达人带收",width:150,children:[{field:"kpiDataClassTcpLive",title:"TCP直播达人带收",width:150},{field:"kpiDataClassCpsAlimama",title:"淘宝联盟CPS采买带收",width:150},{field:"kpiDataClassCpsTb",title:"淘宝联盟佣金代扣带收",width:150}]},{field:"kpiDataClassSummation",title:"合计",width:150}]}],Z=[{title:"结算金额",children:[{field:"reconciliationTime",title:"对账年月",width:150},{field:"billType",title:"账单类型",width:130},{field:"tobFlowAmount",title:"	TOB流水金额",width:150},{field:"tobAbnormalFlow",title:"	TOB异常流水",width:150},{field:"tobBillAmount",title:"TOB账单金额",width:150},{field:"failedOrderFlow",title:"失败订单流水",width:150},{field:"marginDeducted",title:"保证金被扣及售后",width:150},{field:"tobUserPaymentAdjustment",title:"TOB用户实付应调账",width:150},{field:"specialIncome",title:"特殊收入（实物）",width:150},{field:"deposit",title:"定金",width:150},{field:"platformSubsidy",title:"平台补贴",width:150},{field:"limitedTimeSubsidy",title:"秒杀补贴",width:150},{field:"goldCoins",title:"淘金币",width:150},{field:"farmSubsidy",title:"芭芭农场砍价补贴",width:150},{field:"pointReward",title:"集分宝",width:150},{field:"huiyingbao",title:"惠营宝",width:150},{field:"adjustmentAmount",title:"应调账金额",width:150},{field:"settlementAmount",title:"应结算金额",width:150}]},{title:"平台达人发票",children:[{field:"autoRenewalServiceFee",title:"自动续订服务费",width:150},{field:"basicSoftwareServiceFee",title:"基础软件服务费",width:150},{field:"categoryCommissionNew",title:"类目佣金(新)",width:150},{field:"rechargeSoftwareNew",title:"各种充值软件服务费(新)",width:150},{field:"studentPrice",title:"学生价技术服务费",width:150},{field:"photosynthesis",title:"光合平台软件服务费",width:150},{field:"consumerExper",title:"消费者体验提升计划服务费",width:150},{field:"withholdingPoints",title:"代扣返点积分",width:150},{field:"billionsSubsidyServiceFee",title:"百补服务费",width:150},{field:"billionsSubsidyLive",title:"百亿补贴直播",width:150},{field:"juhuasanServiceFee",title:"聚划算服务费",width:150},{field:"tcpLiveStar",title:"TCP直播达人",width:150},{field:"aliMamaCpsPurchase",title:"阿里妈妈CPS采买",width:150},{field:"newMembers",title:"品牌新享",width:150},{field:"taobaoUnionCpsPurchase",title:"淘宝联盟CPS采买",width:150}]},{field:"expendSummation",title:"合计支出",width:150},{title:"代理商KPI",children:[{field:"cashWriteOffAmount",title:"现金核销金额",width:150},{title:"调减金额",width:150,children:[{field:"smallAmountPayment",title:"小额打款",width:150},{field:"jointMembership",title:"联合会员",width:150},{field:"testOrder",title:"测试订单",width:150}]},{field:"agentKpi",title:"代理商KPI",width:150}]}],tt=[{title:"结算金额",children:[{field:"reconciliationTime",title:"对账年月",width:150},{field:"productCategory",title:"产品分类",width:130},{field:"tobFlowAmount",title:"	TOB流水金额",width:150},{field:"tobAbnormalFlow",title:"	TOB异常流水",width:150},{field:"tobBillAmount",title:"TOB账单金额",width:150},{field:"failedOrderFlow",title:"失败订单流水",width:150},{field:"marginDeducted",title:"保证金被扣及售后",width:150},{field:"tobUserPaymentAdjustment",title:"TOB用户实付应调账",width:150},{field:"specialIncome",title:"特殊收入（实物）",width:150},{field:"deposit",title:"定金",width:150},{field:"platformSubsidy",title:"平台补贴",width:150},{field:"limitedTimeSubsidy",title:"秒杀补贴",width:150},{field:"goldCoins",title:"淘金币",width:150},{field:"farmSubsidy",title:"芭芭农场砍价补贴",width:150},{field:"pointReward",title:"集分宝",width:150},{field:"huiyingbao",title:"惠营宝",width:150},{field:"adjustmentAmount",title:"应调账金额",width:150},{field:"settlementAmount",title:"应结算金额",width:150}]},{field:"agentKpi",title:"代理商KPI",width:150}],A={bill:Z,product:tt,default:X},O={toolbarConfig:{resizable:!0}},it={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[{component:"Select",componentProps:{allowClear:!0,options:Q,placeholder:"请选择"},defaultValue:"bill",fieldName:"customType",label:"类型"},{component:"DatePicker",fieldName:"reconciliationTime",label:"月度",defaultValue:T().subtract(2,"month").format("YYYYMM"),componentProps:{picker:"month",format:"YYYYMM",valueFormat:"YYYYMM",disabledDate:e=>e.isAfter(T().endOf("day"))}}],showCollapseButton:!1,submitOnChange:!1,submitOnEnter:!1},ct=E({__name:"index",setup(e){const{checkShopSelected:i}=z(),t=R(I.reconciliationSummaryCsv),c=n({},it),r=S(n({},O),{toolbarConfig:n({},O.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:(pt,bt)=>P(null,[pt,bt],function*({page:{currentPage:b,pageSize:a}},p){var C;if(!i())return{result:{records:[],total:0}};const F=yield U(n({current:b,size:a},p)),k=(C=A[p.customType])!=null?C:A.default;return o.setGridOptions({columns:k}),F})}}}),m={},[u,o]=L({gridEvents:m,formOptions:c,gridOptions:r}),{hasAccessByCodes:l}=K(),s=W(()=>l(["financeAccount:reconciliationOverview:list"])),{handleDownload:v,downLoading:B}=V();return(b,a)=>(h(),f(d(H),{"auto-content-height":""},{default:w(()=>[s.value?(h(),f(d(u),{key:0,"table-title":"对账概况"},{"toolbar-tools":w(()=>[d(l)(["financeAccount:reconciliationOverview:export"])?(h(),f(d(N),{key:0,loading:d(B),class:"mr-2",type:"primary",onClick:a[0]||(a[0]=p=>d(v)(d(o),t.value))},{icon:w(()=>[J(d(Y),{class:"mr-1 inline-block size-6"})]),default:w(()=>[a[1]||(a[1]=$(" 导出数据 ",-1))]),_:1},8,["loading"])):G("",!0)]),_:1})):(h(),f(d(q),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))]),_:1}))}});export{ct as default};
