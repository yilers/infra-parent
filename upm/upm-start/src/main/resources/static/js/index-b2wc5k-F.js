var P=Object.defineProperty,F=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var D=(o,e,t)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,c=(o,e)=>{for(var t in e||(e={}))Y.call(e,t)&&D(o,t,e[t]);if(v)for(var t of v(e))$.call(e,t)&&D(o,t,e[t]);return o},_=(o,e)=>F(o,V(e));var I=(o,e,t)=>new Promise((b,m)=>{var w=r=>{try{n(t.next(r))}catch(d){m(d)}},g=r=>{try{n(t.throw(r))}catch(d){m(d)}},n=r=>r.done?b(r.value):Promise.resolve(r.value).then(w,g);n((t=t.apply(o,e)).next())});import{W as A}from"./index-C4NAiFfA.js";import{dI as G,dJ as j,dz as H,a7 as x}from"./bootstrap-DjYyHEgg.js";import{h as U}from"./fileTransfer-p8-3apt7.js";import{s as W}from"./table-FRaKquww.js";import{u as X,_ as q}from"./useTableImport-CNd8lRg2.js";import{u as J}from"./useDownLoad-Cw45s4VH.js";import{u as Q}from"./useShopCheck-DKIjDUfz.js";import{ci as T,m as K,b9 as Z,aa as ee,be as te,ab as u,b2 as p,bJ as s,j as h,u as i,bL as k,ai as z,ad as ie,I as oe,bb as re,bp as ae}from"../jse/index-index-rmdNY63r.js";import{p as le}from"./contast-C3bEivmW.js";import{u as se}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as ne}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as de}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:ce}=se(),R={toolbarConfig:{resizable:!0},scrollX:{enabled:!0},scrollY:{enabled:!0},columnConfig:{resizable:!1,minWidth:100},columns:[{title:"序号",type:"seq",width:50,fixed:"left"},{field:"type",title:"会员类型",width:130},{field:"statisDate",title:"统计日期",width:150,formatter:"formatDate"},{field:"ftranTime",title:"交易时间",width:150},{field:"offerName",title:"商品名称",width:360},{field:"offerId",title:"商品ID",width:150},{field:"contractNo",title:"合同编号",width:270},{field:"subMerchantName",title:"子商户名称",width:200},{field:"result",title:"交易结果",width:120},{field:"rocOid",title:"订单ID",width:220},{field:"payChannel",title:"支付渠道",width:220},{field:"deliverMethod",title:"配送方式",width:220},{field:"provideNoType",title:"提供号码类型",width:220},{field:"provideUin",title:"提供用户标识",width:260},{field:"productName",title:"产品名称",width:300},{field:"productId",title:"产品ID",width:200},{field:"buyQuantity",title:"购买数量",width:100},{field:"productPrice",title:"产品单价",width:150},{field:"payAmt",title:"支付金额",width:150},{field:"tobSubChannelId",title:"ToB子渠道ID",width:200},{field:"drmInfo",title:"DRM信息",width:250},{field:"activityId",title:"活动ID",width:240},{field:"rebateGoods",title:"是否返利商品",width:150},{field:"provideResult",title:"提供结果",width:150},{field:"progressStatus",title:"进度状态",width:150,formatter({cellValue:o}){const e=le.find(t=>t.value===o);return e?e.label:o}},{field:"createTime",title:"创建时间",width:160}]},pe=[{label:"非会员权益",value:"非会员权益"},{label:"会员权益",value:"会员权益"}],me={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[ce.datetime("ftranTime","交易时间",[T().startOf("month"),T().endOf("month")]),{component:"Select",componentProps:{allowClear:!0,options:pe,placeholder:"请选择"},fieldName:"type",label:"会员类型"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"rocOid",label:"订单ID"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"productName",label:"产品名称"}],fieldMappingTime:[["ftranTime",["ftranStartTime","ftranEndTime"],"YYYY-MM-DD HH:mm:ss"]],showCollapseButton:!0,submitOnChange:!1,submitOnEnter:!1},Be=K({__name:"index",setup(o){const{checkShopSelected:e}=Q(),{bizImportType:t,bizImportTypeList:b,uploadFormRef:m,handleImport:w,extension:g,ImportSettingButton:n}=X({importTypeList:[{id:1,label:"会员导入数据",bizCode:"TX_MEMBER",isError:!1,auth:"basic:tencentReconciliationDetail:memberImport"},{id:2,label:"非会员导入数据",bizCode:"TX_UN_MEMBER",isError:!1,auth:"basic:tencentReconciliationDetail:noMemberImport"}],defaultExtension:".csv"}),r=Z(G.txOrderFlowCsv),d=c({},me),S=_(c({},R),{toolbarConfig:c({},R.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,height:"auto",keepSource:!0,pagerConfig:{},exportConfig:{},proxyConfig:{ajax:{query:(l,fe)=>I(null,[l,fe],function*({page:{currentPage:y,pageSize:a}},f){return e()?yield W(c({current:y,size:a},f)):{result:{records:[],total:0}}})},sort:!0}}),E={},[M,C]=j({gridEvents:E,formOptions:d,gridOptions:S}),{handleDownload:N,downLoading:B}=J(),{hasAccessByCodes:O}=H(),L=ee(()=>O(["basic:tencentReconciliationDetail:list"]));return(y,a)=>{const f=te("access");return L.value?(p(),u(i(ne),{key:0,"auto-content-height":""},{default:s(()=>[h(i(M),null,{"toolbar-actions":s(()=>[(p(!0),ie(oe,null,re(i(b),l=>k((p(),u(i(x),{key:l.id,type:"primary",style:{"margin-right":"12px"},onClick:fe=>i(w)(l.bizCode,l.isError,i(C))},{default:s(()=>[z(ae(l.label),1)]),_:2},1032,["onClick"])),[[f,[l.auth],"codes"]])),128))]),"toolbar-tools":s(()=>[k((p(),u(i(x),{loading:i(B),class:"mr-2",type:"primary",onClick:a[0]||(a[0]=l=>i(N)(i(C),r.value))},{icon:s(()=>[h(i(A),{class:"mr-1 inline-block size-6"})]),default:s(()=>[a[1]||(a[1]=z(" 导出数据 ",-1))]),_:1},8,["loading"])),[[f,["basic:tencentReconciliationDetail:export"],"codes"]]),h(i(n))]),_:1}),h(i(q),{ref_key:"uploadFormRef",ref:m,"biz-import-type":i(t),"upload-fn":i(U),extension:i(g)},null,8,["biz-import-type","upload-fn","extension"])]),_:1})):(p(),u(i(de),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{Be as default};
