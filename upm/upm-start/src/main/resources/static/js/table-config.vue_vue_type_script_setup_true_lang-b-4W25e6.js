var F=Object.defineProperty,B=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var _=(a,t,e)=>t in a?F(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,g=(a,t)=>{for(var e in t||(t={}))R.call(t,e)&&_(a,e,t[e]);if(y)for(var e of y(t))j.call(t,e)&&_(a,e,t[e]);return a},k=(a,t)=>B(a,E(t));var m=(a,t,e)=>new Promise((i,s)=>{var c=o=>{try{l(e.next(o))}catch(u){s(u)}},f=o=>{try{l(e.throw(o))}catch(u){s(u)}},l=o=>o.done?i(o.value):Promise.resolve(o.value).then(c,f);l((e=e.apply(a,t)).next())});import{dJ as z,dw as b,dK as G}from"./bootstrap-DjYyHEgg.js";import{j as I,k as P}from"./pageTableConfig-CJVVeSTk.js";import{u as V}from"./useShopCheck-DKIjDUfz.js";import q from"./edit-table-form-BbTx6QWK.js";import{_ as A}from"./form.vue_vue_type_script_setup_true_lang-PIhT-69J.js";import{g as T}from"./index-BiD7armX.js";import{_ as v}from"./table-action.vue_vue_type_style_index_0_lang-BluPqhNI.js";import{m as J,b9 as w,ad as K,b2 as O,j as d,bJ as C,u as r,I as U}from"../jse/index-index-rmdNY63r.js";const Z=J({__name:"table-config",props:{businessCategory:{}},setup(a){const t=a,{checkShopSelected:e}=V(),i=w(),s=w(),c=k(g({},T),{toolbarConfig:g({},T.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:()=>m(null,null,function*(){return e()?{records:yield I()}:{result:{records:[],total:0}}})}}}),f={},[l,o]=z({gridEvents:f,gridOptions:c}),u=()=>{e()&&(i.value.setData({isUpdate:!1,gridApi:o,businessCategory:t.businessCategory}),i.value.open())},x=n=>{e()&&(s.value.setData({record:n,gridApi:o,businessCategory:n.businessCategory}),s.value.open())},S=n=>{e()&&(i.value.setData({isUpdate:!0,record:n,gridApi:o,businessCategory:n.businessCategory}),i.value.open())},D=n=>m(null,null,function*(){e()&&(yield P(n.id),G.success("删除成功"),o.query())});return(n,h)=>(O(),K(U,null,[d(r(l),null,{"toolbar-actions":C(()=>[d(r(v),{actions:[{label:"新增Tab",type:"primary",icon:"ant-design:plus-outlined",auth:["template:pageTableConfig:add"],onClick:u.bind(null)}]},null,8,["actions"])]),"toolbar-tools":C(()=>[...h[0]||(h[0]=[])]),action:C(({row:p})=>[d(r(v),{actions:[{label:"编辑",icon:"ant-design:edit-outlined",type:"link",size:"small",auth:["template:pageTableConfig:edit"],onClick:S.bind(null,p)},{label:"编辑行列",icon:"ant-design:edit-outlined",ifShow:()=>![r(b).BiReport,r(b).DataChart,r(b).KpiBigScreen].includes(p.pageCode),type:"link",size:"small",auth:["template:pageTableConfig:edit"],onClick:x.bind(null,p)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",auth:["template:pageTableConfig:delete"],popConfirm:{title:"确定删除吗？",confirm:D.bind(null,p)}}]},null,8,["actions","drop-down-actions"])]),_:1}),d(q,{ref_key:"editTableFormRef",ref:s},null,512),d(A,{ref_key:"pageFormRef",ref:i},null,512)],64))}});export{Z as _};
