import{_ as C,C as L,a8 as F,o as G}from"./bootstrap-B0IOIL79.js";import{b9 as M,bl as z,bF as B}from"../jse/index-index-StHjciy-.js";function Q(e,t){if(!e)return[];const o=e.slice(),n=o.indexOf(t);return n>=0&&o.splice(n,1),o}function Z(e,t){const o=(e||[]).slice();return o.indexOf(t)===-1&&o.push(t),o}function T(e){return e.split("-")}function _(e,t){return`${e}-${t}`}function R(e){return e&&e.type&&e.type.isTreeNode}function ee(e,t){const o=[],n=t[e];function r(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(u=>{let{key:d,children:f}=u;o.push(d),r(f)})}return r(n.children),o}function $(e){if(e.parent){const t=T(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function U(e){const t=T(e.pos);return Number(t[t.length-1])===0}function te(e,t,o,n,r,s,u,d,f,l){var a;const{clientX:i,clientY:c}=e,{top:p,height:h}=e.target.getBoundingClientRect(),g=((l==="rtl"?-1:1)*(((r==null?void 0:r.x)||0)-i)-12)/n;let y=d[o.eventKey];if(c<p+h/2){const w=u.findIndex(I=>I.key===y.key),E=w<=0?0:w-1,D=u[E].key;y=d[D]}const m=y.key,b=y,k=y.key;let K=0,N=0;if(!f.has(m))for(let w=0;w<g&&$(y);w+=1)y=y.parent,N+=1;const P=t.eventData,O=y.node;let S=!0;return U(y)&&y.level===0&&c<p+h/2&&s({dragNode:P,dropNode:O,dropPosition:-1})&&y.key===o.eventKey?K=-1:(b.children||[]).length&&f.has(k)?s({dragNode:P,dropNode:O,dropPosition:0})?K=0:S=!1:N===0?g>-1.5?s({dragNode:P,dropNode:O,dropPosition:1})?K=1:S=!1:s({dragNode:P,dropNode:O,dropPosition:0})?K=0:s({dragNode:P,dropNode:O,dropPosition:1})?K=1:S=!1:s({dragNode:P,dropNode:O,dropPosition:1})?K=1:S=!1,{dropPosition:K,dropLevelOffset:N,dropTargetKey:y.key,dropTargetPos:y.pos,dragOverNodeKey:k,dropContainerKey:K===0?null:((a=y.parent)===null||a===void 0?void 0:a.key)||null,dropAllowed:S}}function ne(e,t){if(!e)return;const{multiple:o}=t;return o?e.slice():e.length?[e[0]]:e}function re(e){if(!e)return null;let t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else if(typeof e=="object")t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return null;return t}function oe(e,t){const o=new Set;function n(r){if(o.has(r))return;const s=t[r];if(!s)return;o.add(r);const{parent:u,node:d}=s;d.disabled||u&&n(u.key)}return(e||[]).forEach(r=>{n(r)}),[...o]}var V=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]]);return o};function x(e,t){return e!=null?e:t}function j(e){const{title:t,_title:o,key:n,children:r}=e||{},s=t||"title";return{title:s,_title:o||[s],key:n||"key",children:r||"children"}}function se(e){function t(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(o).map(r=>{var s,u,d,f;if(!R(r))return null;const l=r.children||{},a=r.key,i={};for(const[w,E]of Object.entries(r.props))i[F(w)]=E;const{isLeaf:c,checkable:p,selectable:h,disabled:v,disableCheckbox:g}=i,y={isLeaf:c||c===""||void 0,checkable:p||p===""||void 0,selectable:h||h===""||void 0,disabled:v||v===""||void 0,disableCheckbox:g||g===""||void 0},m=C(C({},i),y),{title:b=(s=l.title)===null||s===void 0?void 0:s.call(l,m),icon:k=(u=l.icon)===null||u===void 0?void 0:u.call(l,m),switcherIcon:K=(d=l.switcherIcon)===null||d===void 0?void 0:d.call(l,m)}=i,N=V(i,["title","icon","switcherIcon"]),P=(f=l.default)===null||f===void 0?void 0:f.call(l),O=C(C(C({},N),{title:b,icon:k,switcherIcon:K,key:a,isLeaf:c}),y),S=t(P);return S.length&&(O.children=S),O})}return t(e)}function ie(e,t,o){const{_title:n,key:r,children:s}=j(o),u=new Set(t===!0?[]:t),d=[];function f(l){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return l.map((i,c)=>{const p=_(a?a.pos:"0",c),h=x(i[r],p);let v;for(let y=0;y<n.length;y+=1){const m=n[y];if(i[m]!==void 0){v=i[m];break}}const g=C(C({},G(i,[...n,r,s])),{title:v,key:h,parent:a,pos:p,children:null,data:i,isStart:[...a?a.isStart:[],c===0],isEnd:[...a?a.isEnd:[],c===l.length-1]});return d.push(g),t===!0||u.has(h)?g.children=f(i[s]||[],g):g.children=[],g})}return f(e),d}function W(e,t,o){let n={};typeof o=="object"?n=o:n={externalGetKey:o},n=n||{};const{childrenPropName:r,externalGetKey:s,fieldNames:u}=n,{key:d,children:f}=j(u),l=r||f;let a;s?typeof s=="string"?a=c=>c[s]:typeof s=="function"&&(a=c=>s(c)):a=(c,p)=>x(c[d],p);function i(c,p,h,v){const g=c?c[l]:e,y=c?_(h.pos,p):"0",m=c?[...v,c]:[];if(c){const b=a(c,y),k={node:c,index:p,pos:y,key:b,parentPos:h.node?h.pos:null,level:h.level+1,nodes:m};t(k)}g&&g.forEach((b,k)=>{i(b,k,{node:c,pos:y,level:h?h.level+1:-1},m)})}i(null)}function le(e){let{initWrapper:t,processEntity:o,onProcessFinished:n,externalGetKey:r,childrenPropName:s,fieldNames:u}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;const f=r||d,l={},a={};let i={posEntities:l,keyEntities:a};return t&&(i=t(i)||i),W(e,c=>{const{node:p,index:h,pos:v,key:g,parentPos:y,level:m,nodes:b}=c,k={node:p,nodes:b,index:h,key:g,pos:v,level:m},K=x(g,v);l[v]=k,a[K]=k,k.parent=l[y],k.parent&&(k.parent.children=k.parent.children||[],k.parent.children.push(k)),o&&o(k,i)},{externalGetKey:f,childrenPropName:s,fieldNames:u}),n&&n(i),i}function ae(e,t){let{expandedKeysSet:o,selectedKeysSet:n,loadedKeysSet:r,loadingKeysSet:s,checkedKeysSet:u,halfCheckedKeysSet:d,dragOverNodeKey:f,dropPosition:l,keyEntities:a}=t;const i=a[e];return{eventKey:e,expanded:o.has(e),selected:n.has(e),loaded:r.has(e),loading:s.has(e),checked:u.has(e),halfChecked:d.has(e),pos:String(i?i.pos:""),parent:i.parent,dragOver:f===e&&l===0,dragOverGapTop:f===e&&l===-1,dragOverGapBottom:f===e&&l===1}}function ce(e){const{data:t,expanded:o,selected:n,checked:r,loaded:s,loading:u,halfChecked:d,dragOver:f,dragOverGapTop:l,dragOverGapBottom:a,pos:i,active:c,eventKey:p}=e,h=C(C({dataRef:t},t),{expanded:o,selected:n,checked:r,loaded:s,loading:u,halfChecked:d,dragOver:f,dragOverGapTop:l,dragOverGapBottom:a,pos:i,active:c,eventKey:p,key:p});return"props"in h||Object.defineProperty(h,"props",{get(){return e}}),h}function A(e,t){const o=new Set;return e.forEach(n=>{t.has(n)||o.add(n)}),o}function X(e){const{disabled:t,disableCheckbox:o,checkable:n}=e||{};return!!(t||o)||n===!1}function Y(e,t,o,n){const r=new Set(e),s=new Set;for(let d=0;d<=o;d+=1)(t.get(d)||new Set).forEach(l=>{const{key:a,node:i,children:c=[]}=l;r.has(a)&&!n(i)&&c.filter(p=>!n(p.node)).forEach(p=>{r.add(p.key)})});const u=new Set;for(let d=o;d>=0;d-=1)(t.get(d)||new Set).forEach(l=>{const{parent:a,node:i}=l;if(n(i)||!l.parent||u.has(l.parent.key))return;if(n(l.parent.node)){u.add(a.key);return}let c=!0,p=!1;(a.children||[]).filter(h=>!n(h.node)).forEach(h=>{let{key:v}=h;const g=r.has(v);c&&!g&&(c=!1),!p&&(g||s.has(v))&&(p=!0)}),c&&r.add(a.key),p&&s.add(a.key),u.add(a.key)});return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(A(s,r))}}function q(e,t,o,n,r){const s=new Set(e);let u=new Set(t);for(let f=0;f<=n;f+=1)(o.get(f)||new Set).forEach(a=>{const{key:i,node:c,children:p=[]}=a;!s.has(i)&&!u.has(i)&&!r(c)&&p.filter(h=>!r(h.node)).forEach(h=>{s.delete(h.key)})});u=new Set;const d=new Set;for(let f=n;f>=0;f-=1)(o.get(f)||new Set).forEach(a=>{const{parent:i,node:c}=a;if(r(c)||!a.parent||d.has(a.parent.key))return;if(r(a.parent.node)){d.add(i.key);return}let p=!0,h=!1;(i.children||[]).filter(v=>!r(v.node)).forEach(v=>{let{key:g}=v;const y=s.has(g);p&&!y&&(p=!1),!h&&(y||u.has(g))&&(h=!0)}),p||s.delete(i.key),h&&u.add(i.key),d.add(i.key)});return{checkedKeys:Array.from(s),halfCheckedKeys:Array.from(A(u,s))}}function de(e,t,o,n,r,s){let u;u=X;const d=new Set(e.filter(l=>!!o[l]));let f;return t===!0?f=Y(d,r,n,u):f=q(d,t.halfCheckedKeys,r,n,u),f}function fe(e){const t=M(0),o=z();return B(()=>{const n=new Map;let r=0;const s=e.value||{};for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const d=s[u],{level:f}=d;let l=n.get(f);l||(l=new Set,n.set(f,l)),l.add(d),r=Math.max(r,f)}t.value=r,o.value=n}),{maxLevel:t,levelEntities:o}}export{de as a,ce as b,le as c,x as d,Q as e,j as f,ae as g,ee as h,te as i,Z as j,se as k,oe as l,ie as m,ne as n,re as o,T as p,fe as u};
