var $=Object.defineProperty,V=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var _=(r,e,t)=>e in r?$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,m=(r,e)=>{for(var t in e||(e={}))j.call(e,t)&&_(r,t,e[t]);if(x)for(var t of x(e))q.call(e,t)&&_(r,t,e[t]);return r},v=(r,e)=>V(r,Y(e));var S=(r,e,t)=>new Promise((b,d)=>{var h=s=>{try{n(t.next(s))}catch(p){d(p)}},C=s=>{try{n(t.throw(s))}catch(p){d(p)}},n=s=>s.done?b(s.value):Promise.resolve(s.value).then(h,C);n((t=t.apply(r,e)).next())});import{W as A}from"./index-C4NAiFfA.js";import{dI as H,dJ as U,dz as G,a7 as T}from"./bootstrap-DjYyHEgg.js";import{h as J}from"./fileTransfer-p8-3apt7.js";import{q as W}from"./table-FRaKquww.js";import{u as K,_ as Q}from"./useTableImport-CNd8lRg2.js";import{u as X}from"./useDownLoad-Cw45s4VH.js";import{u as Z}from"./useShopCheck-DKIjDUfz.js";import{ci as k,m as ee,b9 as te,aa as oe,be as re,ab as f,b2 as c,bJ as l,j as g,u as o,bL as D,ai as I,ad as se,I as ie,bb as ae,bp as le}from"../jse/index-index-rmdNY63r.js";import{p as L}from"./contast-C3bEivmW.js";import{u as ne}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as pe}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as me}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:ce}=ne(),de=[{label:"日数据",value:"day"},{label:"月数据",value:"month"}],z={toolbarConfig:{resizable:!0},columns:[{title:"序号",type:"seq",width:50,fixed:"left"},{field:"statDate",title:"统计时间",width:150},{field:"productId",title:"商品ID",width:200},{field:"productName",title:"商品名称",width:560},{field:"visitors",title:"商品访客数",width:200},{field:"paymentBuyers",title:"支付买家数",width:150},{field:"paymentItems",title:"支付件数",width:150},{field:"progressStatus",title:"进度状态",width:150,formatter({cellValue:r}){const e=L.find(t=>t.value===r);return e?e.label:r}},{field:"createTime",title:"创建时间",width:160}]},ue={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[ce.datetime("paymentTime","统计时间",[k().startOf("month"),k().endOf("month")]),{component:"Select",componentProps:{allowClear:!0,options:L,placeholder:"请选择",mode:"multiple",maxTagCount:1,maxTagTextLength:6},fieldName:"progressStatusList",label:"进度状态"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"productName",label:"商品名称"},{component:"Select",componentProps:{allowClear:!0,options:de,placeholder:"请选择"},fieldName:"dateType",label:"类型"}],fieldMappingTime:[["paymentTime",["startTime","endTime"],"YYYY-MM-DD HH:mm:ss"]],showCollapseButton:!0,submitOnChange:!1,submitOnEnter:!1},Ne=ee({__name:"index",setup(r){const{checkShopSelected:e}=Z(),{bizImportType:t,bizImportTypeList:b,uploadFormRef:d,extension:h,isError:C,handleImport:n,ImportSettingButton:s}=K({importTypeList:[{id:1,label:"导入数据",bizCode:"BUSINESS_PRODUCT_METRICS",isError:!1,auth:"basic:productMetricsDetail:import"}],defaultExtension:".xls,.xlsx,.csv"}),p=te(H.productMetricsCsv),B=m({},ue),E=v(m({},z),{toolbarConfig:m({},z.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(a,fe)=>S(null,[a,fe],function*({page:{currentPage:w,pageSize:i}},u){return e()?yield W(m({current:w,size:i},u)):{result:{records:[],total:0}}})}}}),M={},[P,y]=U({gridEvents:M,formOptions:B,gridOptions:E}),{handleDownload:N,downLoading:O}=X(),{hasAccessByCodes:R}=G(),F=oe(()=>R(["basic:productMetricsDetail:list"]));return(w,i)=>{const u=re("access");return F.value?(c(),f(o(pe),{key:0,"auto-content-height":""},{default:l(()=>[g(o(P),null,{"toolbar-actions":l(()=>[(c(!0),se(ie,null,ae(o(b),a=>D((c(),f(o(T),{key:a.id,type:"primary",style:{"margin-right":"12px"},onClick:fe=>o(n)(a.bizCode,a.isError,o(y))},{default:l(()=>[I(le(a.label),1)]),_:2},1032,["onClick"])),[[u,[a.auth],"codes"]])),128))]),"toolbar-tools":l(()=>[D((c(),f(o(T),{loading:o(O),class:"mr-2",type:"primary",onClick:i[0]||(i[0]=a=>o(N)(o(y),p.value))},{icon:l(()=>[g(o(A),{class:"mr-1 inline-block size-6"})]),default:l(()=>[i[1]||(i[1]=I(" 导出数据 ",-1))]),_:1},8,["loading"])),[[u,["basic:productMetricsDetail:export"],"codes"]]),g(o(s))]),_:1}),g(o(Q),{ref_key:"uploadFormRef",ref:d,"biz-import-type":o(t),extension:o(h),"is-error":o(C),"upload-fn":o(J)},null,8,["biz-import-type","extension","is-error","upload-fn"])]),_:1})):(c(),f(o(me),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{Ne as default};
