var Le=Object.defineProperty,Ne=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var Y=(o,t,a)=>t in o?Le(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a,m=(o,t)=>{for(var a in t||(t={}))re.call(t,a)&&Y(o,a,t[a]);if(W)for(var a of W(t))ie.call(t,a)&&Y(o,a,t[a]);return o},I=(o,t)=>Ne(o,qe(t));var E=(o,t)=>{var a={};for(var s in o)re.call(o,s)&&t.indexOf(s)<0&&(a[s]=o[s]);if(o!=null&&W)for(var s of W(o))t.indexOf(s)<0&&ie.call(o,s)&&(a[s]=o[s]);return a};var V=(o,t,a)=>Y(o,typeof t!="symbol"?t+"":t,a);var J=(o,t,a)=>new Promise((s,r)=>{var l=v=>{try{p(a.next(v))}catch(u){r(u)}},_=v=>{try{p(a.throw(v))}catch(u){r(u)}},p=v=>v.done?s(v.value):Promise.resolve(v.value).then(l,_);p((a=a.apply(o,t)).next())});import{m as w,aa as B,ab as d,b2 as i,bJ as c,bc as h,aQ as L,u as e,aS as te,aw as ae,cf as x,ad as U,ac as g,bp as P,aR as T,aE as ve,b9 as M,a2 as je,j as S,aT as Ke,by as We,aX as Je,w as Ue,ae as G,ai as F,bf as de,b4 as be,co as He,b7 as Xe,L as ce,n as _e}from"../jse/index-index-rmdNY63r.js";import{bJ as Qe,cd as Ye,bM as ge,dg as Ge,dh as Ze,cq as et,aK as tt,di as at,dj as ot,dk as st,cB as nt,dl as lt,cP as rt,dm as it,cJ as dt,bw as ue,cm as pe,dn as ct,dp as fe,dq as ut,bA as me,dr as pt,ci as ft,ds as mt}from"./bootstrap-DjYyHEgg.js";var ht=w({__name:"BaseSeparator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o,a=["horizontal","vertical"];function s(p){return a.includes(p)}const r=B(()=>s(t.orientation)?t.orientation:"horizontal"),l=B(()=>r.value==="vertical"?t.orientation:void 0),_=B(()=>t.decorative?{role:"none"}:{"aria-orientation":l.value,role:"separator"});return(p,v)=>(i(),d(e(Qe),L({as:p.as,"as-child":p.asChild,"data-orientation":r.value},_.value),{default:c(()=>[h(p.$slots,"default")]),_:3},16,["as","as-child","data-orientation"]))}}),yt=ht,vt=w({__name:"Separator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o;return(a,s)=>(i(),d(yt,te(ae(t)),{default:c(()=>[h(a.$slots,"default")]),_:3},16))}}),bt=vt;const _t=w({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{},label:{}},setup(o){const t=o,a=B(()=>{const l=t,{class:s}=l;return E(l,["class"])});return(s,r)=>(i(),d(e(bt),L(a.value,{class:e(x)("relative shrink-0 bg-border",t.orientation==="vertical"?"h-full w-px":"h-px w-full",t.class)}),{default:c(()=>[t.label?(i(),U("span",{key:0,class:T(e(x)("absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center justify-center bg-background text-xs text-muted-foreground",t.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] px-2 py-1"))},P(t.label),3)):g("",!0)]),_:1},16,["class"]))}}),gt=Ye("bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),wt=w({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:t}){const r=ge(o,t);return(l,_)=>(i(),d(e(Ge),te(ae(e(r))),{default:c(()=>[h(l.$slots,"default")]),_:3},16))}}),he=w({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(o){const t=o;return(a,s)=>(i(),d(e(Ze),te(ae(t)),{default:c(()=>[h(a.$slots,"default")]),_:3},16))}}),Ct=["data-dismissable-drawer"],xt=w({__name:"SheetOverlay",setup(o){et();const t=ve("DISMISSABLE_DRAWER_ID");return(a,s)=>(i(),U("div",{"data-dismissable-drawer":e(t),class:"z-popup inset-0 bg-overlay"},null,8,Ct))}}),Bt=w({inheritAttrs:!1,__name:"SheetContent",props:{appendTo:{default:"body"},class:{},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},side:{},zIndex:{},forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(o,{emit:t}){const a=o,s=t,r=B(()=>{const $=a,{class:b,modal:f,open:y,side:O}=$;return E($,["class","modal","open","side"])});function l(){return a.appendTo==="body"||a.appendTo===document.body||!a.appendTo}const _=B(()=>l()?"fixed":"absolute"),p=ge(r,s),v=M(null);function u(b){var f;b.target===((f=v.value)==null?void 0:f.$el)&&(a.open?s("opened"):s("closed"))}return(b,f)=>(i(),d(je,{defer:"",to:o.appendTo},[S(tt,{name:"fade"},{default:c(()=>[o.open&&o.modal?(i(),d(xt,{key:0,style:Ke(I(m({},o.zIndex?{zIndex:o.zIndex}:{}),{position:_.value,backdropFilter:o.overlayBlur&&o.overlayBlur>0?`blur(${o.overlayBlur}px)`:"none"}))},null,8,["style"])):g("",!0)]),_:1}),S(e(at),L({ref_key:"contentRef",ref:v,class:e(x)("z-popup",e(gt)({side:o.side}),a.class),style:I(m({},o.zIndex?{zIndex:o.zIndex}:{}),{position:_.value}),onAnimationend:u},m(m({},e(p)),b.$attrs)),{default:c(()=>[h(b.$slots,"default")]),_:3},16,["class","style"])],8,["to"]))}}),Z=w({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,a=B(()=>{const l=t,{class:s}=l;return E(l,["class"])});return(s,r)=>(i(),d(e(ot),L({class:e(x)("text-sm text-muted-foreground",t.class)},a.value),{default:c(()=>[h(s.$slots,"default")]),_:3},16,["class"]))}}),Ot=w({__name:"SheetFooter",props:{class:{}},setup(o){const t=o;return(a,s)=>(i(),U("div",{class:T(e(x)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[h(a.$slots,"default")],2))}}),Dt=w({__name:"SheetHeader",props:{class:{}},setup(o){const t=o;return(a,s)=>(i(),U("div",{class:T(e(x)("flex flex-col text-center sm:text-left",t.class))},[h(a.$slots,"default")],2))}}),ee=w({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,a=B(()=>{const l=t,{class:s}=l;return E(l,["class"])});return(s,r)=>(i(),d(e(st),L({class:e(x)("font-medium text-foreground",t.class)},a.value),{default:c(()=>[h(s.$slots,"default")]),_:3},16,["class"]))}}),St={class:"flex items-center"},kt={class:"flex-center"},At=w({__name:"drawer",props:{drawerApi:{default:void 0},appendToMain:{type:Boolean,default:!1},cancelText:{},class:{},closable:{type:Boolean},closeIconPlacement:{default:"right"},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},footer:{type:Boolean},footerClass:{},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},placement:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean,default:!1},title:{},titleTooltip:{},zIndex:{default:1e3}},setup(o){var j,le;const t=o,a=nt.getComponents(),s=We();be("DISMISSABLE_DRAWER_ID",s);const r=M(),{$t:l}=lt(),{isMobile:_}=rt(),p=(le=(j=t.drawerApi)==null?void 0:j.useStore)==null?void 0:le.call(j),{appendToMain:v,cancelText:u,class:b,closable:f,closeIconPlacement:y,closeOnClickModal:O,closeOnPressEscape:k,confirmLoading:$,confirmText:H,contentClass:we,description:N,destroyOnClose:Ce,footer:xe,footerClass:Be,header:Oe,headerClass:De,loading:oe,modal:Se,openAutoFocus:ke,overlayBlur:Ae,placement:z,showCancelButton:$e,showConfirmButton:Te,submitting:D,title:q,titleTooltip:se,zIndex:Ie}=it(t,p);Je(()=>{var n;v.value||(n=t.drawerApi)==null||n.close()});function Ee(n){(!O.value||D.value)&&n.preventDefault()}function Pe(n){(!k.value||D.value)&&n.preventDefault()}function ze(n){const C=n.target,K=C==null?void 0:C.dataset.dismissableDrawer;(D.value||!O.value||K!==s)&&n.preventDefault()}function Re(n){ke.value||n==null||n.preventDefault()}function ne(n){n.preventDefault(),n.stopPropagation()}const Ve=B(()=>v.value?`#${dt}>div:not(.absolute)>div`:void 0),X=M(!1),Q=M(!0);Ue(()=>{var n;return(n=p==null?void 0:p.value)==null?void 0:n.isOpen},n=>{Q.value=!1,n&&!e(X)&&(X.value=!0)});function Fe(){var n;Q.value=!0,(n=t.drawerApi)==null||n.onClosed()}const Me=B(()=>!e(Ce)&&e(X));return(n,C)=>{var K;return i(),d(e(wt),{modal:!1,open:(K=e(p))==null?void 0:K.isOpen,"onUpdate:open":C[3]||(C[3]=()=>{var R;return(R=o.drawerApi)==null?void 0:R.close()})},{default:c(()=>{var R;return[S(e(Bt),{"append-to":Ve.value,class:T(e(x)("flex w-[520px] flex-col",e(b),{"!w-full":e(_)||e(z)==="bottom"||e(z)==="top","max-h-[100vh]":e(z)==="bottom"||e(z)==="top",hidden:Q.value})),modal:e(Se),open:(R=e(p))==null?void 0:R.isOpen,side:e(z),"z-index":e(Ie),"force-mount":Me.value,"overlay-blur":e(Ae),onCloseAutoFocus:ne,onClosed:Fe,onEscapeKeyDown:Pe,onFocusOutside:ne,onInteractOutside:Ee,onOpenAutoFocus:Re,onOpened:C[2]||(C[2]=()=>{var A;return(A=o.drawerApi)==null?void 0:A.onOpened()}),onPointerDownOutside:ze},{default:c(()=>[e(Oe)?(i(),d(e(Dt),{key:0,class:T(e(x)("!flex flex-row items-center justify-between border-b px-6 py-5",e(De),{"px-4 py-3":e(f),"pl-2":e(f)&&e(y)==="left"}))},{default:c(()=>[G("div",St,[e(f)&&e(y)==="left"?(i(),d(e(he),{key:0,"as-child":"",disabled:e(D),class:"ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-secondary"},{default:c(()=>[h(n.$slots,"close-icon",{},()=>[S(e(ue),null,{default:c(()=>[S(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):g("",!0),e(f)&&e(y)==="left"?(i(),d(e(_t),{key:1,class:"ml-1 mr-2 h-8",decorative:"",orientation:"vertical"})):g("",!0),e(q)?(i(),d(e(ee),{key:2,class:"text-left"},{default:c(()=>[h(n.$slots,"title",{},()=>[F(P(e(q))+" ",1),e(se)?(i(),d(e(ct),{key:0,"trigger-class":"pb-1"},{default:c(()=>[F(P(e(se)),1)]),_:1})):g("",!0)])]),_:3})):g("",!0),e(N)?(i(),d(e(Z),{key:3,class:"mt-1 text-xs"},{default:c(()=>[h(n.$slots,"description",{},()=>[F(P(e(N)),1)])]),_:3})):g("",!0)]),!e(q)||!e(N)?(i(),d(e(fe),{key:0},{default:c(()=>[e(q)?g("",!0):(i(),d(e(ee),{key:0})),e(N)?g("",!0):(i(),d(e(Z),{key:1}))]),_:1})):g("",!0),G("div",kt,[h(n.$slots,"extra"),e(f)&&e(y)==="right"?(i(),d(e(he),{key:0,"as-child":"",disabled:e(D),class:"ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-secondary"},{default:c(()=>[h(n.$slots,"close-icon",{},()=>[S(e(ue),null,{default:c(()=>[S(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):g("",!0)])]),_:3},8,["class"])):(i(),d(e(fe),{key:1},{default:c(()=>[S(e(ee)),S(e(Z))]),_:1})),G("div",{ref_key:"wrapperRef",ref:r,class:T(e(x)("relative flex-1 overflow-y-auto p-3",e(we),{"pointer-events-none":e(oe)||e(D)}))},[h(n.$slots,"default")],2),e(oe)||e(D)?(i(),d(e(ut),{key:2,spinning:""})):g("",!0),e(xe)?(i(),d(e(Ot),{key:3,class:T(e(x)("w-full flex-row items-center justify-end border-t p-2 px-3",e(Be)))},{default:c(()=>[h(n.$slots,"prepend-footer"),h(n.$slots,"footer",{},()=>[e($e)?(i(),d(de(e(a).DefaultButton||e(me)),{key:0,variant:"ghost",disabled:e(D),onClick:C[0]||(C[0]=()=>{var A;return(A=o.drawerApi)==null?void 0:A.onCancel()})},{default:c(()=>[h(n.$slots,"cancelText",{},()=>[F(P(e(u)||e(l)("cancel")),1)])]),_:3},8,["disabled"])):g("",!0),h(n.$slots,"center-footer"),e(Te)?(i(),d(de(e(a).PrimaryButton||e(me)),{key:1,loading:e($)||e(D),onClick:C[1]||(C[1]=()=>{var A;return(A=o.drawerApi)==null?void 0:A.onConfirm()})},{default:c(()=>[h(n.$slots,"confirmText",{},()=>[F(P(e(H)||e(l)("confirm")),1)])]),_:3},8,["loading"])):g("",!0)]),h(n.$slots,"append-footer")]),_:3},8,["class"])):g("",!0)]),_:3},8,["append-to","class","modal","open","side","z-index","force-mount","overlay-blur"])]}),_:3},8,["open"])}}});class $t{constructor(t={}){V(this,"sharedData",{payload:{}});V(this,"store");V(this,"api");V(this,"state");const f=t,{connectedComponent:a,onBeforeClose:s,onCancel:r,onClosed:l,onConfirm:_,onOpenChange:p,onOpened:v}=f,u=E(f,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),b={class:"",closable:!0,closeIconPlacement:"right",closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,header:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,placement:"right",showCancelButton:!0,showConfirmButton:!0,submitting:!1,title:""};this.store=new pt(m(m({},b),u),{onUpdate:()=>{var O,k,$;const y=this.store.state;(y==null?void 0:y.isOpen)===((O=this.state)==null?void 0:O.isOpen)?this.state=y:(this.state=y,($=(k=this.api).onOpenChange)==null||$.call(k,!!(y!=null&&y.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:s,onCancel:r,onClosed:l,onConfirm:_,onOpenChange:p,onOpened:v},He(this)}close(){return J(this,null,function*(){var a,s,r;((r=yield(s=(a=this.api).onBeforeClose)==null?void 0:s.call(a))!=null?r:!0)&&this.store.setState(l=>I(m({},l),{isOpen:!1,submitting:!1}))})}drawerLoading(t){this.setState({confirmLoading:t,loading:t})}getData(){var t,a;return(a=(t=this.sharedData)==null?void 0:t.payload)!=null?a:{}}lock(t=!0){return this.setState({submitting:t})}onCancel(){var t,a;this.api.onCancel?(a=(t=this.api).onCancel)==null||a.call(t):this.close()}onClosed(){var t,a;this.state.isOpen||(a=(t=this.api).onClosed)==null||a.call(t)}onConfirm(){var t,a;(a=(t=this.api).onConfirm)==null||a.call(t)}onOpened(){var t,a;this.state.isOpen&&((a=(t=this.api).onOpened)==null||a.call(t))}open(){this.store.setState(t=>I(m({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return ft(t)?this.store.setState(t):this.store.setState(a=>m(m({},a),t)),this}unlock(){return this.lock(!1)}}const ye=Symbol("VBEN_DRAWER_INJECT"),Tt={};function Rt(o={}){var v;const{connectedComponent:t}=o;if(t){const u=Xe({}),b=M(!0);return[w((y,{attrs:O,slots:k})=>(be(ye,{extendApi(H){Object.setPrototypeOf(u,H)},options:o,reCreateDrawer(){return J(this,null,function*(){b.value=!1,yield _e(),b.value=!0})}}),It(u,m(m(m({},y),O),k)),()=>ce(b.value?t:"div",m(m({},y),O),k)),{name:"VbenParentDrawer",inheritAttrs:!1}),u]}const a=ve(ye,{}),s=m(m(m({},Tt),a.options),o);s.onOpenChange=u=>{var b,f,y;(b=o.onOpenChange)==null||b.call(o,u),(y=(f=a.options)==null?void 0:f.onOpenChange)==null||y.call(f,u)};const r=s.onClosed;s.onClosed=()=>{var u;r==null||r(),s.destroyOnClose&&((u=a.reCreateDrawer)==null||u.call(a))};const l=new $t(s),_=l;_.useStore=u=>mt(l.store,u);const p=w((u,{attrs:b,slots:f})=>()=>ce(At,I(m(m({},u),b),{drawerApi:_}),f),{name:"VbenDrawer",inheritAttrs:!1});return(v=a.extendApi)==null||v.call(a,_),[p,_]}function It(o,t){return J(this,null,function*(){var r;if(!t||Object.keys(t).length===0)return;yield _e();const a=(r=o==null?void 0:o.store)==null?void 0:r.state;if(!a)return;const s=new Set(Object.keys(a));for(const l of Object.keys(t))s.has(l)&&!["class"].includes(l)&&console.warn(`[Vben Drawer]: When 'connectedComponent' exists, do not set props or slots '${l}', which will increase complexity. If you need to modify the props of Drawer, please use useVbenDrawer or api.`)})}export{Rt as u};
