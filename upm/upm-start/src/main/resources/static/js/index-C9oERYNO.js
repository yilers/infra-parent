var p=(h,l,a)=>new Promise((s,r)=>{var c=e=>{try{o(a.next(e))}catch(i){r(i)}},m=e=>{try{o(a.throw(e))}catch(i){r(i)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(c,m);o((a=a.apply(h,l)).next())});import{ee as k,dz as v}from"./bootstrap-DjYyHEgg.js";import{a as x,h as D}from"./index-BMGH9Kr9.js";import{_ as w,c as V}from"./post-drawer.vue_vue_type_script_setup_true_lang-COWjabwL.js";import{_ as C}from"./table-action.vue_vue_type_style_index_0_lang-BluPqhNI.js";import{_ as A}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as $}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{m as B,aa as q,ab as f,b2 as _,bJ as y,j as b,u as t,ac as j}from"../jse/index-index-rmdNY63r.js";import{u as L}from"./use-drawer-CB92zaEG.js";import"./index-Bw6N7aDv.js";import"./shallowequal-W2RnI4nT.js";import"./index-CM6A-82x.js";import"./Dropdown-D1vLSWoc.js";import"./rotate-cw-Dzdn7gja.js";const Q=B({__name:"index",setup(h){const l={columns:V,height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:(d,...X)=>p(null,[d,...X],function*(n,u={}){return{records:yield D()}})}},rowConfig:{keyField:"id"},id:"system-device-index"},[a,s]=k({gridOptions:l}),[r,c]=L({connectedComponent:w,destroyOnClose:!0});function m(){c.setData({}).open()}function o(n){c.setData({id:n.id}).open()}function e(n){return p(this,null,function*(){yield x(n.id),yield s.query()})}const{hasAccessByCodes:i}=v(),g=q(()=>i(["system:device:list"]));return(n,u)=>g.value?(_(),f(t(A),{key:0,"auto-content-height":!0},{default:y(()=>[b(t(a),null,{"toolbar-actions":y(()=>[b(t(C),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["system:device:add"],onClick:()=>m()}]},null,8,["actions"])]),action:y(({row:d})=>[d.operable===1?(_(),f(t(C),{key:0,actions:[{label:"编辑",icon:"ant-design:edit-outlined",auth:["system:device:edit"],onClick:o.bind(null,d)},{label:"删除",icon:"ant-design:delete-outlined",auth:["system:device:delete"],popConfirm:{title:"确定删除吗？",confirm:e.bind(null,d)}}]},null,8,["actions"])):j("",!0)]),_:1}),b(t(r),{onReload:u[0]||(u[0]=d=>t(s).query())})]),_:1})):(_(),f(t($),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}});export{Q as default};
