var R=Object.defineProperty;var C=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var I=(o,a,e)=>a in o?R(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,y=(o,a)=>{for(var e in a||(a={}))W.call(a,e)&&I(o,e,a[e]);if(C)for(var e of C(a))O.call(a,e)&&I(o,e,a[e]);return o};var b=(o,a,e)=>new Promise((r,l)=>{var d=c=>{try{v(e.next(c))}catch(t){l(t)}},f=c=>{try{v(e.throw(c))}catch(t){l(t)}},v=c=>c.done?r(c.value):Promise.resolve(c.value).then(d,f);v((e=e.apply(o,a)).next())});import{bj as V,bk as Z,bl as U,bm as q,bn as j,bo as D,bp as F,bq as H,br as J}from"./bootstrap-DjYyHEgg.js";import{_ as Q}from"./login.vue_vue_type_script_setup_true_lang-HnSC_HKC.js";import{b9 as S,x as Y,b8 as G,n as K,bZ as X,m as P,aP as ee,bz as ae,w as T,aa as L,ad as te,b2 as z,j as m,bJ as g,u,bc as oe,bY as k,aV as ne,ab as se}from"../jse/index-index-rmdNY63r.js";import{_ as re,a as le,N as ie,b as ue,c as ce}from"./layout.vue_vue_type_script_setup_true_lang-DFNjNTpp.js";import"./auth-title-C7QwDUQ5.js";import"./index-D03MeGQz.js";import"./crypto-DK7XV_U1.js";import"./circle-check-big-KiVgv6lu.js";import"./theme-toggle.vue_vue_type_script_setup_true_lang-B9-IqMQE.js";import"./use-drawer-CB92zaEG.js";import"./TabsList.vue_vue_type_script_setup_true_lang-CG0-Bx4L.js";import"./rotate-cw-Dzdn7gja.js";import"./index-C4NAiFfA.js";const p=S(),A=S(!1),_=S({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function de(){function o(r){return b(this,null,function*(){var d;const{Watermark:l}=yield X(()=>b(null,null,function*(){const{Watermark:f}=yield import("./index.esm-j49SPltB.js");return{Watermark:f}}),[]);_.value=y(y({},_.value),r),p.value=new l(_.value),yield(d=p.value)==null?void 0:d.create()})}function a(r){return b(this,null,function*(){var l;p.value?(yield K(),yield(l=p.value)==null?void 0:l.changeOptions(y(y({},_.value),r))):yield o(r)})}function e(){p.value&&(p.value.destroy(),p.value=void 0)}return A.value||(A.value=!0,Y(()=>{e()})),{destroyWatermark:e,updateWatermark:a,watermark:G(p)}}const me=P({name:"LoginExpiredModal",__name:"login-expired-modal",props:ee({avatar:{default:""},zIndex:{default:0},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(o){const a=o,e=ae(o,"open"),[r,l]=V();T(()=>e.value,t=>{l.setState({isOpen:t})});const d=L(()=>a.zIndex||c()),f=["ant-message","loading"];function v(t){return f.some(w=>t.classList.contains(w))}function c(){let t=0;return[...document.querySelectorAll("*")].forEach(h=>{const x=window.getComputedStyle(h).getPropertyValue("z-index");x&&!Number.isNaN(Number.parseInt(x))&&!v(h)&&(t=Math.max(t,Number.parseInt(x)))}),t+1}return(t,w)=>(z(),te("div",null,[m(u(r),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,"z-index":d.value,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:g(()=>[m(u(re),{src:o.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),m(u(Z),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":t.$t("authentication.loginAgainSubTitle"),title:t.$t("authentication.loginAgainTitle")},{default:g(()=>[oe(t.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3},8,["z-index"])]))}}),Be=P({__name:"basic",setup(o){const{setMenuList:a}=U();a(["close","affix","maximize","reload","open-in-new-window","close-left","close-right","close-other","close-all"]);const e=S([]),r=q(),l=j(),d=D(),{destroyWatermark:f,updateWatermark:v}=de(),c=L(()=>e.value.some(s=>!s.isRead)),t=L(()=>[{handler:()=>{H.push("/profile")},icon:F,text:"个人中心"}]),w=L(()=>{var s,n;return(n=(s=r.userInfo)==null?void 0:s.photo)!=null?n:k.app.defaultAvatar});function h(){return b(this,null,function*(){yield l.doLogout(),yield l.logout(!1)})}function M(){e.value=[]}function x(s){const n=e.value.find(i=>i.id===s);n&&(n.isRead=!0)}function E(s){e.value=e.value.filter(n=>n.id!==s)}function $(){e.value.forEach(s=>s.isRead=!0)}function N(){}return T(()=>({enable:k.app.watermark,content:k.app.watermarkContent}),i=>b(null,[i],function*({enable:s,content:n}){var B;s?yield v({content:n||`${(B=r.userInfo)==null?void 0:B.account}`}):f()}),{immediate:!0}),ne(()=>{k.app.watermark&&f()}),(s,n)=>(z(),se(u(ce),{onClearPreferencesAndLogout:h,onClickLogo:N},{"header-right-1":g(()=>[m(u(J))]),"user-dropdown":g(()=>{var i;return[m(u(ue),{avatar:w.value,menus:t.value,text:(i=u(r).userInfo)==null?void 0:i.nickname,description:"","tag-text":"",onLogout:h},null,8,["avatar","menus","text"])]}),notification:g(()=>[m(u(ie),{dot:c.value,notifications:e.value,onClear:M,onRead:n[0]||(n[0]=i=>i.id&&x(i.id)),onRemove:n[1]||(n[1]=i=>i.id&&E(i.id)),onMakeAll:$},null,8,["dot","notifications"])]),extra:g(()=>[m(u(me),{open:u(d).loginExpired,"onUpdate:open":n[2]||(n[2]=i=>u(d).loginExpired=i),avatar:w.value},{default:g(()=>[m(Q)]),_:1},8,["open","avatar"])]),"lock-screen":g(()=>[m(u(le),{avatar:w.value,onToLogin:h},null,8,["avatar"])]),_:1}))}});export{Be as default};
