var M=Object.defineProperty,D=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var _=(n,t,e)=>t in n?M(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,f=(n,t)=>{for(var e in t||(t={}))S.call(t,e)&&_(n,e,t[e]);if(C)for(var e of C(t))R.call(t,e)&&_(n,e,t[e]);return n},k=(n,t)=>D(n,E(t));var m=(n,t,e)=>new Promise((r,p)=>{var d=a=>{try{o(e.next(a))}catch(l){p(l)}},u=a=>{try{o(e.throw(a))}catch(l){p(l)}},o=a=>a.done?r(a.value):Promise.resolve(a.value).then(d,u);o((e=e.apply(n,t)).next())});import{dJ as z,dK as T}from"./bootstrap-DjYyHEgg.js";import{g as V,i as j}from"./pageTableConfig-CJVVeSTk.js";import{u as q}from"./useShopCheck-DKIjDUfz.js";import A from"./edit-mapping-form-DwYNLzkO.js";import{_ as B}from"./mapping-form.vue_vue_type_script_setup_true_lang-DhXbZcXF.js";import{g as y}from"./mapping-BVKRu9Vr.js";import{_ as v}from"./table-action.vue_vue_type_style_index_0_lang-BluPqhNI.js";import{m as G,b9 as x,ad as J,b2 as O,j as s,bJ as g,u as b,I as U}from"../jse/index-index-rmdNY63r.js";const X=G({__name:"mapping-config",setup(n){const{checkShopSelected:t}=q(),e=x(),r=x(),p=k(f({},y),{toolbarConfig:f({},y.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:()=>m(null,null,function*(){return t()?{records:yield V({})}:{result:{records:[],total:0}}})}}}),d={},[u,o]=z({gridEvents:d,gridOptions:p}),a=()=>{t()&&(e.value.setData({isUpdate:!1,gridApi:o}),e.value.open())},l=i=>{t()&&(e.value.setData({isUpdate:!0,record:i,gridApi:o}),e.value.open())},w=i=>{t()&&(r.value.setData({record:i,gridApi:o}),r.value.open())},F=i=>m(null,null,function*(){t()&&(yield j(i.id),T.success("删除成功"),o.query())});return(i,h)=>(O(),J(U,null,[s(b(u),null,{"toolbar-actions":g(()=>[s(b(v),{actions:[{label:"新增映射",type:"primary",icon:"ant-design:plus-outlined",auth:["template:pageMapping:add"],onClick:a.bind(null)}]},null,8,["actions"])]),"toolbar-tools":g(()=>[...h[0]||(h[0]=[])]),action:g(({row:c})=>[s(b(v),{actions:[{label:"编辑",icon:"ant-design:edit-outlined",type:"link",size:"small",auth:["template:pageMapping:edit"],onClick:l.bind(null,c)},{label:"编辑列",icon:"ant-design:edit-outlined",type:"link",size:"small",auth:["template:pageMapping:edit"],onClick:w.bind(null,c)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",auth:["template:pageMapping:delete"],popConfirm:{title:"确定删除吗？",confirm:F.bind(null,c)}}]},null,8,["actions","drop-down-actions"])]),_:1}),s(A,{ref_key:"editTableFormRef",ref:r},null,512),s(B,{ref_key:"pageFormRef",ref:e},null,512)],64))}});export{X as _};
