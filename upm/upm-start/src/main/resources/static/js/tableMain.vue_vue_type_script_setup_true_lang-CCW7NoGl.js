var d=(e,s,n)=>new Promise((f,u)=>{var p=i=>{try{l(n.next(i))}catch(a){u(a)}},t=i=>{try{l(n.throw(i))}catch(a){u(a)}},l=i=>i.done?f(i.value):Promise.resolve(i.value).then(p,t);l((n=n.apply(e,s)).next())});import{dy as h,em as y,a8 as k,a7 as z}from"./bootstrap-DjYyHEgg.js";import{S}from"./index-C5pGryNd.js";import{a as T}from"./AlertBuilder-BtGpEXE7.js";import{Textarea as _}from"./index-EkdSFYQU.js";import{m as F,b9 as w,aa as L,be as N,ad as m,b2 as r,j as B,bJ as x,ab as g,ac as v,u as o,I as A,bb as D,ae as b,bL as I,aR as M,cf as V,bp as C,ai as P}from"../jse/index-index-rmdNY63r.js";function Y(e){return d(this,null,function*(){return h.post("/table/tableTimeStatus",e)})}function Z(e){return d(this,null,function*(){return h.post("/table/tableStatusDetail",e)})}function j(e){return d(this,null,function*(){return h.post("/table/updateStatus",e)})}const c={TableCheck:"icon-[tabler--check]",AlertCircleFilled:"icon-[tabler--alert-circle-filled]",CircleCheckFilled:"icon-[tabler--circle-check-filled]",CircleXFilled:"icon-[tabler--circle-x-filled]",AlertTriangleFilled:"icon-[tabler--alert-triangle-filled]"},ee=[{status:2,text:"周期内所有表状态全部完成",icon:c.TableCheck,class:"text-success size-4"},{status:0,text:"周期内部分表状态未完成或异常",icon:c.AlertCircleFilled,class:"text-destructive size-4"},{status:-1,text:"",icon:"",class:""}],E=[{status:2,text:"完成：数据已上传",icon:c.CircleCheckFilled,class:"text-success size-4"},{status:0,text:"未完成：数据未上传",icon:c.CircleXFilled,class:"text-destructive size-4"},{status:4,text:"不完整：数据上传不完整",icon:c.AlertCircleFilled,class:"text-purple-500 size-4"},{status:1,text:"异常：表中有异常数据未处理",icon:c.AlertTriangleFilled,class:"text-warning size-4"},{status:3,text:"人工标记完成：手动将表状态从未完成更改为完成",icon:c.CircleCheckFilled,class:"text-primary size-4"}],R={class:"w-full"},X={key:1,class:"grid grid-cols-3 gap-2"},q={class:"item-center flex justify-between"},J={class:"flex items-center"},O={class:"ml-2 text-[16px]"},te=F({__name:"tableMain",props:{tableList:{default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const s=w({}),n=t=>{s.value=t,T({component:_,componentProps:{placeholder:"",rows:10,maxLength:100,disabled:t.status===3},content:"",title:t.status===0?"表状态修改":"查看备注",overlayBlur:3,showConfirm:t.status===0,defaultValue:s.value.remark,modelPropName:"value"}).then(l=>{s.value.remark=l!=null?l:"",o(s).status===0&&f()}).catch(()=>{console.info("用户取消")})},f=()=>d(null,null,function*(){try{s.value.status===0&&(yield j({id:s.value.id,status:3,remark:s.value.remark}),s.value.status=3)}catch(t){console.info("导入错误:",t)}}),u=t=>E.find(l=>l.status===t.status),p=L(()=>t=>t===0?"修改":"查看备注");return(t,l)=>{const i=N("access");return r(),m("div",R,[B(o(S),{spinning:e.loading,class:"flex min-h-[200px] items-center justify-center"},{default:x(()=>[!e.loading&&e.tableList.length===0?(r(),g(o(y),{key:0,description:"暂无数据"})):v("",!0),!e.loading&&e.tableList.length>0?(r(),m("div",X,[(r(!0),m(A,null,D(e.tableList,a=>(r(),g(o(k),{key:a.id,class:"mb-[10px] p-[16px]"},{default:x(()=>[b("div",q,[b("div",J,[b("span",{class:M(o(V)(u(a).icon,u(a).class,"size-5"))},null,2),b("span",O,C(a.tableName),1)]),a.status===0||a.status===3?I((r(),g(o(z),{key:0,style:{"font-size":"12px !important"},size:"small",type:"primary",onClick:$=>n(a)},{default:x(()=>[P(C(p.value(a.status)),1)]),_:2},1032,["onClick"])),[[i,["visualization:tableStatusManage:edit","visualization:tableStatusManage:lookRemark"],"codes"]]):v("",!0)])]),_:2},1024))),128))])):v("",!0)]),_:1},8,["spinning"])])}}});export{te as _,E as a,Z as b,Y as g,ee as t};
