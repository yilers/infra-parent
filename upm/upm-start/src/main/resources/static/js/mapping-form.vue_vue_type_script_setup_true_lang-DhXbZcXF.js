var F=Object.defineProperty;var _=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var C=(o,s,e)=>s in o?F(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,A=(o,s)=>{for(var e in s||(s={}))S.call(s,e)&&C(o,e,s[e]);if(_)for(var e of _(s))j.call(s,e)&&C(o,e,s[e]);return o};var v=(o,s,e)=>new Promise((n,p)=>{var m=t=>{try{l(e.next(t))}catch(i){p(i)}},f=t=>{try{l(e.throw(t))}catch(i){p(i)}},l=t=>t.done?n(t.value):Promise.resolve(t.value).then(m,f);l((e=e.apply(o,s)).next())});import{dL as B,bj as P,dK as y}from"./bootstrap-DjYyHEgg.js";import{l as U,m as q}from"./pageTableConfig-CJVVeSTk.js";import{m as J}from"./contast-C3bEivmW.js";import{p as K}from"./mapping-BVKRu9Vr.js";import{m as L,b9 as d,ad as z,b2 as G,j as w,bJ as H,u as V}from"../jse/index-index-rmdNY63r.js";const Y=L({__name:"mapping-form",setup(o,{expose:s}){const e=d(""),n=d({}),p=d(!1),m=d(),[f,l]=B(A({showDefaultActions:!1},K)),[t,i]=P({onOpenChange(r){return v(this,null,function*(){var c,u;const a=i.getData();e.value=(c=a==null?void 0:a.businessCategory)!=null?c:"",p.value=(u=a==null?void 0:a.isUpdate)!=null?u:!1,n.value=r?(a==null?void 0:a.record)||{}:{},m.value=r?a==null?void 0:a.gridApi:null,l.setValues(n.value),l.updateSchema([{fieldName:"pageCode",disabled:!!n.value.id}])})},onConfirm(){return v(this,null,function*(){var r,a,c,u;try{const{valid:g}=yield l.validate();if(!g)return;i.lock(!0);const x=yield l.getValues(),{mappingName:M,pageCode:b,remark:E}=x,h={mappingName:M,pageCode:b,pageName:(r=J.find(N=>N.value===b))==null?void 0:r.label,remark:E};(a=n.value)!=null&&a.id&&(h.id=n.value.id),yield((c=n.value)!=null&&c.id?U:q)(h),y.success("保存成功"),(u=m.value)==null||u.query(),i.close()}catch(g){k(g)}finally{i.lock(!1)}})}});function k(r){y.error(r instanceof Error?r.message:"保存失败，请检查网络或联系管理员")}return s(i),(r,a)=>(G(),z("div",null,[w(V(t),{title:p.value?"编辑映射":"新增映射",class:"w-300px"},{default:H(()=>[w(V(f))]),_:1},8,["title"])]))}});export{Y as _};
