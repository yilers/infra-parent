var u=(h,m,o)=>new Promise((s,r)=>{var c=e=>{try{i(o.next(e))}catch(a){r(a)}},l=e=>{try{i(o.throw(e))}catch(a){r(a)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(c,l);i((o=o.apply(h,m)).next())});import{dU as k,dV as v}from"./bootstrap-B0IOIL79.js";import{h as x,a as D}from"./index-B8AwDIa3.js";import{_ as V,c as w}from"./post-drawer.vue_vue_type_script_setup_true_lang-BDdL_5IL.js";import{_ as C}from"./table-action.vue_vue_type_style_index_0_lang-D0vDTAOO.js";import{_ as A}from"./page.vue_vue_type_script_setup_true_lang-Bz79GSJl.js";import{_ as $}from"./fallback.vue_vue_type_script_setup_true_lang-CK1l9FEq.js";import{m as B,aa as q,ab as f,b2 as _,bJ as y,j as b,u as t,ac as j}from"../jse/index-index-StHjciy-.js";import{u as L}from"./use-drawer-zBZwZnKb.js";import"./index-CI0QbcYu.js";import"./shallowequal-OTweHxuM.js";import"./Overflow-2nn19wYT.js";import"./index-bM1Vk0h0.js";import"./collapseMotion-BMhP7PaA.js";import"./slide-2E_o1wq8.js";import"./index-Bml6TPTK.js";import"./Dropdown-C8KFxVx_.js";import"./move-tO33QGmZ.js";import"./rotate-cw-G598-s-f.js";import"./x-eg9hdiEc.js";const ee=B({__name:"index",setup(h){const m={columns:w,height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:(d,...ie)=>u(null,[d,...ie],function*(n,p={}){return{records:yield D()}})}},rowConfig:{keyField:"id"},id:"system-device-index"},[o,s]=k({gridOptions:m}),[r,c]=L({connectedComponent:V,destroyOnClose:!0});function l(){c.setData({}).open()}function i(n){c.setData({id:n.id}).open()}function e(n){return u(this,null,function*(){yield x(n.id),yield s.query()})}const{hasAccessByCodes:a}=v(),g=q(()=>a(["system:device:list"]));return(n,p)=>g.value?(_(),f(t(A),{key:0,"auto-content-height":!0},{default:y(()=>[b(t(o),null,{"toolbar-actions":y(()=>[b(t(C),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["system:device:add"],onClick:()=>l()}]},null,8,["actions"])]),action:y(({row:d})=>[d.operable===1?(_(),f(t(C),{key:0,actions:[{label:"编辑",icon:"ant-design:edit-outlined",auth:["system:device:edit"],onClick:i.bind(null,d)},{label:"删除",icon:"ant-design:delete-outlined",auth:["system:device:delete"],popConfirm:{title:"确定删除吗？",confirm:e.bind(null,d)}}]},null,8,["actions"])):j("",!0)]),_:1}),b(t(r),{onReload:p[0]||(p[0]=d=>t(s).query())})]),_:1})):(_(),f(t($),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}});export{ee as default};
