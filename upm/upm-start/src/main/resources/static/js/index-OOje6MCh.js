var V=Object.defineProperty,E=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var v=(a,t,e)=>t in a?V(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,m=(a,t)=>{for(var e in t||(t={}))O.call(t,e)&&v(a,e,t[e]);if(C)for(var e of C(t))P.call(t,e)&&v(a,e,t[e]);return a},_=(a,t)=>E(a,F(t));var h=(a,t,e)=>new Promise((p,r)=>{var g=n=>{try{c(e.next(n))}catch(s){r(s)}},k=n=>{try{c(e.throw(n))}catch(s){r(s)}},c=n=>n.done?p(n.value):Promise.resolve(n.value).then(g,k);c((e=e.apply(a,t)).next())});import{dJ as j,dz as G,dK as J}from"./bootstrap-DjYyHEgg.js";import{g as K,e as L}from"./index-CwQ9Bea5.js";import{u as N}from"./useShopCheck-DKIjDUfz.js";import{_ as Q}from"./dataManage.vue_vue_type_script_setup_true_lang-btI6gjry.js";import{_ as q}from"./form.vue_vue_type_script_setup_true_lang-VbibYD2g.js";import{_ as H}from"./progressQuery.vue_vue_type_script_setup_true_lang-BItmuurp.js";import{a as M,s as I}from"./index-C17F3t2v.js";import{_ as S}from"./table-action.vue_vue_type_style_index_0_lang-BluPqhNI.js";import{_ as T}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as W}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{m as X,b9 as b,aa as Y,ab as x,b2 as z,bJ as f,j as l,u as d,ae as Z,bp as D}from"../jse/index-index-rmdNY63r.js";import"./checkedKpiForm.vue_vue_type_script_setup_true_lang-CUczDAno.js";import"./index-EkdSFYQU.js";import"./index-DMLMl1eR.js";import"./isPlainObject-DfbxWMXa.js";import"./use-drawer-CB92zaEG.js";import"./dateTime-Ce6Ez397.js";import"./choose-custom-modal.vue_vue_type_script_setup_true_lang-CyxAfJ0r.js";import"./cardType-DPMG7IpI.js";import"./useSchemas-BvOAAoUm.js";import"./contast-C3bEivmW.js";import"./useDateRangePicker-DjB1zMnJ.js";import"./index-C4NAiFfA.js";import"./pageTableConfig-CJVVeSTk.js";import"./index-DQysn_XC.js";import"./index-wrrfkh6D.js";import"./index-Bw6N7aDv.js";import"./shallowequal-W2RnI4nT.js";import"./Dropdown-D1vLSWoc.js";import"./useRefs-ReJqRy3L.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./index-D_3miOiz.js";import"./index-CM6A-82x.js";import"./rotate-cw-Dzdn7gja.js";const Fe=X({__name:"index",setup(a){const{checkShopSelected:t}=N(),e=b(),p=b(),r=b(),g=_(m({},I),{collapsed:!0}),k=_(m({},M),{toolbarConfig:m({},M.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!1,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(je,Ge)=>h(null,[je,Ge],function*({page:{currentPage:i,pageSize:u}},o){return t()?yield K(m({current:i,size:u},o)):{result:{records:[],total:0}}})}}}),c={},[n,s]=j({gridEvents:c,formOptions:g,gridOptions:k}),R=()=>{t()&&(e.value.setData({isUpdate:!1,gridApi:s,type:"add"}),e.value.open())},y=(i,u)=>{t()&&(e.value.setData({record:i,isUpdate:!0,gridApi:s,type:u}),e.value.open())},$=i=>{t()&&(p.value.setData({record:i,isUpdate:!0,gridApi:s}),p.value.open())},w=i=>{t()&&(r.value.setData({record:i,isUpdate:!0,gridApi:s}),r.value.open())},A=i=>h(null,null,function*(){yield L(i.id),J.success("删除成功"),s.reload()}),{hasAccessByCodes:B}=G(),U=Y(()=>B(["kpi:kpiManage:list"]));return(i,u)=>U.value?(z(),x(d(T),{key:0,"auto-content-height":""},{default:f(()=>[l(d(n),null,{"toolbar-actions":f(()=>[l(d(S),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["kpi:kpiManage:add"],onClick:R.bind(null)}]},null,8,["actions"])]),dateStart:f(({row:o})=>[Z("div",null,D(o.dateStart)+" - "+D(o.dateEnd),1)]),action:f(({row:o})=>[l(d(S),{actions:[{label:"查看",icon:"ant-design:eye-outlined",type:"link",size:"small",auth:["kpi:kpiManage:view"],onClick:y.bind(null,o,"view")}],"drop-down-actions":[{label:"编辑",icon:"ant-design:edit-outlined",type:"link",size:"small",auth:["kpi:kpiManage:edit"],onClick:y.bind(null,o,"edit")},{label:"进度查询",icon:"ant-design:line-chart-outlined",type:"link",size:"small",auth:["kpi:kpiManage:progressQuery"],onClick:$.bind(null,o)},{label:"数据管理",icon:"material-symbols:database-search-outline",type:"link",size:"small",auth:["kpi:kpiManage:dataManage"],onClick:w.bind(null,o)},{label:"删除",icon:"ant-design:delete-outlined",type:"link",size:"small",auth:["kpi:kpiManage:delete"],popConfirm:{title:"确定删除合同吗？",confirm:A.bind(null,o)}}]},null,8,["actions","drop-down-actions"])]),_:1}),l(q,{ref_key:"kpiFormRef",ref:e},null,512),l(H,{ref_key:"progressRef",ref:p},null,512),l(Q,{ref_key:"dataManageRef",ref:r},null,512)]),_:1})):(z(),x(d(W),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}});export{Fe as default};
