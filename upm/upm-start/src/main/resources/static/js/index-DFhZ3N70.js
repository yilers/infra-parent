import{aC as X,ed as me,B as ie,j as he,a as ce,_ as x,o as pe,C as Z,b as H,h as de,e as B,P as ee,l as O,H as be,E as $,s as q,Z as xe,I as se}from"./bootstrap-B0IOIL79.js";import{u as Ke,T as ke,r as ge,t as Oe,F as Ee,V as Te}from"./index-BD1-7l4R.js";import{j as S,m as ue,b9 as w,aa as b,bF as Se,w as U,Q as Ne,n as Pe}from"../jse/index-index-StHjciy-.js";import{i as Ie}from"./isSymbol-DB5hLpLo.js";import{k as te,f as _e,c as we,l as Ce}from"./useMaxLevel-D3VWO-Yn.js";var De=/\s/;function $e(e){for(var n=e.length;n--&&De.test(e.charAt(n)););return n}var je=/^\s+/;function Ae(e){return e&&e.slice(0,$e(e)+1).replace(je,"")}var ne=NaN,Fe=/^[-+]0x[0-9a-f]+$/i,Le=/^0b[01]+$/i,He=/^0o[0-7]+$/i,Me=parseInt;function ae(e){if(typeof e=="number")return e;if(Ie(e))return ne;if(X(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=X(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Ae(e);var r=Le.test(e);return r||He.test(e)?Me(e.slice(2),r?2:8):Fe.test(e)?ne:+e}var W=function(){return me.Date.now()},Be="Expected a function",Ve=Math.max,Ue=Math.min;function We(e,n,r){var a,l,f,c,i,v,m=0,K=!1,s=!1,j=!0;if(typeof e!="function")throw new TypeError(Be);n=ae(n)||0,X(r)&&(K=!0,s="maxWait"in r,f=s?Ve(ae(r.maxWait)||0,n):f,j="trailing"in r?!!r.trailing:j);function P(u){var h=a,E=l;return a=l=void 0,m=u,c=e.apply(E,h),c}function I(u){return m=u,i=setTimeout(y,n),K?P(u):c}function N(u){var h=u-v,E=u-m,t=n-h;return s?Ue(t,f-E):t}function o(u){var h=u-v,E=u-m;return v===void 0||h>=n||h<0||s&&E>=f}function y(){var u=W();if(o(u))return C(u);i=setTimeout(y,N(u))}function C(u){return i=void 0,j&&a?P(u):(a=l=void 0,c)}function A(){i!==void 0&&clearTimeout(i),m=0,a=v=l=i=void 0}function F(){return i===void 0?c:C(W())}function _(){var u=W(),h=o(u);if(a=arguments,l=this,v=u,h){if(i===void 0)return I(v);if(s)return clearTimeout(i),i=setTimeout(y,n),P(v)}return i===void 0&&(i=setTimeout(y,n)),c}return _.cancel=A,_.flush=F,_}const le=4;function ze(e){const{dropPosition:n,dropLevelOffset:r,prefixCls:a,indent:l,direction:f="ltr"}=e,c=f==="ltr"?"left":"right",i=f==="ltr"?"right":"left",v={[c]:`${-r*l+le}px`,[i]:0};switch(n){case-1:v.top="-3px";break;case 1:v.bottom="-3px";break;default:v.bottom="-3px",v[c]=`${l+le}px`;break}return S("div",{style:v,class:`${a}-drop-indicator`},null)}const fe=()=>{const e=Oe();return x(x({},e),{showLine:q([Boolean,Object]),multiple:O(),autoExpandParent:O(),checkStrictly:O(),checkable:O(),disabled:O(),defaultExpandAll:O(),defaultExpandParent:O(),defaultExpandedKeys:$(),expandedKeys:$(),checkedKeys:q([Array,Object]),defaultCheckedKeys:$(),selectedKeys:$(),defaultSelectedKeys:$(),selectable:O(),loadedKeys:$(),draggable:O(),showIcon:O(),icon:B(),switcherIcon:ee.any,prefixCls:String,replaceFields:be(),blockNode:O(),openAnimation:ee.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":B(),"onUpdate:checkedKeys":B(),"onUpdate:expandedKeys":B()})},V=ue({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:ie(fe(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:Object,setup(e,n){let{attrs:r,expose:a,emit:l,slots:f}=n;he(!(e.treeData===void 0&&f.default));const{prefixCls:c,direction:i,virtual:v}=ce("tree",e),[m,K]=Ke(c),s=w();a({treeRef:s,onNodeExpand:function(){var o;(o=s.value)===null||o===void 0||o.onNodeExpand(...arguments)},scrollTo:o=>{var y;(y=s.value)===null||y===void 0||y.scrollTo(o)},selectedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.selectedKeys}),checkedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.checkedKeys}),halfCheckedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.halfCheckedKeys}),loadedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.loadedKeys}),loadingKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.loadingKeys}),expandedKeys:b(()=>{var o;return(o=s.value)===null||o===void 0?void 0:o.expandedKeys})}),Se(()=>{xe(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});const P=(o,y)=>{l("update:checkedKeys",o),l("check",o,y)},I=(o,y)=>{l("update:expandedKeys",o),l("expand",o,y)},N=(o,y)=>{l("update:selectedKeys",o),l("select",o,y)};return()=>{const{showIcon:o,showLine:y,switcherIcon:C=f.switcherIcon,icon:A=f.icon,blockNode:F,checkable:_,selectable:u,fieldNames:h=e.replaceFields,motion:E=e.openAnimation,itemHeight:t=28,onDoubleclick:d,onDblclick:p}=e,L=x(x(x({},r),pe(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{showLine:!!y,dropIndicatorRender:ze,fieldNames:h,icon:A,itemHeight:t}),k=f.default?Z(f.default()):void 0;return m(S(ke,H(H({},L),{},{virtual:v.value,motion:E,ref:s,prefixCls:c.value,class:de({[`${c.value}-icon-hide`]:!o,[`${c.value}-block-node`]:F,[`${c.value}-unselectable`]:!u,[`${c.value}-rtl`]:i.value==="rtl"},r.class,K.value),direction:i.value,checkable:_,selectable:u,switcherIcon:D=>ge(c.value,C,D,f.leafIcon,y),onCheck:P,onExpand:I,onSelect:N,onDblclick:p||d,children:k}),x(x({},f),{checkable:()=>S("span",{class:`${c.value}-checkbox-inner`},null)})))}}});var Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function re(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},a=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable}))),a.forEach(function(l){Qe(e,l,r[l])})}return e}function Qe(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var G=function(n,r){var a=re({},n,r.attrs);return S(se,re({},a,{icon:Re}),null)};G.displayName="FolderOpenOutlined";G.inheritAttrs=!1;var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function oe(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},a=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable}))),a.forEach(function(l){Ze(e,l,r[l])})}return e}function Ze(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var J=function(n,r){var a=oe({},n,r.attrs);return S(se,oe({},a,{icon:Xe}),null)};J.displayName="FolderOutlined";J.inheritAttrs=!1;var T;(function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"})(T||(T={}));function Y(e,n,r){function a(l){const f=l[n.key],c=l[n.children];r(f,l)!==!1&&Y(c||[],n,r)}e.forEach(a)}function qe(e){let{treeData:n,expandedKeys:r,startKey:a,endKey:l,fieldNames:f={title:"title",key:"key",children:"children"}}=e;const c=[];let i=T.None;if(a&&a===l)return[a];if(!a||!l)return[];function v(m){return m===a||m===l}return Y(n,f,m=>{if(i===T.End)return!1;if(v(m)){if(c.push(m),i===T.None)i=T.Start;else if(i===T.Start)return i=T.End,!1}else i===T.Start&&c.push(m);return r.includes(m)}),c}function z(e,n,r){const a=[...n],l=[];return Y(e,r,(f,c)=>{const i=a.indexOf(f);return i!==-1&&(l.push(c),a.splice(i,1)),!!a.length}),l}var Ge=function(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const Je=()=>x(x({},fe()),{expandAction:q([Boolean,String])});function Ye(e){const{isLeaf:n,expanded:r}=e;return n?S(Ee,null,null):r?S(G,null,null):S(J,null,null)}const R=ue({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:ie(Je(),{showIcon:!0,expandAction:"click"}),slots:Object,setup(e,n){let{attrs:r,slots:a,emit:l,expose:f}=n;var c;const i=w(e.treeData||te(Z((c=a.default)===null||c===void 0?void 0:c.call(a))));U(()=>e.treeData,()=>{i.value=e.treeData}),Ne(()=>{Pe(()=>{var t;e.treeData===void 0&&a.default&&(i.value=te(Z((t=a.default)===null||t===void 0?void 0:t.call(a))))})});const v=w(),m=w(),K=b(()=>_e(e.fieldNames)),s=w();f({scrollTo:t=>{var d;(d=s.value)===null||d===void 0||d.scrollTo(t)},selectedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.selectedKeys}),checkedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.checkedKeys}),halfCheckedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.halfCheckedKeys}),loadedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.loadedKeys}),loadingKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.loadingKeys}),expandedKeys:b(()=>{var t;return(t=s.value)===null||t===void 0?void 0:t.expandedKeys})});const P=()=>{const{keyEntities:t}=we(i.value,{fieldNames:K.value});let d;return e.defaultExpandAll?d=Object.keys(t):e.defaultExpandParent?d=Ce(e.expandedKeys||e.defaultExpandedKeys||[],t):d=e.expandedKeys||e.defaultExpandedKeys,d},I=w(e.selectedKeys||e.defaultSelectedKeys||[]),N=w(P());U(()=>e.selectedKeys,()=>{e.selectedKeys!==void 0&&(I.value=e.selectedKeys)},{immediate:!0}),U(()=>e.expandedKeys,()=>{e.expandedKeys!==void 0&&(N.value=e.expandedKeys)},{immediate:!0});const y=We((t,d)=>{const{isLeaf:p}=d;p||t.shiftKey||t.metaKey||t.ctrlKey||s.value.onNodeExpand(t,d)},200,{leading:!0}),C=(t,d)=>{e.expandedKeys===void 0&&(N.value=t),l("update:expandedKeys",t),l("expand",t,d)},A=(t,d)=>{const{expandAction:p}=e;p==="click"&&y(t,d),l("click",t,d)},F=(t,d)=>{const{expandAction:p}=e;(p==="dblclick"||p==="doubleclick")&&y(t,d),l("doubleclick",t,d),l("dblclick",t,d)},_=(t,d)=>{const{multiple:p}=e,{node:L,nativeEvent:k}=d,D=L[K.value.key],M=x(x({},d),{selected:!0}),ve=(k==null?void 0:k.ctrlKey)||(k==null?void 0:k.metaKey),ye=k==null?void 0:k.shiftKey;let g;p&&ve?(g=t,v.value=D,m.value=g,M.selectedNodes=z(i.value,g,K.value)):p&&ye?(g=Array.from(new Set([...m.value||[],...qe({treeData:i.value,expandedKeys:N.value,startKey:D,endKey:v.value,fieldNames:K.value})])),M.selectedNodes=z(i.value,g,K.value)):(g=[D],v.value=D,m.value=g,M.selectedNodes=z(i.value,g,K.value)),l("update:selectedKeys",g),l("select",g,M),e.selectedKeys===void 0&&(I.value=g)},u=(t,d)=>{l("update:checkedKeys",t),l("check",t,d)},{prefixCls:h,direction:E}=ce("tree",e);return()=>{const t=de(`${h.value}-directory`,{[`${h.value}-directory-rtl`]:E.value==="rtl"},r.class),{icon:d=a.icon,blockNode:p=!0}=e,L=Ge(e,["icon","blockNode"]);return S(V,H(H(H({},r),{},{icon:d||Ye,ref:s,blockNode:p},L),{},{prefixCls:h.value,class:t,expandedKeys:N.value,selectedKeys:I.value,onSelect:_,onClick:A,onDblclick:F,onExpand:C,onCheck:u}),a)}}}),Q=Te,rt=x(V,{DirectoryTree:R,TreeNode:Q,install:e=>(e.component(V.name,V),e.component(Q.name,Q),e.component(R.name,R),e)});export{rt as T};
