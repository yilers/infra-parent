var P=Object.defineProperty,D=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var h=(o,t,e)=>t in o?P(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,g=(o,t)=>{for(var e in t||(t={}))V.call(t,e)&&h(o,e,t[e]);if(b)for(var e of b(t))q.call(t,e)&&h(o,e,t[e]);return o},w=(o,t)=>D(o,x(t));var p=(o,t,e)=>new Promise((c,n)=>{var d=a=>{try{s(e.next(a))}catch(l){n(l)}},u=a=>{try{s(e.throw(a))}catch(l){n(l)}},s=a=>a.done?c(a.value):Promise.resolve(a.value).then(d,u);s((e=e.apply(o,t)).next())});import{bv as C,bx as k}from"./bootstrap-DjYyHEgg.js";import{b as S,c as T,d as A}from"./index-BZ-foJ6e.js";import{g as B}from"./get-popup-container-BlodRF3J.js";import{u as F}from"./useDateRangePicker-DjB1zMnJ.js";import{m as R,b9 as N,aa as W,b$ as v,ab as O,b2 as U,bJ as $,j,u as I}from"../jse/index-index-rmdNY63r.js";import{u as z}from"./use-drawer-CB92zaEG.js";const{dateRangePresets:G}=F();function f(){return[{color:"error",label:"否",value:0},{color:"processing",label:"是",value:1}]}const Y=()=>[{component:"Input",fieldName:"positionCode",label:"岗位编码"},{component:"Input",fieldName:"positionName",label:"岗位名称"},{component:"Select",componentProps:{getPopupContainer:B,options:f()},fieldName:"usable",label:"是否启用"},G.datetime("createTime","创建时间")],Z=[{field:"positionCode",title:"岗位编码",minWidth:80},{field:"positionName",title:"岗位名称",minWidth:130},{title:"排序",field:"sortNumber"},{field:"usable",title:"是否启用",cellRender:{name:"CellTag",options:f()}},{field:"createTime",title:"创建时间",minWidth:150},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",resizable:!1,width:180}],J=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"id"},{component:"Input",fieldName:"positionName",label:"岗位名称",rules:"required"},{component:"Input",fieldName:"positionCode",label:"岗位编码",rules:"required"},{component:"InputNumber",fieldName:"sortNumber",help:"排序, 数字越小越靠前",label:"岗位排序",defaultValue:1,rules:"required"},{component:"Textarea",fieldName:"positionDesc",formItemClass:"items-start",label:"备注"},{fieldName:"usable",component:"RadioGroup",defaultValue:1,componentProps:{optionType:"button",buttonStyle:"solid",options:f()},rules:"required",formItemClass:"col-span-2 lg:col-span-1",label:"是否启用"}],ee=R({__name:"post-drawer",emits:["reload"],setup(o,{emit:t}){const e=t,c=N({}),n=N(!1),d=W(()=>n.value?C("pages.common.edit"):C("pages.common.add")),[u,s]=k({commonConfig:{formItemClass:"col-span-2",componentProps:{class:"w-full"},labelWidth:90},schema:J(),showDefaultActions:!1,wrapperClass:"grid-cols-2"}),[a,l]=z({destroyOnClose:!0,onConfirm:_,onClosed:y,onOpenChange(i){return p(this,null,function*(){if(i){const{id:r}=l.getData();if(n.value=!!r,n.value&&r){const m=yield S(r);c.value=v(m),yield s.setValues(c.value)}}})}});function _(){return p(this,null,function*(){try{l.lock(!0);const{valid:i}=yield s.validate();if(!i)return;const r=v(yield s.getValues()),m=w(g({},r),{version:c.value.version||1});yield n.value?T(m):A(m),e("reload"),l.close()}catch(i){console.error(i)}finally{l.lock(!1)}})}function y(){return p(this,null,function*(){yield s.resetForm()})}return(i,r)=>(U(),O(I(a),{title:d.value,class:"w-[600px]"},{default:$(()=>[j(I(u))]),_:1},8,["title"]))}});export{ee as _,Z as c,Y as q};
