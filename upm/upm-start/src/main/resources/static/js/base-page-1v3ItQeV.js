var A=Object.defineProperty;var C=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var T=(o,t,e)=>t in o?A(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,m=(o,t)=>{for(var e in t||(t={}))O.call(t,e)&&T(o,e,t[e]);if(C)for(var e of C(t))S.call(t,e)&&T(o,e,t[e]);return o};var v=(o,t,e)=>new Promise((i,u)=>{var f=n=>{try{p(e.next(n))}catch(l){u(l)}},d=n=>{try{p(e.throw(n))}catch(l){u(l)}},p=n=>n.done?i(n.value):Promise.resolve(n.value).then(f,d);p((e=e.apply(o,t)).next())});import{h as z}from"./common-DOFZpKVA.js";import{dv as G,bu as I}from"./bootstrap-DjYyHEgg.js";import{s as h}from"./tool-BzPbNkcJ.js";import{u as M,_ as Q}from"./permission-tabs.vue_vue_type_script_setup_true_lang-CReN1h6G.js";import{_ as R}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as q}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{m as D,b9 as P,v as E,aa as k,ab as y,ac as x,u as s,b2 as g,aQ as F,bJ as N,ae as H,j as K,aS as U,aw as W}from"../jse/index-index-rmdNY63r.js";import"./index-wrrfkh6D.js";import"./index-Bw6N7aDv.js";import"./shallowequal-W2RnI4nT.js";import"./Dropdown-D1vLSWoc.js";import"./useRefs-ReJqRy3L.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./rotate-cw-Dzdn7gja.js";const X={class:"h-full w-full"},Y=D({inheritAttrs:!1,__name:"base-page",props:{pageCode:{},defaultTemplateType:{},tableComponent:{},tableComponentProps:{default:()=>({})}},setup(o){const t=o,e=P(!1),i=P([]),u=()=>v(null,null,function*(){try{const a=yield z(s(t.pageCode));i.value=a.map(r=>({key:r.tabCode,permissions:[],label:r.tabName,templateType:f(r.extra,t.defaultTemplateType),businessCategory:r.businessCategory,link:h(r.extra,"link",""),attachParams:h(r.extra,"attachParams",""),direction:h(r.extra,"direction","")})),e.value=!0}catch(a){console.error("获取tab配置失败:",a)}});function f(a,r){if(!a)return r;try{const{templateType:b}=JSON.parse(a);return Object.values(G).includes(b)?b:r}catch(b){return r}}const{activeTab:d,accessibleTabs:p,handleTabChange:n,templateType:l,businessCategory:j,tabName:w,link:B,attachParams:$,direction:_}=M(i),J=a=>{n(a)};E(()=>{u()});const c=t.tableComponent,L=k(()=>{const a=c==null?void 0:c.props;return a&&typeof a=="object"&&"link"in a}),V=k(()=>{const a=c==null?void 0:c.props;return a&&typeof a=="object"&&"attachParams"in a});return(a,r)=>s(p).length>0?(g(),y(s(R),F({key:0,"auto-content-height":"","header-class":"pb-0 block"},a.$attrs,{class:"no-flex"}),{description:N(()=>[s(p).length>1?(g(),y(s(Q),{key:0,configs:i.value,onChange:J},null,8,["configs"])):x("",!0)]),default:N(()=>[H("div",X,[K(s(c),U(W(m(m(m(m({activeTab:s(d),businessCategory:s(j),templateType:s(l),tabName:s(w)},o.tableComponentProps),L.value?{link:s(B)}:{}),V.value?{attachParams:s($)}:{}),s(_)?{direction:s(_)}:{}))),null,16)])]),_:1},16)):e.value?(g(),y(s(q),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"})):x("",!0)}}),be=I(Y,[["__scopeId","data-v-3c752efc"]]);export{be as default};
