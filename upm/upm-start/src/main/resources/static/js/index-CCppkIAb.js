var Y=Object.defineProperty,J=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var _=(r,t,o)=>t in r?Y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,m=(r,t)=>{for(var o in t||(t={}))H.call(t,o)&&_(r,o,t[o]);if(D)for(var o of D(t))V.call(t,o)&&_(r,o,t[o]);return r},x=(r,t)=>J(r,M(t));var S=(r,t,o)=>new Promise((b,c)=>{var u=i=>{try{n(o.next(i))}catch(d){c(d)}},C=i=>{try{n(o.throw(i))}catch(d){c(d)}},n=i=>i.done?b(i.value):Promise.resolve(i.value).then(u,C);n((o=o.apply(r,t)).next())});import{W as $}from"./index-C4NAiFfA.js";import{dI as U,dJ as q,dz as G,a7 as T}from"./bootstrap-DjYyHEgg.js";import{h as W,k as Q}from"./fileTransfer-p8-3apt7.js";import{l as K}from"./table-FRaKquww.js";import{u as X,_ as Z}from"./useTableImport-CNd8lRg2.js";import{u as ee}from"./useDownLoad-Cw45s4VH.js";import{u as te}from"./useShopCheck-DKIjDUfz.js";import{ci as v,m as oe,b9 as re,aa as ie,be as se,ab as h,b2 as p,bJ as l,j as g,u as e,bL as E,ai as k,ad as ae,I as le,bb as ne,bp as de}from"../jse/index-index-rmdNY63r.js";import{p as O}from"./contast-C3bEivmW.js";import{u as me}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as pe}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as ce}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:I}=me(),P={toolbarConfig:{resizable:!0},columns:[{title:"序号",type:"seq",width:50,fixed:"left"},{field:"commonOrderNo",title:"订单编号",width:200},{field:"commonProductName",title:"商品名称",width:430},{field:"commonProductId",title:"商品ID",width:150},{field:"jdSpuId",title:"SPU",width:150},{field:"jdPreAmount",title:"优惠前金额",width:200},{field:"commonProductQuantity",title:"成交商品件数",width:250},{field:"jdDiscountAmount",title:"优惠金额",width:150},{field:"commonDueAmount",title:"订单金额",width:150},{field:"jdFreight",title:"运费",width:150},{field:"jdServiceFee",title:"服务费",width:150},{field:"progressStatus",title:"进度状态",width:150,formatter({cellValue:r}){const t=O.find(o=>o.value===r);return t?t.label:r}},{field:"commonCreateTime",title:"下单时间",width:160},{field:"commonPaymentTime",title:"付款时间",width:160},{field:"jdPayMethod",title:"付款方式",width:160}]},ue={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[I.datetime("orderTime","下单时间",[v().startOf("month"),v().endOf("month")]),I.datetime("payTime","付款时间"),{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"productId",label:"商品ID"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"orderNo",label:"订单编号"},{component:"Select",componentProps:{allowClear:!0,options:O,placeholder:"请选择",mode:"multiple",maxTagCount:1,maxTagTextLength:6},fieldName:"progressStatusList",label:"进度状态"}],fieldMappingTime:[["orderTime",["orderCreateStartTime","orderCreateEndTime"],"YYYY-MM-DD HH:mm:ss"],["payTime",["orderPaymentStartTime","orderPaymentEndTime"],"YYYY-MM-DD HH:mm:ss"]]},Ae=oe({__name:"index",setup(r){const{checkShopSelected:t}=te(),{bizImportType:o,bizImportTypeList:b,uploadFormRef:c,isError:u,extension:C,handleImport:n,ImportSettingButton:i}=X({importTypeList:[{id:1,label:"导入数据",bizCode:"JD_SALES_ORDER_DETAIL",isError:!1,auth:"basic:jdBusinessOrderDetails:import"},{id:2,label:"导入异常数据",bizCode:"JD_SALES_ORDER_DETAIL",isError:!0,auth:"basic:jdBusinessOrderDetails:importFail"}],defaultExtension:".xlsx,.csv",errorExtension:".xlsx"}),d=re(U.jdSalesOrderDetailCsv),j=m({},ue),L=x(m({},P),{toolbarConfig:m({},P.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(a,fe)=>S(null,[a,fe],function*({page:{currentPage:y,pageSize:s}},f){return t()?yield K(m({current:y,size:s},f)):{result:{records:[],total:0}}})}}}),z={},[A,w]=q({gridEvents:z,formOptions:j,gridOptions:L}),{handleDownload:B,downLoading:F}=ee(),{hasAccessByCodes:N}=G(),R=ie(()=>N(["basic:jdBusinessOrderDetails:list"]));return(y,s)=>{const f=se("access");return R.value?(p(),h(e(pe),{key:0,"auto-content-height":""},{default:l(()=>[g(e(A),null,{"toolbar-actions":l(()=>[(p(!0),ae(le,null,ne(e(b),a=>E((p(),h(e(T),{key:a.id,type:"primary",style:{"margin-right":"12px"},onClick:fe=>e(n)(a.bizCode,a.isError,e(w))},{default:l(()=>[k(de(a.label),1)]),_:2},1032,["onClick"])),[[f,[a.auth],"codes"]])),128))]),"toolbar-tools":l(()=>[E((p(),h(e(T),{loading:e(F),class:"mr-2",type:"primary",onClick:s[0]||(s[0]=a=>e(B)(e(w),d.value))},{icon:l(()=>[g(e($),{class:"mr-1 inline-block size-6"})]),default:l(()=>[s[1]||(s[1]=k(" 导出数据 ",-1))]),_:1},8,["loading"])),[[f,["basic:jdBusinessOrderDetails:export"],"codes"]]),g(e(i))]),_:1}),g(e(Z),{ref_key:"uploadFormRef",ref:c,"biz-import-type":e(o),"is-error":e(u),extension:e(C),"upload-fn":e(u)?e(Q):e(W)},null,8,["biz-import-type","is-error","extension","upload-fn"])]),_:1})):(p(),h(e(ce),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{Ae as default};
