var B=Object.defineProperty,V=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var S=(r,t,i)=>t in r?B(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,p=(r,t)=>{for(var i in t||(t={}))M.call(t,i)&&S(r,i,t[i]);if(D)for(var i of D(t))$.call(t,i)&&S(r,i,t[i]);return r},y=(r,t)=>V(r,H(t));var O=(r,t,i)=>new Promise((g,c)=>{var m=o=>{try{d(i.next(o))}catch(n){c(n)}},w=o=>{try{d(i.throw(o))}catch(n){c(n)}},d=o=>o.done?g(o.value):Promise.resolve(o.value).then(m,w);d((i=i.apply(r,t)).next())});import{W as Y}from"./index-C4NAiFfA.js";import{dI as j,dJ as q,dz as G,a7 as P}from"./bootstrap-DjYyHEgg.js";import{h as Z,d as J}from"./fileTransfer-p8-3apt7.js";import{d as W}from"./table-FRaKquww.js";import{u as K,_ as Q}from"./useTableImport-CNd8lRg2.js";import{u as X}from"./useDownLoad-Cw45s4VH.js";import{u as ee}from"./useShopCheck-DKIjDUfz.js";import{ci as x,m as te,b9 as ie,aa as re,be as oe,ab as h,b2 as u,bJ as s,j as b,u as e,bL as E,ai as I,ad as le,I as ae,bb as se,bp as de}from"../jse/index-index-rmdNY63r.js";import{p as v}from"./contast-C3bEivmW.js";import{u as ne}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as pe}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as ue}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:ce}=ne(),T={toolbarConfig:{custom:!0,export:!1,refresh:!0,resizable:!0,zoom:!0,search:!1},columns:[{title:"序号",type:"seq",width:50},{field:"buyerCode",title:"采购商编号",width:150},{field:"supplierCode",title:"供应商编号",width:280},{field:"groupCode",title:"分组编号",width:280},{field:"templateCode",title:"模板编号",width:150},{field:"productCode",title:"商品编号",width:150},{field:"supplyType",title:"供货方式",width:150},{field:"rechargeUsername",title:"充值用户名",width:150},{field:"productName",title:"商品名称",width:150},{field:"quantity",title:"数量",width:150},{field:"totalFaceValue",title:"总面值",width:150},{field:"purchaseDiscount",title:"采购折扣",width:150},{field:"purchaseAmount",title:"采购金额",width:150},{field:"supplyFaceValue",title:"供货面值",width:150},{field:"supplyAmount",title:"供货金额",width:150},{field:"serviceFee",title:"服务费",width:150},{field:"promotionFee",title:"推广费",width:150},{field:"status",title:"状态",width:150,formatter(){return"成功"}},{field:"orderTime",title:"订单时间",width:150},{field:"processDuration",title:"处理时长",width:150},{field:"directAccount",title:"直储账号",width:150},{field:"supOrderNo",title:"SUP订单号",width:150},{field:"merchantOrderNo",title:"商户订单号",width:150},{field:"ip",title:"IP",width:150},{field:"rechargeAccountRegion",title:"充值账号区域",width:150},{field:"ipRegion",title:"IP区域",width:150},{field:"matchType",title:"匹配方式",width:150,formatter(){return"普通"}},{field:"matchRegion",title:"匹配区域",width:150},{field:"returnMessage",title:"返回信息",width:150},{field:"mainOrderNo",title:"主订单号",width:150},{field:"channelId",title:"渠道ID",width:150},{field:"tencentActivityNo",title:"腾讯活动号",width:150},{field:"tmallOrderNo",title:"天猫订单号",width:150},{field:"groupRechargeUsername",title:"拼团单充值用户名",width:150},{field:"groupOrderNo",title:"拼团单订单号",width:150},{field:"groupSupOrderNo",title:"拼团单SUP订单号",width:150},{field:"isRefunded",title:"是否退款",width:150},{field:"progressStatus",title:"进度状态",width:150,formatter({cellValue:r}){const t=v.find(i=>i.value===r);return t?t.label:r}}]},me=[{label:"正常单",value:"正常单"},{label:"中转单",value:"中转单"},{label:"半托管单",value:"半托管单"},{label:"黄升白",value:"黄升白"},{label:"拼团各自付",value:"拼团各自付"}],fe={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[ce.datetime("orderTime","订单时间",[x().startOf("month"),x().endOf("month")]),{component:"Select",componentProps:{allowClear:!0,options:me,placeholder:"请选择"},fieldName:"type",label:"类型"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"buyerCode",label:"采购商编号"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"supplierCode",label:"供应商编号"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"supOrderNo",label:"SUP订单号"},{component:"Select",componentProps:{allowClear:!0,options:v,placeholder:"请选择",mode:"multiple",maxTagCount:1,maxTagTextLength:6},fieldName:"progressStatusList",label:"进度状态"}],fieldMappingTime:[["orderTime",["startTime","endTime"],"YYYY-MM-DD HH:mm:ss"]],showCollapseButton:!0,submitOnChange:!1,submitOnEnter:!1},ke=te({__name:"index",setup(r){const{checkShopSelected:t}=ee(),{bizImportType:i,bizImportTypeList:g,uploadFormRef:c,isError:m,extension:w,handleImport:d,ImportSettingButton:o}=K({importTypeList:[{id:1,label:"正常单导入数据",bizCode:"SUP_ORDER_DETAIL_ZCD",isError:!1,auth:"basic:SUPOrderDetails:zhengchangImport"},{id:2,label:"中转单导入数据",bizCode:"SUP_ORDER_DETAIL_ZZD",isError:!1,auth:"basic:SUPOrderDetails:zhongzhuanImport"},{id:3,label:"半托管单导入数据",bizCode:"SUP_ORDER_DETAIL_BTG",isError:!1,auth:"basic:SUPOrderDetails:bantuoguanImport"},{id:4,label:"黄升白导入数据",bizCode:"SUP_ORDER_DETAIL_HSB",isError:!1,auth:"basic:SUPOrderDetails:haungshengbaiImport"},{id:5,label:"拼团各自付导入数据",bizCode:"SUP_ORDER_DETAIL_PT",isError:!1,auth:"basic:SUPOrderDetails:pintuanImport"},{id:6,label:"导入异常数据",bizCode:"SUP_ORDER_DETAIL_HSB",isError:!0,auth:"basic:SUPOrderDetails:haungshengbaiImportFail"}],defaultExtension:".xlsx,.xls,.csv",errorExtension:".xlsx"}),n=ie(j.supOrderDetailCsv),R=p({},fe),U=y(p({},T),{toolbarConfig:p({},T.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(a,he)=>O(null,[a,he],function*({page:{currentPage:_,pageSize:l}},f){return t()?yield W(p({current:_,size:l},f)):{result:{records:[],total:0}}})}}}),z={},[L,C]=q({gridEvents:z,formOptions:R,gridOptions:U}),{handleDownload:N,downLoading:k}=X(),{hasAccessByCodes:A}=G(),F=re(()=>A(["basic:SUPOrderDetails:list"]));return(_,l)=>{const f=oe("access");return F.value?(u(),h(e(pe),{key:0,"auto-content-height":""},{default:s(()=>[b(e(L),null,{"toolbar-actions":s(()=>[(u(!0),le(ae,null,se(e(g),a=>E((u(),h(e(P),{key:a.id,type:"primary",style:{"margin-right":"12px"},onClick:he=>e(d)(a.bizCode,a.isError,e(C))},{default:s(()=>[I(de(a.label),1)]),_:2},1032,["onClick"])),[[f,[a.auth],"codes"]])),128))]),"toolbar-tools":s(()=>[E((u(),h(e(P),{loading:e(k),class:"mr-2",type:"primary",onClick:l[0]||(l[0]=a=>e(N)(e(C),n.value))},{icon:s(()=>[b(e(Y),{class:"mr-1 inline-block size-6"})]),default:s(()=>[l[1]||(l[1]=I(" 导出数据 ",-1))]),_:1},8,["loading"])),[[f,["basic:SUPOrderDetails:export"],"codes"]]),b(e(o))]),_:1}),b(e(Q),{ref_key:"uploadFormRef",ref:c,"biz-import-type":e(i),"is-error":e(m),"upload-fn":e(m)?e(J):e(Z),extension:e(w)},null,8,["biz-import-type","is-error","upload-fn","extension"])]),_:1})):(u(),h(e(ue),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{ke as default};
