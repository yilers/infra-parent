var Ma=Object.defineProperty,Oa=Object.defineProperties;var Aa=Object.getOwnPropertyDescriptors;var ze=Object.getOwnPropertySymbols;var za=Object.prototype.hasOwnProperty,Ra=Object.prototype.propertyIsEnumerable;var Re=(i,t,a)=>t in i?Ma(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a,xt=(i,t)=>{for(var a in t||(t={}))za.call(t,a)&&Re(i,a,t[a]);if(ze)for(var a of ze(t))Ra.call(t,a)&&Re(i,a,t[a]);return i},Ft=(i,t)=>Oa(i,Aa(t));var wt=(i,t,a)=>new Promise((e,o)=>{var r=d=>{try{l(a.next(d))}catch(h){o(h)}},n=d=>{try{l(a.throw(d))}catch(h){o(h)}},l=d=>d.done?e(d.value):Promise.resolve(d.value).then(r,n);l((a=a.apply(i,t)).next())});import{g as Qe,m as Je,_ as I,r as ta,P as Ct,a as Gt,D as Wt,b as ct,f as ea,z as _a,dE as Ia,ag as Jt,L as aa,dF as Nt,dG as Na,Z as Ba,dH as La,dI as re,c_ as Pa,as as Ha,bM as Wa,cZ as ia,aZ as G,Q as rt,a3 as nt,aY as Xa,aR as ja,a4 as ne}from"./bootstrap-B0IOIL79.js";import{a as Ya}from"./data-N7aLfSNq.js";import{u as ka}from"./useUpdateUser-OZ8QtDaC.js";import{bl as Dt,v as Ce,x as ra,aE as Ga,b4 as Ua,m as st,aa as U,w as ce,n as oe,j as v,bF as na,aM as _e,bx as Va,b9 as bt,u as g,c5 as Fa,ad as ut,b2 as V,bL as qa,ae as M,aT as $t,aR as J,ab as jt,aQ as oa,bJ as E,ac as Mt,ai as Z,bp as Q,dd as Ka,bW as Za,I as Ie,bb as Qa}from"../jse/index-index-StHjciy-.js";import Ja from"./index-7fkLJNwe.js";import ti from"./index-Bml6TPTK.js";import{u as ei,r as ai,D as ii,a as it}from"./index-WX1QZ44Z.js";import{R as ri}from"./index-bM1Vk0h0.js";import{e as ni}from"./eagerComputed-Be078mV-.js";import{u as sa}from"./use-modal-RS0jGB5k.js";import{T as la}from"./index-BJoh_pN6.js";import{i as oi}from"./isPlainObject-u3tyL0Le.js";import{S as si}from"./index-ZAb3F_Ap.js";function li(i){const t=i.split(","),e=t[0].match(/:(.*?);/)[1],o=window.atob(t[1]);let r=o.length;const n=new Uint8Array(r);for(;r--;)n[r]=o.codePointAt(r);return new Blob([n],{type:e})}function ci(){const i=Dt({});let t=null;const a=ei();return Ce(()=>{t=a.value.subscribe(e=>{i.value=e})}),ra(()=>{a.value.unsubscribe(t)}),i}const hi=i=>{const{antCls:t,componentCls:a,iconCls:e,avatarBg:o,avatarColor:r,containerSize:n,containerSizeLG:l,containerSizeSM:d,textFontSize:h,textFontSizeLG:s,textFontSizeSM:c,borderRadius:u,borderRadiusLG:m,borderRadiusSM:x,lineWidth:$,lineType:D}=i,w=(S,b,y)=>({width:S,height:S,lineHeight:`${S-$*2}px`,borderRadius:"50%",[`&${a}-square`]:{borderRadius:y},[`${a}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${a}-icon`]:{fontSize:b,[`> ${e}`]:{margin:0}}});return{[a]:I(I(I(I({},ta(i)),{position:"relative",display:"inline-block",overflow:"hidden",color:r,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${$}px ${D} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),w(n,h,u)),{"&-lg":I({},w(l,s,m)),"&-sm":I({},w(d,c,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},di=i=>{const{componentCls:t,groupBorderColor:a,groupOverlapping:e,groupSpace:o}=i;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:a},"> *:not(:first-child)":{marginInlineStart:e}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:o}}}},ca=Qe("Avatar",i=>{const{colorTextLightSolid:t,colorTextPlaceholder:a}=i,e=Je(i,{avatarBg:a,avatarColor:t});return[hi(e),di(e)]},i=>{const{controlHeight:t,controlHeightLG:a,controlHeightSM:e,fontSize:o,fontSizeLG:r,fontSizeXL:n,fontSizeHeading3:l,marginXS:d,marginXXS:h,colorBorderBg:s}=i;return{containerSize:t,containerSizeLG:a,containerSizeSM:e,textFontSize:Math.round((r+n)/2),textFontSizeLG:l,textFontSizeSM:o,groupSpace:h,groupOverlapping:-d,groupBorderColor:s}}),ha=Symbol("AvatarContextKey"),ui=()=>Ga(ha,{}),pi=i=>Ua(ha,i),fi=()=>({prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:()=>"default"},src:String,srcset:String,icon:Ct.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}),ot=st({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:fi(),slots:Object,setup(i,t){let{slots:a,attrs:e}=t;const o=Dt(!0),r=Dt(!1),n=Dt(1),l=Dt(null),d=Dt(null),{prefixCls:h}=Gt("avatar",i),[s,c]=ca(h),u=ui(),m=U(()=>i.size==="default"?u.size:i.size),x=ci(),$=ni(()=>{if(typeof i.size!="object")return;const b=ai.find(f=>x.value[f]);return i.size[b]}),D=b=>$.value?{width:`${$.value}px`,height:`${$.value}px`,lineHeight:`${$.value}px`,fontSize:`${b?$.value/2:18}px`}:{},w=()=>{if(!l.value||!d.value)return;const b=l.value.offsetWidth,y=d.value.offsetWidth;if(b!==0&&y!==0){const{gap:f=4}=i;f*2<y&&(n.value=y-f*2<b?(y-f*2)/b:1)}},S=()=>{const{loadError:b}=i;(b==null?void 0:b())!==!1&&(o.value=!1)};return ce(()=>i.src,()=>{oe(()=>{o.value=!0,n.value=1})}),ce(()=>i.gap,()=>{oe(()=>{w()})}),Ce(()=>{oe(()=>{w(),r.value=!0})}),()=>{var b,y;const{shape:f,src:p,alt:C,srcset:O,draggable:B,crossOrigin:k}=i,F=(b=u.shape)!==null&&b!==void 0?b:f,H=Wt(a,i,"icon"),_=h.value,W={[`${e.class}`]:!!e.class,[_]:!0,[`${_}-lg`]:m.value==="large",[`${_}-sm`]:m.value==="small",[`${_}-${F}`]:!0,[`${_}-image`]:p&&o.value,[`${_}-icon`]:H,[c.value]:!0},L=typeof m.value=="number"?{width:`${m.value}px`,height:`${m.value}px`,lineHeight:`${m.value}px`,fontSize:H?`${m.value/2}px`:"18px"}:{},X=(y=a.default)===null||y===void 0?void 0:y.call(a);let A;if(p&&o.value)A=v("img",{draggable:B,src:p,srcset:O,onError:S,alt:C,crossorigin:k},null);else if(H)A=H;else if(r.value||n.value!==1){const at=`scale(${n.value}) translateX(-50%)`,pt={msTransform:at,WebkitTransform:at,transform:at},ft=typeof m.value=="number"?{lineHeight:`${m.value}px`}:{};A=v(ri,{onResize:w},{default:()=>[v("span",{class:`${_}-string`,ref:l,style:I(I({},ft),pt)},[X])]})}else A=v("span",{class:`${_}-string`,ref:l,style:{opacity:0}},[X]);return s(v("span",ct(ct({},e),{},{ref:d,class:W,style:[L,D(!!H),e.style]}),[A]))}}}),gi=()=>({prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"},shape:{type:String,default:"circle"}}),he=st({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:gi(),setup(i,t){let{slots:a,attrs:e}=t;const{prefixCls:o,direction:r}=Gt("avatar",i),n=U(()=>`${o.value}-group`),[l,d]=ca(o);return na(()=>{const h={size:i.size,shape:i.shape};pi(h)}),()=>{const{maxPopoverPlacement:h="top",maxCount:s,maxStyle:c,maxPopoverTrigger:u="hover",shape:m}=i,x={[n.value]:!0,[`${n.value}-rtl`]:r.value==="rtl",[`${e.class}`]:!!e.class,[d.value]:!0},$=Wt(a,i),D=ea($).map((S,b)=>_a(S,{key:`avatar-key-${b}`})),w=D.length;if(s&&s<w){const S=D.slice(0,s),b=D.slice(s,w);return S.push(v(Ia,{key:"avatar-popover-key",content:b,trigger:u,placement:h,overlayClassName:`${n.value}-popover`},{default:()=>[v(ot,{style:c,shape:m},{default:()=>[`+${w-s}`]})]})),l(v("div",ct(ct({},e),{},{class:x,style:e.style}),[S]))}return l(v("div",ct(ct({},e),{},{class:x,style:e.style}),[D]))}}});ot.Group=he;ot.install=function(i){return i.component(ot.name,ot),i.component(he.name,he),i};const mi=i=>{const{antCls:t,componentCls:a,cardHeadHeight:e,cardPaddingBase:o,cardHeadTabsMarginBottom:r}=i;return I(I({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:e,marginBottom:-1,padding:`0 ${o}px`,color:i.colorTextHeading,fontWeight:i.fontWeightStrong,fontSize:i.fontSizeLG,background:"transparent",borderBottom:`${i.lineWidth}px ${i.lineType} ${i.colorBorderSecondary}`,borderRadius:`${i.borderRadiusLG}px ${i.borderRadiusLG}px 0 0`},Jt()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":I(I({display:"inline-block",flex:1},aa),{[`
          > ${a}-typography,
          > ${a}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:r,color:i.colorText,fontWeight:"normal",fontSize:i.fontSize,"&-bar":{borderBottom:`${i.lineWidth}px ${i.lineType} ${i.colorBorderSecondary}`}}})},vi=i=>{const{cardPaddingBase:t,colorBorderSecondary:a,cardShadow:e,lineWidth:o}=i;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      ${o}px 0 0 0 ${a},
      0 ${o}px 0 0 ${a},
      ${o}px ${o}px 0 0 ${a},
      ${o}px 0 0 0 ${a} inset,
      0 ${o}px 0 0 ${a} inset;
    `,transition:`all ${i.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:e}}},bi=i=>{const{componentCls:t,iconCls:a,cardActionsLiMargin:e,cardActionsIconSize:o,colorBorderSecondary:r}=i;return I(I({margin:0,padding:0,listStyle:"none",background:i.colorBgContainer,borderTop:`${i.lineWidth}px ${i.lineType} ${r}`,display:"flex",borderRadius:`0 0 ${i.borderRadiusLG}px ${i.borderRadiusLG}px `},Jt()),{"& > li":{margin:e,color:i.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:i.cardActionsIconSize*2,fontSize:i.fontSize,lineHeight:i.lineHeight,cursor:"pointer","&:hover":{color:i.colorPrimary,transition:`color ${i.motionDurationMid}`},[`a:not(${t}-btn), > ${a}`]:{display:"inline-block",width:"100%",color:i.colorTextDescription,lineHeight:`${i.fontSize*i.lineHeight}px`,transition:`color ${i.motionDurationMid}`,"&:hover":{color:i.colorPrimary}},[`> ${a}`]:{fontSize:o,lineHeight:`${o*i.lineHeight}px`}},"&:not(:last-child)":{borderInlineEnd:`${i.lineWidth}px ${i.lineType} ${r}`}}})},yi=i=>I(I({margin:`-${i.marginXXS}px 0`,display:"flex"},Jt()),{"&-avatar":{paddingInlineEnd:i.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:i.marginXS}},"&-title":I({color:i.colorTextHeading,fontWeight:i.fontWeightStrong,fontSize:i.fontSizeLG},aa),"&-description":{color:i.colorTextDescription}}),xi=i=>{const{componentCls:t,cardPaddingBase:a,colorFillAlter:e}=i;return{[`${t}-head`]:{padding:`0 ${a}px`,background:e,"&-title":{fontSize:i.fontSize}},[`${t}-body`]:{padding:`${i.padding}px ${a}px`}}},wi=i=>{const{componentCls:t}=i;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},Si=i=>{const{componentCls:t,cardShadow:a,cardHeadPadding:e,colorBorderSecondary:o,boxShadow:r,cardPaddingBase:n}=i;return{[t]:I(I({},ta(i)),{position:"relative",background:i.colorBgContainer,borderRadius:i.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:r},[`${t}-head`]:mi(i),[`${t}-extra`]:{marginInlineStart:"auto",color:"",fontWeight:"normal",fontSize:i.fontSize},[`${t}-body`]:I({padding:n,borderRadius:` 0 0 ${i.borderRadiusLG}px ${i.borderRadiusLG}px`},Jt()),[`${t}-grid`]:vi(i),[`${t}-cover`]:{"> *":{display:"block",width:"100%"},img:{borderRadius:`${i.borderRadiusLG}px ${i.borderRadiusLG}px 0 0`}},[`${t}-actions`]:bi(i),[`${t}-meta`]:yi(i)}),[`${t}-bordered`]:{border:`${i.lineWidth}px ${i.lineType} ${o}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${i.motionDurationMid}, border-color ${i.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:a}},[`${t}-contain-grid`]:{[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:-i.lineWidth,marginInlineStart:-i.lineWidth,padding:0}},[`${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:e}}},[`${t}-type-inner`]:xi(i),[`${t}-loading`]:wi(i),[`${t}-rtl`]:{direction:"rtl"}}},Ci=i=>{const{componentCls:t,cardPaddingSM:a,cardHeadHeightSM:e}=i;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:e,padding:`0 ${a}px`,fontSize:i.fontSize,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:i.fontSize}}},[`> ${t}-body`]:{padding:a}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{minHeight:e,paddingTop:0,display:"flex",alignItems:"center"}}}}},Di=Qe("Card",i=>{const t=Je(i,{cardShadow:i.boxShadowCard,cardHeadHeight:i.fontSizeLG*i.lineHeightLG+i.padding*2,cardHeadHeightSM:i.fontSize*i.lineHeight+i.paddingXS*2,cardHeadPadding:i.padding,cardPaddingBase:i.paddingLG,cardHeadTabsMarginBottom:-i.padding-i.lineWidth,cardActionsLiMargin:`${i.paddingSM}px 0`,cardActionsIconSize:i.fontSize,cardPaddingSM:12});return[Si(t),Ci(t)]}),{TabPane:$i}=la,Ti=()=>({prefixCls:String,title:Ct.any,extra:Ct.any,bordered:{type:Boolean,default:!0},bodyStyle:{type:Object,default:void 0},headStyle:{type:Object,default:void 0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},type:{type:String},size:{type:String},actions:Ct.any,tabList:{type:Array},tabBarExtraContent:Ct.any,activeTabKey:String,defaultActiveTabKey:String,cover:Ct.any,onTabChange:{type:Function}}),Ot=st({compatConfig:{MODE:3},name:"ACard",inheritAttrs:!1,props:Ti(),slots:Object,setup(i,t){let{slots:a,attrs:e}=t;const{prefixCls:o,direction:r,size:n}=Gt("card",i),[l,d]=Di(o),h=u=>u.map((x,$)=>_e(x)&&!Na(x)||!_e(x)?v("li",{style:{width:`${100/u.length}%`},key:`action-${$}`},[v("span",null,[x])]):null),s=u=>{var m;(m=i.onTabChange)===null||m===void 0||m.call(i,u)},c=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m;return u.forEach(x=>{x&&oi(x.type)&&x.type.__ANT_CARD_GRID&&(m=!0)}),m};return()=>{var u,m,x,$,D,w;const{headStyle:S={},bodyStyle:b={},loading:y,bordered:f=!0,type:p,tabList:C,hoverable:O,activeTabKey:B,defaultActiveTabKey:k,tabBarExtraContent:F=Nt((u=a.tabBarExtraContent)===null||u===void 0?void 0:u.call(a)),title:H=Nt((m=a.title)===null||m===void 0?void 0:m.call(a)),extra:_=Nt((x=a.extra)===null||x===void 0?void 0:x.call(a)),actions:W=Nt(($=a.actions)===null||$===void 0?void 0:$.call(a)),cover:L=Nt((D=a.cover)===null||D===void 0?void 0:D.call(a))}=i,X=ea((w=a.default)===null||w===void 0?void 0:w.call(a)),A=o.value,at={[`${A}`]:!0,[d.value]:!0,[`${A}-loading`]:y,[`${A}-bordered`]:f,[`${A}-hoverable`]:!!O,[`${A}-contain-grid`]:c(X),[`${A}-contain-tabs`]:C&&C.length,[`${A}-${n.value}`]:n.value,[`${A}-type-${p}`]:!!p,[`${A}-rtl`]:r.value==="rtl"},pt=v(si,{loading:!0,active:!0,paragraph:{rows:4},title:!1},{default:()=>[X]}),ft=B!==void 0,Ut={size:"large",[ft?"activeKey":"defaultActiveKey"]:ft?B:k,onChange:s,class:`${A}-head-tabs`};let Rt;const _t=C&&C.length?v(la,Ut,{default:()=>[C.map(It=>{const{tab:Oe,slots:Vt}=It,Ae=Vt==null?void 0:Vt.tab;Ba(!Vt,"Card","tabList slots is deprecated, Please use `customTab` instead.");let ie=Oe!==void 0?Oe:a[Ae]?a[Ae](It):null;return ie=La(a,"customTab",It,()=>[ie]),v($i,{tab:ie,key:It.key,disabled:It.disabled},null)})],rightExtra:F?()=>F:null}):null;(H||_||_t)&&(Rt=v("div",{class:`${A}-head`,style:S},[v("div",{class:`${A}-head-wrapper`},[H&&v("div",{class:`${A}-head-title`},[H]),_&&v("div",{class:`${A}-extra`},[_])]),_t]));const ee=L?v("div",{class:`${A}-cover`},[L]):null,ae=v("div",{class:`${A}-body`,style:b},[y?pt:X]),Ea=W&&W.length?v("ul",{class:`${A}-actions`},[h(W)]):null;return l(v("div",ct(ct({ref:"cardContainerRef"},e),{},{class:[at,e.class]}),[Rt,ee,X&&X.length?ae:null,Ea]))}}}),Ei=()=>({prefixCls:String,title:re(),description:re(),avatar:re()}),de=st({compatConfig:{MODE:3},name:"ACardMeta",props:Ei(),slots:Object,setup(i,t){let{slots:a}=t;const{prefixCls:e}=Gt("card",i);return()=>{const o={[`${e.value}-meta`]:!0},r=Wt(a,i,"avatar"),n=Wt(a,i,"title"),l=Wt(a,i,"description"),d=r?v("div",{class:`${e.value}-meta-avatar`},[r]):null,h=n?v("div",{class:`${e.value}-meta-title`},[n]):null,s=l?v("div",{class:`${e.value}-meta-description`},[l]):null,c=h||s?v("div",{class:`${e.value}-meta-detail`},[h,s]):null;return v("div",{class:o},[d,c])}}}),Mi=()=>({prefixCls:String,hoverable:{type:Boolean,default:!0}}),ue=st({compatConfig:{MODE:3},name:"ACardGrid",__ANT_CARD_GRID:!0,props:Mi(),setup(i,t){let{slots:a}=t;const{prefixCls:e}=Gt("card",i),o=U(()=>({[`${e.value}-grid`]:!0,[`${e.value}-grid-hoverable`]:i.hoverable}));return()=>{var r;return v("div",{class:o.value},[(r=a.default)===null||r===void 0?void 0:r.call(a)])}}});Ot.Meta=de;Ot.Grid=ue;Ot.install=function(i){return i.component(Ot.name,Ot),i.component(de.name,de),i.component(ue.name,ue),i};function Oi(){return wt(this,null,function*(){return Pa.post("/file/getTempToken")})}function Ne(i,t){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);t&&(e=e.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),a.push.apply(a,e)}return a}function da(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ne(Object(a),!0).forEach(function(e){_i(i,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))})}return i}function Ai(i,t){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var e=a.call(i,t);if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function ua(i){var t=Ai(i,"string");return typeof t=="symbol"?t:t+""}function pe(i){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(i)}function zi(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(i,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,ua(e.key),e)}}function Ri(i,t,a){return t&&Be(i.prototype,t),a&&Be(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}function _i(i,t,a){return t=ua(t),t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}function pa(i){return Ii(i)||Ni(i)||Bi(i)||Li()}function Ii(i){if(Array.isArray(i))return fe(i)}function Ni(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Bi(i,t){if(i){if(typeof i=="string")return fe(i,t);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return fe(i,t)}}function fe(i,t){(t==null||t>i.length)&&(t=i.length);for(var a=0,e=new Array(t);a<t;a++)e[a]=i[a];return e}function Li(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te=typeof window!="undefined"&&typeof window.document!="undefined",et=te?window:{},De=te&&et.document.documentElement?"ontouchstart"in et.document.documentElement:!1,$e=te?"PointerEvent"in et:!1,z="cropper",Te="all",fa="crop",ga="move",ma="zoom",gt="e",mt="w",St="s",lt="n",Bt="ne",Lt="nw",Pt="se",Ht="sw",ge="".concat(z,"-crop"),Le="".concat(z,"-disabled"),Y="".concat(z,"-hidden"),Pe="".concat(z,"-hide"),Pi="".concat(z,"-invisible"),Qt="".concat(z,"-modal"),me="".concat(z,"-move"),Yt="".concat(z,"Action"),qt="".concat(z,"Preview"),Ee="crop",va="move",ba="none",ve="crop",be="cropend",ye="cropmove",xe="cropstart",He="dblclick",Hi=De?"touchstart":"mousedown",Wi=De?"touchmove":"mousemove",Xi=De?"touchend touchcancel":"mouseup",We=$e?"pointerdown":Hi,Xe=$e?"pointermove":Wi,je=$e?"pointerup pointercancel":Xi,Ye="ready",ke="resize",Ge="wheel",we="zoom",Ue="image/jpeg",ji=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Yi=/^data:/,ki=/^data:image\/jpeg;base64,/,Gi=/^img|canvas$/i,ya=200,xa=100,Ve={viewMode:0,dragMode:Ee,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ya,minContainerHeight:xa,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ui='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Vi=Number.isNaN||et.isNaN;function T(i){return typeof i=="number"&&!Vi(i)}var Fe=function(t){return t>0&&t<1/0};function se(i){return typeof i=="undefined"}function yt(i){return pe(i)==="object"&&i!==null}var Fi=Object.prototype.hasOwnProperty;function Tt(i){if(!yt(i))return!1;try{var t=i.constructor,a=t.prototype;return t&&a&&Fi.call(a,"isPrototypeOf")}catch(e){return!1}}function j(i){return typeof i=="function"}var qi=Array.prototype.slice;function wa(i){return Array.from?Array.from(i):qi.call(i)}function N(i,t){return i&&j(t)&&(Array.isArray(i)||T(i.length)?wa(i).forEach(function(a,e){t.call(i,a,e,i)}):yt(i)&&Object.keys(i).forEach(function(a){t.call(i,i[a],a,i)})),i}var R=Object.assign||function(t){for(var a=arguments.length,e=new Array(a>1?a-1:0),o=1;o<a;o++)e[o-1]=arguments[o];return yt(t)&&e.length>0&&e.forEach(function(r){yt(r)&&Object.keys(r).forEach(function(n){t[n]=r[n]})}),t},Ki=/\.\d*(?:0|9){12}\d*$/;function At(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Ki.test(i)?Math.round(i*t)/t:i}var Zi=/^width|height|left|top|marginLeft|marginTop$/;function ht(i,t){var a=i.style;N(t,function(e,o){Zi.test(o)&&T(e)&&(e="".concat(e,"px")),a[o]=e})}function Qi(i,t){return i.classList?i.classList.contains(t):i.className.indexOf(t)>-1}function P(i,t){if(t){if(T(i.length)){N(i,function(e){P(e,t)});return}if(i.classList){i.classList.add(t);return}var a=i.className.trim();a?a.indexOf(t)<0&&(i.className="".concat(a," ").concat(t)):i.className=t}}function tt(i,t){if(t){if(T(i.length)){N(i,function(a){tt(a,t)});return}if(i.classList){i.classList.remove(t);return}i.className.indexOf(t)>=0&&(i.className=i.className.replace(t,""))}}function Et(i,t,a){if(t){if(T(i.length)){N(i,function(e){Et(e,t,a)});return}a?P(i,t):tt(i,t)}}var Ji=/([a-z\d])([A-Z])/g;function Me(i){return i.replace(Ji,"$1-$2").toLowerCase()}function Se(i,t){return yt(i[t])?i[t]:i.dataset?i.dataset[t]:i.getAttribute("data-".concat(Me(t)))}function kt(i,t,a){yt(a)?i[t]=a:i.dataset?i.dataset[t]=a:i.setAttribute("data-".concat(Me(t)),a)}function tr(i,t){if(yt(i[t]))try{delete i[t]}catch(a){i[t]=void 0}else if(i.dataset)try{delete i.dataset[t]}catch(a){i.dataset[t]=void 0}else i.removeAttribute("data-".concat(Me(t)))}var Sa=/\s\s*/,Ca=function(){var i=!1;if(te){var t=!1,a=function(){},e=Object.defineProperty({},"once",{get:function(){return i=!0,t},set:function(r){t=r}});et.addEventListener("test",a,e),et.removeEventListener("test",a,e)}return i}();function K(i,t,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=a;t.trim().split(Sa).forEach(function(r){if(!Ca){var n=i.listeners;n&&n[r]&&n[r][a]&&(o=n[r][a],delete n[r][a],Object.keys(n[r]).length===0&&delete n[r],Object.keys(n).length===0&&delete i.listeners)}i.removeEventListener(r,o,e)})}function q(i,t,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=a;t.trim().split(Sa).forEach(function(r){if(e.once&&!Ca){var n=i.listeners,l=n===void 0?{}:n;o=function(){delete l[r][a],i.removeEventListener(r,o,e);for(var h=arguments.length,s=new Array(h),c=0;c<h;c++)s[c]=arguments[c];a.apply(i,s)},l[r]||(l[r]={}),l[r][a]&&i.removeEventListener(r,l[r][a],e),l[r][a]=o,i.listeners=l}i.addEventListener(r,o,e)})}function zt(i,t,a){var e;return j(Event)&&j(CustomEvent)?e=new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!0,!0,a)),i.dispatchEvent(e)}function Da(i){var t=i.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var le=et.location,er=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function qe(i){var t=i.match(er);return t!==null&&(t[1]!==le.protocol||t[2]!==le.hostname||t[3]!==le.port)}function Ke(i){var t="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+t}function Xt(i){var t=i.rotate,a=i.scaleX,e=i.scaleY,o=i.translateX,r=i.translateY,n=[];T(o)&&o!==0&&n.push("translateX(".concat(o,"px)")),T(r)&&r!==0&&n.push("translateY(".concat(r,"px)")),T(t)&&t!==0&&n.push("rotate(".concat(t,"deg)")),T(a)&&a!==1&&n.push("scaleX(".concat(a,")")),T(e)&&e!==1&&n.push("scaleY(".concat(e,")"));var l=n.length?n.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function ar(i){var t=da({},i),a=0;return N(i,function(e,o){delete t[o],N(t,function(r){var n=Math.abs(e.startX-r.startX),l=Math.abs(e.startY-r.startY),d=Math.abs(e.endX-r.endX),h=Math.abs(e.endY-r.endY),s=Math.sqrt(n*n+l*l),c=Math.sqrt(d*d+h*h),u=(c-s)/s;Math.abs(u)>Math.abs(a)&&(a=u)})}),a}function Kt(i,t){var a=i.pageX,e=i.pageY,o={endX:a,endY:e};return t?o:da({startX:a,startY:e},o)}function ir(i){var t=0,a=0,e=0;return N(i,function(o){var r=o.startX,n=o.startY;t+=r,a+=n,e+=1}),t/=e,a/=e,{pageX:t,pageY:a}}function dt(i){var t=i.aspectRatio,a=i.height,e=i.width,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Fe(e),n=Fe(a);if(r&&n){var l=a*t;o==="contain"&&l>e||o==="cover"&&l<e?a=e/t:e=a*t}else r?a=e/t:n&&(e=a*t);return{width:e,height:a}}function rr(i){var t=i.width,a=i.height,e=i.degree;if(e=Math.abs(e)%180,e===90)return{width:a,height:t};var o=e%90*Math.PI/180,r=Math.sin(o),n=Math.cos(o),l=t*n+a*r,d=t*r+a*n;return e>90?{width:d,height:l}:{width:l,height:d}}function nr(i,t,a,e){var o=t.aspectRatio,r=t.naturalWidth,n=t.naturalHeight,l=t.rotate,d=l===void 0?0:l,h=t.scaleX,s=h===void 0?1:h,c=t.scaleY,u=c===void 0?1:c,m=a.aspectRatio,x=a.naturalWidth,$=a.naturalHeight,D=e.fillColor,w=D===void 0?"transparent":D,S=e.imageSmoothingEnabled,b=S===void 0?!0:S,y=e.imageSmoothingQuality,f=y===void 0?"low":y,p=e.maxWidth,C=p===void 0?1/0:p,O=e.maxHeight,B=O===void 0?1/0:O,k=e.minWidth,F=k===void 0?0:k,H=e.minHeight,_=H===void 0?0:H,W=document.createElement("canvas"),L=W.getContext("2d"),X=dt({aspectRatio:m,width:C,height:B}),A=dt({aspectRatio:m,width:F,height:_},"cover"),at=Math.min(X.width,Math.max(A.width,x)),pt=Math.min(X.height,Math.max(A.height,$)),ft=dt({aspectRatio:o,width:C,height:B}),Ut=dt({aspectRatio:o,width:F,height:_},"cover"),Rt=Math.min(ft.width,Math.max(Ut.width,r)),_t=Math.min(ft.height,Math.max(Ut.height,n)),ee=[-Rt/2,-_t/2,Rt,_t];return W.width=At(at),W.height=At(pt),L.fillStyle=w,L.fillRect(0,0,at,pt),L.save(),L.translate(at/2,pt/2),L.rotate(d*Math.PI/180),L.scale(s,u),L.imageSmoothingEnabled=b,L.imageSmoothingQuality=f,L.drawImage.apply(L,[i].concat(pa(ee.map(function(ae){return Math.floor(At(ae))})))),L.restore(),W}var $a=String.fromCharCode;function or(i,t,a){var e="";a+=t;for(var o=t;o<a;o+=1)e+=$a(i.getUint8(o));return e}var sr=/^data:.*,/;function lr(i){var t=i.replace(sr,""),a=atob(t),e=new ArrayBuffer(a.length),o=new Uint8Array(e);return N(o,function(r,n){o[n]=a.charCodeAt(n)}),e}function cr(i,t){for(var a=[],e=8192,o=new Uint8Array(i);o.length>0;)a.push($a.apply(null,wa(o.subarray(0,e)))),o=o.subarray(e);return"data:".concat(t,";base64,").concat(btoa(a.join("")))}function hr(i){var t=new DataView(i),a;try{var e,o,r;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var n=t.byteLength,l=2;l+1<n;){if(t.getUint8(l)===255&&t.getUint8(l+1)===225){o=l;break}l+=1}if(o){var d=o+4,h=o+10;if(or(t,d,4)==="Exif"){var s=t.getUint16(h);if(e=s===18761,(e||s===19789)&&t.getUint16(h+2,e)===42){var c=t.getUint32(h+4,e);c>=8&&(r=h+c)}}}if(r){var u=t.getUint16(r,e),m,x;for(x=0;x<u;x+=1)if(m=r+x*12+2,t.getUint16(m,e)===274){m+=8,a=t.getUint16(m,e),t.setUint16(m,1,e);break}}}catch($){a=1}return a}function dr(i){var t=0,a=1,e=1;switch(i){case 2:a=-1;break;case 3:t=-180;break;case 4:e=-1;break;case 5:t=90,e=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:e}}var ur={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,e=this.container,o=this.cropper,r=Number(a.minContainerWidth),n=Number(a.minContainerHeight);P(o,Y),tt(t,Y);var l={width:Math.max(e.offsetWidth,r>=0?r:ya),height:Math.max(e.offsetHeight,n>=0?n:xa)};this.containerData=l,ht(o,{width:l.width,height:l.height}),P(t,Y),tt(o,Y)},initCanvas:function(){var t=this.containerData,a=this.imageData,e=this.options.viewMode,o=Math.abs(a.rotate)%180===90,r=o?a.naturalHeight:a.naturalWidth,n=o?a.naturalWidth:a.naturalHeight,l=r/n,d=t.width,h=t.height;t.height*l>t.width?e===3?d=t.height*l:h=t.width/l:e===3?h=t.width/l:d=t.height*l;var s={aspectRatio:l,naturalWidth:r,naturalHeight:n,width:d,height:h};this.canvasData=s,this.limited=e===1||e===2,this.limitCanvas(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.left=(t.width-s.width)/2,s.top=(t.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCanvasData=R({},s)},limitCanvas:function(t,a){var e=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,l=e.viewMode,d=r.aspectRatio,h=this.cropped&&n;if(t){var s=Number(e.minCanvasWidth)||0,c=Number(e.minCanvasHeight)||0;l>1?(s=Math.max(s,o.width),c=Math.max(c,o.height),l===3&&(c*d>s?s=c*d:c=s/d)):l>0&&(s?s=Math.max(s,h?n.width:0):c?c=Math.max(c,h?n.height:0):h&&(s=n.width,c=n.height,c*d>s?s=c*d:c=s/d));var u=dt({aspectRatio:d,width:s,height:c});s=u.width,c=u.height,r.minWidth=s,r.minHeight=c,r.maxWidth=1/0,r.maxHeight=1/0}if(a)if(l>(h?0:1)){var m=o.width-r.width,x=o.height-r.height;r.minLeft=Math.min(0,m),r.minTop=Math.min(0,x),r.maxLeft=Math.max(0,m),r.maxTop=Math.max(0,x),h&&this.limited&&(r.minLeft=Math.min(n.left,n.left+(n.width-r.width)),r.minTop=Math.min(n.top,n.top+(n.height-r.height)),r.maxLeft=n.left,r.maxTop=n.top,l===2&&(r.width>=o.width&&(r.minLeft=Math.min(0,m),r.maxLeft=Math.max(0,m)),r.height>=o.height&&(r.minTop=Math.min(0,x),r.maxTop=Math.max(0,x))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height},renderCanvas:function(t,a){var e=this.canvasData,o=this.imageData;if(a){var r=rr({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),n=r.width,l=r.height,d=e.width*(n/e.naturalWidth),h=e.height*(l/e.naturalHeight);e.left-=(d-e.width)/2,e.top-=(h-e.height)/2,e.width=d,e.height=h,e.aspectRatio=n/l,e.naturalWidth=n,e.naturalHeight=l,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,ht(this.canvas,R({width:e.width,height:e.height},Xt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var a=this.canvasData,e=this.imageData,o=e.naturalWidth*(a.width/a.naturalWidth),r=e.naturalHeight*(a.height/a.naturalHeight);R(e,{width:o,height:r,left:(a.width-o)/2,top:(a.height-r)/2}),ht(this.image,R({width:e.width,height:e.height},Xt(R({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,a=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,o=Number(t.autoCropArea)||.8,r={width:a.width,height:a.height};e&&(a.height*e>a.width?r.height=r.width/e:r.width=r.height*e),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*o),r.height=Math.max(r.minHeight,r.height*o),r.left=a.left+(a.width-r.width)/2,r.top=a.top+(a.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=R({},r)},limitCropBox:function(t,a){var e=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,l=this.limited,d=e.aspectRatio;if(t){var h=Number(e.minCropBoxWidth)||0,s=Number(e.minCropBoxHeight)||0,c=l?Math.min(o.width,r.width,r.width+r.left,o.width-r.left):o.width,u=l?Math.min(o.height,r.height,r.height+r.top,o.height-r.top):o.height;h=Math.min(h,o.width),s=Math.min(s,o.height),d&&(h&&s?s*d>h?s=h/d:h=s*d:h?s=h/d:s&&(h=s*d),u*d>c?u=c/d:c=u*d),n.minWidth=Math.min(h,c),n.minHeight=Math.min(s,u),n.maxWidth=c,n.maxHeight=u}a&&(l?(n.minLeft=Math.max(0,r.left),n.minTop=Math.max(0,r.top),n.maxLeft=Math.min(o.width,r.left+r.width)-n.width,n.maxTop=Math.min(o.height,r.top+r.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=o.width-n.width,n.maxTop=o.height-n.height))},renderCropBox:function(){var t=this.options,a=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&kt(this.face,Yt,e.width>=a.width&&e.height>=a.height?ga:Te),ht(this.cropBox,R({width:e.width,height:e.height},Xt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),zt(this.element,ve,this.getData())}},pr={initPreview:function(){var t=this.element,a=this.crossOrigin,e=this.options.preview,o=a?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",n=document.createElement("img");if(a&&(n.crossOrigin=a),n.src=o,n.alt=r,this.viewBox.appendChild(n),this.viewBoxImage=n,!!e){var l=e;typeof e=="string"?l=t.ownerDocument.querySelectorAll(e):e.querySelector&&(l=[e]),this.previews=l,N(l,function(d){var h=document.createElement("img");kt(d,qt,{width:d.offsetWidth,height:d.offsetHeight,html:d.innerHTML}),a&&(h.crossOrigin=a),h.src=o,h.alt=r,h.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',d.innerHTML="",d.appendChild(h)})}},resetPreview:function(){N(this.previews,function(t){var a=Se(t,qt);ht(t,{width:a.width,height:a.height}),t.innerHTML=a.html,tr(t,qt)})},preview:function(){var t=this.imageData,a=this.canvasData,e=this.cropBoxData,o=e.width,r=e.height,n=t.width,l=t.height,d=e.left-a.left-t.left,h=e.top-a.top-t.top;!this.cropped||this.disabled||(ht(this.viewBoxImage,R({width:n,height:l},Xt(R({translateX:-d,translateY:-h},t)))),N(this.previews,function(s){var c=Se(s,qt),u=c.width,m=c.height,x=u,$=m,D=1;o&&(D=u/o,$=r*D),r&&$>m&&(D=m/r,x=o*D,$=m),ht(s,{width:x,height:$}),ht(s.getElementsByTagName("img")[0],R({width:n*D,height:l*D},Xt(R({translateX:-d*D,translateY:-h*D},t))))}))}},fr={bind:function(){var t=this.element,a=this.options,e=this.cropper;j(a.cropstart)&&q(t,xe,a.cropstart),j(a.cropmove)&&q(t,ye,a.cropmove),j(a.cropend)&&q(t,be,a.cropend),j(a.crop)&&q(t,ve,a.crop),j(a.zoom)&&q(t,we,a.zoom),q(e,We,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&q(e,Ge,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&q(e,He,this.onDblclick=this.dblclick.bind(this)),q(t.ownerDocument,Xe,this.onCropMove=this.cropMove.bind(this)),q(t.ownerDocument,je,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&q(window,ke,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,a=this.options,e=this.cropper;j(a.cropstart)&&K(t,xe,a.cropstart),j(a.cropmove)&&K(t,ye,a.cropmove),j(a.cropend)&&K(t,be,a.cropend),j(a.crop)&&K(t,ve,a.crop),j(a.zoom)&&K(t,we,a.zoom),K(e,We,this.onCropStart),a.zoomable&&a.zoomOnWheel&&K(e,Ge,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&K(e,He,this.onDblclick),K(t.ownerDocument,Xe,this.onCropMove),K(t.ownerDocument,je,this.onCropEnd),a.responsive&&K(window,ke,this.onResize)}},gr={resize:function(){if(!this.disabled){var t=this.options,a=this.container,e=this.containerData,o=a.offsetWidth/e.width,r=a.offsetHeight/e.height,n=Math.abs(o-1)>Math.abs(r-1)?o:r;if(n!==1){var l,d;t.restore&&(l=this.getCanvasData(),d=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(N(l,function(h,s){l[s]=h*n})),this.setCropBoxData(N(d,function(h,s){d[s]=h*n})))}}},dblclick:function(){this.disabled||this.options.dragMode===ba||this.setDragMode(Qi(this.dragBox,ge)?va:Ee)},wheel:function(t){var a=this,e=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?o=t.deltaY>0?1:-1:t.wheelDelta?o=-t.wheelDelta/120:t.detail&&(o=t.detail>0?1:-1),this.zoom(-o*e,t)))},cropStart:function(t){var a=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(T(a)&&a!==1||T(e)&&e!==0||t.ctrlKey))){var o=this.options,r=this.pointers,n;t.changedTouches?N(t.changedTouches,function(l){r[l.identifier]=Kt(l)}):r[t.pointerId||0]=Kt(t),Object.keys(r).length>1&&o.zoomable&&o.zoomOnTouch?n=ma:n=Se(t.target,Yt),ji.test(n)&&zt(this.element,xe,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===fa&&(this.cropping=!0,P(this.dragBox,Qt)))}},cropMove:function(t){var a=this.action;if(!(this.disabled||!a)){var e=this.pointers;t.preventDefault(),zt(this.element,ye,{originalEvent:t,action:a})!==!1&&(t.changedTouches?N(t.changedTouches,function(o){R(e[o.identifier]||{},Kt(o,!0))}):R(e[t.pointerId||0]||{},Kt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var a=this.action,e=this.pointers;t.changedTouches?N(t.changedTouches,function(o){delete e[o.identifier]}):delete e[t.pointerId||0],a&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,Et(this.dragBox,Qt,this.cropped&&this.options.modal)),zt(this.element,be,{originalEvent:t,action:a}))}}},mr={change:function(t){var a=this.options,e=this.canvasData,o=this.containerData,r=this.cropBoxData,n=this.pointers,l=this.action,d=a.aspectRatio,h=r.left,s=r.top,c=r.width,u=r.height,m=h+c,x=s+u,$=0,D=0,w=o.width,S=o.height,b=!0,y;!d&&t.shiftKey&&(d=c&&u?c/u:1),this.limited&&($=r.minLeft,D=r.minTop,w=$+Math.min(o.width,e.width,e.left+e.width),S=D+Math.min(o.height,e.height,e.top+e.height));var f=n[Object.keys(n)[0]],p={x:f.endX-f.startX,y:f.endY-f.startY},C=function(B){switch(B){case gt:m+p.x>w&&(p.x=w-m);break;case mt:h+p.x<$&&(p.x=$-h);break;case lt:s+p.y<D&&(p.y=D-s);break;case St:x+p.y>S&&(p.y=S-x);break}};switch(l){case Te:h+=p.x,s+=p.y;break;case gt:if(p.x>=0&&(m>=w||d&&(s<=D||x>=S))){b=!1;break}C(gt),c+=p.x,c<0&&(l=mt,c=-c,h-=c),d&&(u=c/d,s+=(r.height-u)/2);break;case lt:if(p.y<=0&&(s<=D||d&&(h<=$||m>=w))){b=!1;break}C(lt),u-=p.y,s+=p.y,u<0&&(l=St,u=-u,s-=u),d&&(c=u*d,h+=(r.width-c)/2);break;case mt:if(p.x<=0&&(h<=$||d&&(s<=D||x>=S))){b=!1;break}C(mt),c-=p.x,h+=p.x,c<0&&(l=gt,c=-c,h-=c),d&&(u=c/d,s+=(r.height-u)/2);break;case St:if(p.y>=0&&(x>=S||d&&(h<=$||m>=w))){b=!1;break}C(St),u+=p.y,u<0&&(l=lt,u=-u,s-=u),d&&(c=u*d,h+=(r.width-c)/2);break;case Bt:if(d){if(p.y<=0&&(s<=D||m>=w)){b=!1;break}C(lt),u-=p.y,s+=p.y,c=u*d}else C(lt),C(gt),p.x>=0?m<w?c+=p.x:p.y<=0&&s<=D&&(b=!1):c+=p.x,p.y<=0?s>D&&(u-=p.y,s+=p.y):(u-=p.y,s+=p.y);c<0&&u<0?(l=Ht,u=-u,c=-c,s-=u,h-=c):c<0?(l=Lt,c=-c,h-=c):u<0&&(l=Pt,u=-u,s-=u);break;case Lt:if(d){if(p.y<=0&&(s<=D||h<=$)){b=!1;break}C(lt),u-=p.y,s+=p.y,c=u*d,h+=r.width-c}else C(lt),C(mt),p.x<=0?h>$?(c-=p.x,h+=p.x):p.y<=0&&s<=D&&(b=!1):(c-=p.x,h+=p.x),p.y<=0?s>D&&(u-=p.y,s+=p.y):(u-=p.y,s+=p.y);c<0&&u<0?(l=Pt,u=-u,c=-c,s-=u,h-=c):c<0?(l=Bt,c=-c,h-=c):u<0&&(l=Ht,u=-u,s-=u);break;case Ht:if(d){if(p.x<=0&&(h<=$||x>=S)){b=!1;break}C(mt),c-=p.x,h+=p.x,u=c/d}else C(St),C(mt),p.x<=0?h>$?(c-=p.x,h+=p.x):p.y>=0&&x>=S&&(b=!1):(c-=p.x,h+=p.x),p.y>=0?x<S&&(u+=p.y):u+=p.y;c<0&&u<0?(l=Bt,u=-u,c=-c,s-=u,h-=c):c<0?(l=Pt,c=-c,h-=c):u<0&&(l=Lt,u=-u,s-=u);break;case Pt:if(d){if(p.x>=0&&(m>=w||x>=S)){b=!1;break}C(gt),c+=p.x,u=c/d}else C(St),C(gt),p.x>=0?m<w?c+=p.x:p.y>=0&&x>=S&&(b=!1):c+=p.x,p.y>=0?x<S&&(u+=p.y):u+=p.y;c<0&&u<0?(l=Lt,u=-u,c=-c,s-=u,h-=c):c<0?(l=Ht,c=-c,h-=c):u<0&&(l=Bt,u=-u,s-=u);break;case ga:this.move(p.x,p.y),b=!1;break;case ma:this.zoom(ar(n),t),b=!1;break;case fa:if(!p.x||!p.y){b=!1;break}y=Da(this.cropper),h=f.startX-y.left,s=f.startY-y.top,c=r.minWidth,u=r.minHeight,p.x>0?l=p.y>0?Pt:Bt:p.x<0&&(h-=c,l=p.y>0?Ht:Lt),p.y<0&&(s-=u),this.cropped||(tt(this.cropBox,Y),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(r.width=c,r.height=u,r.left=h,r.top=s,this.action=l,this.renderCropBox()),N(n,function(O){O.startX=O.endX,O.startY=O.endY})}},vr={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&P(this.dragBox,Qt),tt(this.cropBox,Y),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=R({},this.initialImageData),this.canvasData=R({},this.initialCanvasData),this.cropBoxData=R({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(R(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),tt(this.dragBox,Qt),P(this.cropBox,Y)),this},replace:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,N(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,tt(this.cropper,Le)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,P(this.cropper,Le)),this},destroy:function(){var t=this.element;return t[z]?(t[z]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,o=e.left,r=e.top;return this.moveTo(se(t)?t:o+Number(t),se(a)?a:r+Number(a))},moveTo:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,o=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(T(t)&&(e.left=t,o=!0),T(a)&&(e.top=a,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(t,a){var e=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(e.width*t/e.naturalWidth,null,a)},zoomTo:function(t,a,e){var o=this.options,r=this.canvasData,n=r.width,l=r.height,d=r.naturalWidth,h=r.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&o.zoomable){var s=d*t,c=h*t;if(zt(this.element,we,{ratio:t,oldRatio:n/d,originalEvent:e})===!1)return this;if(e){var u=this.pointers,m=Da(this.cropper),x=u&&Object.keys(u).length?ir(u):{pageX:e.pageX,pageY:e.pageY};r.left-=(s-n)*((x.pageX-m.left-r.left)/n),r.top-=(c-l)*((x.pageY-m.top-r.top)/l)}else Tt(a)&&T(a.x)&&T(a.y)?(r.left-=(s-n)*((a.x-r.left)/n),r.top-=(c-l)*((a.y-r.top)/l)):(r.left-=(s-n)/2,r.top-=(c-l)/2);r.width=s,r.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),T(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var a=this.imageData.scaleY;return this.scale(t,T(a)?a:1)},scaleY:function(t){var a=this.imageData.scaleX;return this.scale(T(a)?a:1,t)},scale:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,o=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(T(t)&&(e.scaleX=t,o=!0),T(a)&&(e.scaleY=a,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.options,e=this.imageData,o=this.canvasData,r=this.cropBoxData,n;if(this.ready&&this.cropped){n={x:r.left-o.left,y:r.top-o.top,width:r.width,height:r.height};var l=e.width/e.naturalWidth;if(N(n,function(s,c){n[c]=s/l}),t){var d=Math.round(n.y+n.height),h=Math.round(n.x+n.width);n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=h-n.x,n.height=d-n.y}}else n={x:0,y:0,width:0,height:0};return a.rotatable&&(n.rotate=e.rotate||0),a.scalable&&(n.scaleX=e.scaleX||1,n.scaleY=e.scaleY||1),n},setData:function(t){var a=this.options,e=this.imageData,o=this.canvasData,r={};if(this.ready&&!this.disabled&&Tt(t)){var n=!1;a.rotatable&&T(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,n=!0),a.scalable&&(T(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,n=!0),T(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var l=e.width/e.naturalWidth;T(t.x)&&(r.left=t.x*l+o.left),T(t.y)&&(r.top=t.y*l+o.top),T(t.width)&&(r.width=t.width*l),T(t.height)&&(r.height=t.height*l),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?R({},this.containerData):{}},getImageData:function(){return this.sized?R({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&N(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(t){var a=this.canvasData,e=a.aspectRatio;return this.ready&&!this.disabled&&Tt(t)&&(T(t.left)&&(a.left=t.left),T(t.top)&&(a.top=t.top),T(t.width)?(a.width=t.width,a.height=t.width/e):T(t.height)&&(a.height=t.height,a.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,a;return this.ready&&this.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(t){var a=this.cropBoxData,e=this.options.aspectRatio,o,r;return this.ready&&this.cropped&&!this.disabled&&Tt(t)&&(T(t.left)&&(a.left=t.left),T(t.top)&&(a.top=t.top),T(t.width)&&t.width!==a.width&&(o=!0,a.width=t.width),T(t.height)&&t.height!==a.height&&(r=!0,a.height=t.height),e&&(o?a.height=a.width/e:r&&(a.width=a.height*e)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,e=nr(this.image,this.imageData,a,t);if(!this.cropped)return e;var o=this.getData(t.rounded),r=o.x,n=o.y,l=o.width,d=o.height,h=e.width/Math.floor(a.naturalWidth);h!==1&&(r*=h,n*=h,l*=h,d*=h);var s=l/d,c=dt({aspectRatio:s,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=dt({aspectRatio:s,width:t.minWidth||0,height:t.minHeight||0},"cover"),m=dt({aspectRatio:s,width:t.width||(h!==1?e.width:l),height:t.height||(h!==1?e.height:d)}),x=m.width,$=m.height;x=Math.min(c.width,Math.max(u.width,x)),$=Math.min(c.height,Math.max(u.height,$));var D=document.createElement("canvas"),w=D.getContext("2d");D.width=At(x),D.height=At($),w.fillStyle=t.fillColor||"transparent",w.fillRect(0,0,x,$);var S=t.imageSmoothingEnabled,b=S===void 0?!0:S,y=t.imageSmoothingQuality;w.imageSmoothingEnabled=b,y&&(w.imageSmoothingQuality=y);var f=e.width,p=e.height,C=r,O=n,B,k,F,H,_,W;C<=-l||C>f?(C=0,B=0,F=0,_=0):C<=0?(F=-C,C=0,B=Math.min(f,l+C),_=B):C<=f&&(F=0,B=Math.min(l,f-C),_=B),B<=0||O<=-d||O>p?(O=0,k=0,H=0,W=0):O<=0?(H=-O,O=0,k=Math.min(p,d+O),W=k):O<=p&&(H=0,k=Math.min(d,p-O),W=k);var L=[C,O,B,k];if(_>0&&W>0){var X=x/l;L.push(F*X,H*X,_*X,W*X)}return w.drawImage.apply(w,[e].concat(pa(L.map(function(A){return Math.floor(At(A))})))),D},setAspectRatio:function(t){var a=this.options;return!this.disabled&&!se(t)&&(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var a=this.options,e=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var r=t===Ee,n=a.movable&&t===va;t=r||n?t:ba,a.dragMode=t,kt(e,Yt,t),Et(e,ge,r),Et(e,me,n),a.cropBoxMovable||(kt(o,Yt,t),Et(o,ge,r),Et(o,me,n))}return this}},br=et.Cropper,Ta=function(){function i(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zi(this,i),!t||!Gi.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=R({},Ve,Tt(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Ri(i,[{key:"init",value:function(){var a=this.element,e=a.tagName.toLowerCase(),o;if(!a[z]){if(a[z]=this,e==="img"){if(this.isImg=!0,o=a.getAttribute("src")||"",this.originalUrl=o,!o)return;o=a.src}else e==="canvas"&&window.HTMLCanvasElement&&(o=a.toDataURL());this.load(o)}}},{key:"load",value:function(a){var e=this;if(a){this.url=a,this.imageData={};var o=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Yi.test(a)){ki.test(a)?this.read(lr(a)):this.clone();return}var n=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=l,n.onerror=l,n.ontimeout=l,n.onprogress=function(){n.getResponseHeader("content-type")!==Ue&&n.abort()},n.onload=function(){e.read(n.response)},n.onloadend=function(){e.reloading=!1,e.xhr=null},r.checkCrossOrigin&&qe(a)&&o.crossOrigin&&(a=Ke(a)),n.open("GET",a,!0),n.responseType="arraybuffer",n.withCredentials=o.crossOrigin==="use-credentials",n.send()}}},{key:"read",value:function(a){var e=this.options,o=this.imageData,r=hr(a),n=0,l=1,d=1;if(r>1){this.url=cr(a,Ue);var h=dr(r);n=h.rotate,l=h.scaleX,d=h.scaleY}e.rotatable&&(o.rotate=n),e.scalable&&(o.scaleX=l,o.scaleY=d),this.clone()}},{key:"clone",value:function(){var a=this.element,e=this.url,o=a.crossOrigin,r=e;this.options.checkCrossOrigin&&qe(e)&&(o||(o="anonymous"),r=Ke(e)),this.crossOrigin=o,this.crossOriginUrl=r;var n=document.createElement("img");o&&(n.crossOrigin=o),n.src=r||e,n.alt=a.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),P(n,Pe),a.parentNode.insertBefore(n,a.nextSibling)}},{key:"start",value:function(){var a=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var o=et.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(et.navigator.userAgent),r=function(h,s){R(a.imageData,{naturalWidth:h,naturalHeight:s,aspectRatio:h/s}),a.initialImageData=R({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(e.naturalWidth&&!o){r(e.naturalWidth,e.naturalHeight);return}var n=document.createElement("img"),l=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){r(n.width,n.height),o||l.removeChild(n)},n.src=e.src,o||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",l.appendChild(n))}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var a=this.element,e=this.options,o=this.image,r=a.parentNode,n=document.createElement("div");n.innerHTML=Ui;var l=n.querySelector(".".concat(z,"-container")),d=l.querySelector(".".concat(z,"-canvas")),h=l.querySelector(".".concat(z,"-drag-box")),s=l.querySelector(".".concat(z,"-crop-box")),c=s.querySelector(".".concat(z,"-face"));this.container=r,this.cropper=l,this.canvas=d,this.dragBox=h,this.cropBox=s,this.viewBox=l.querySelector(".".concat(z,"-view-box")),this.face=c,d.appendChild(o),P(a,Y),r.insertBefore(l,a.nextSibling),tt(o,Pe),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,P(s,Y),e.guides||P(s.getElementsByClassName("".concat(z,"-dashed")),Y),e.center||P(s.getElementsByClassName("".concat(z,"-center")),Y),e.background&&P(l,"".concat(z,"-bg")),e.highlight||P(c,Pi),e.cropBoxMovable&&(P(c,me),kt(c,Yt,Te)),e.cropBoxResizable||(P(s.getElementsByClassName("".concat(z,"-line")),Y),P(s.getElementsByClassName("".concat(z,"-point")),Y)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),j(e.ready)&&q(a,Ye,e.ready,{once:!0}),zt(a,Ye)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),tt(this.element,Y)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=br,i}},{key:"setDefaults",value:function(a){R(Ve,Tt(a)&&a)}}])}();R(Ta.prototype,ur,pr,fr,gr,mr,vr);const yr=["alt","crossorigin","src"],Ze="cropper-image",xr=st({name:"CropperImage",__name:"cropper",props:{alt:{default:"",type:String},circled:{default:!1,type:Boolean},crossorigin:{default:void 0,type:String},height:{default:"360px",type:[String,Number]},imageStyle:{default:()=>({}),type:Object},options:{default:()=>({}),type:Object},realTimePreview:{default:!0,type:Boolean},src:{required:!0,type:String}},emits:["cropend","ready","cropendError","readyError"],setup(i,{emit:t}){const a=i,e=t,o={aspectRatio:1,autoCrop:!0,background:!0,center:!0,checkCrossOrigin:!1,checkOrientation:!0,cropBoxMovable:!0,cropBoxResizable:!0,guides:!0,highlight:!0,modal:!0,movable:!0,responsive:!0,restore:!0,rotatable:!0,scalable:!0,toggleDragModeOnDblclick:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0},r=Va(),n=bt(),l=bt(),d=bt(!1),h=Fa(x,80),s=U(()=>xt({height:a.height,maxWidth:"100%"},a.imageStyle)),c=U(()=>[Ze,r.class,{[`${Ze}--circled`]:a.circled}]),u=U(()=>({height:`${`${a.height}`.replace(/px/,"")}px`}));Ce(m),ra(()=>{var w;(w=l.value)==null||w.destroy()});function m(){return wt(this,null,function*(){const w=g(n);if(w){try{(yield fetch(a.src)).status!==200&&e("readyError")}catch(S){e("readyError")}l.value=new Ta(w,xt(Ft(xt({},o),{crop(){h()},cropmove(){h()},ready:()=>{d.value=!0,x(),e("ready",l.value)},zoom(){h()}}),a.options))}})}function x(){a.realTimePreview&&$()}function $(){if(!l.value)return;const w=l.value.getData();(a.circled?D():l.value.getCroppedCanvas()).toBlob(b=>{if(!b)return;const y=new FileReader;y.readAsDataURL(b),y.onloadend=f=>{var p,C;e("cropend",{imgBase64:(C=(p=f.target)==null?void 0:p.result)!=null?C:"",imgInfo:w})},y.onerror=()=>{e("cropendError")}},"image/png")}function D(){const w=l.value.getCroppedCanvas(),S=document.createElement("canvas"),b=S.getContext("2d"),y=w.width,f=w.height;return S.width=y,S.height=f,b.imageSmoothingEnabled=!0,b.drawImage(w,0,0,y,f),b.globalCompositeOperation="destination-in",b.beginPath(),b.arc(y/2,f/2,Math.min(y,f)/2,0,2*Math.PI,!0),b.fill(),S}return(w,S)=>(V(),ut("div",{class:J(c.value),style:$t(u.value)},[qa(M("img",{ref_key:"imgElRef",ref:n,alt:i.alt,crossorigin:i.crossorigin,src:i.src,style:$t(s.value)},null,12,yr),[[Ha,d.value]])],6))}}),wr=["alt","src"],vt="cropper-am",Sr=st({name:"CropperModal",__name:"cropper-modal",props:{circled:{default:!0,type:Boolean},size:{default:0,type:Number},src:{default:"",type:String},uploadApi:{required:!0,type:Function}},emits:["uploadSuccess","uploadError","register"],setup(i,{emit:t}){const a=i,e=t;let o="";const r=bt(a.src||""),n=bt(""),l=bt();let d=1,h=1;const[s,c]=sa({onConfirm:S,onOpenChange(y){y?u(!0):(n.value="",u(!1))}});function u(y){c.setState({confirmLoading:y,loading:y})}function m(y){if(a.size>0&&y.size>1024*1024*a.size)return e("uploadError",{msg:G("component.cropper.imageTooBig")}),!1;const f=new FileReader;return f.readAsDataURL(y),r.value="",n.value="",f.addEventListener("load",p=>{var C,O;r.value=(O=(C=p.target)==null?void 0:C.result)!=null?O:"",y.name&&y.name.trim()!==""?o=y.name:b(y.type)}),!1}function x({imgBase64:y}){n.value=y}function $(y){l.value=y,u(!1)}function D(){u(!1)}function w(y,f){var p,C;y==="scaleX"&&(d=f=d===-1?1:-1),y==="scaleY"&&(h=f=h===-1?1:-1),(C=(p=l==null?void 0:l.value)==null?void 0:p[y])==null||C.call(p,f)}function S(){return wt(this,null,function*(){const y=a.uploadApi;if(y&&Wa(y)){if(!n.value){ia.warn("");return}const f=li(n.value);try{u(!0);let p=o;(!p||p.trim()==="")&&(b(f.type),p=o);const C=yield y({file:f,filename:p,name:"file"});e("uploadSuccess",{data:C.url,source:n.value}),c.close()}finally{u(!1)}}})}function b(y){const p={"image/jpeg":"jpg","image/jpg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp","image/bmp":"bmp","image/svg+xml":"svg"}[y]||"bin";o=`cropped_image_${Date.now()}.${p}`}return(y,f)=>(V(),jt(g(s),oa(y.$attrs,{"confirm-text":g(G)("component.cropper.okText"),"fullscreen-button":!1,title:g(G)("component.cropper.modalTitle"),class:"w-[800px]"}),{default:E(()=>[M("div",{class:J(vt)},[M("div",{class:J([`${vt}-left`,"w-full"])},[M("div",{class:J(`${vt}-cropper`)},[r.value?(V(),jt(xr,{key:0,circled:i.circled,src:r.value,crossorigin:"anonymous",height:"300px",onCropend:x,onReady:$,onReadyError:D},null,8,["circled","src"])):Mt("",!0)],2),M("div",{class:J(`${vt}-toolbar`)},[v(g(Ja),{"before-upload":m,"file-list":[],accept:"image/*"},{default:E(()=>[v(g(rt),{title:g(G)("component.cropper.selectImage"),placement:"bottom"},{default:E(()=>[v(g(nt),{size:"small",type:"primary"},{icon:E(()=>[...f[7]||(f[7]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[ant-design--upload-outlined]"})],-1)])]),_:1})]),_:1},8,["title"])]),_:1}),v(g(ti),null,{default:E(()=>[v(g(rt),{title:g(G)("component.cropper.btn_reset"),placement:"bottom"},{default:E(()=>[v(g(nt),{disabled:!r.value,size:"small",type:"primary",onClick:f[0]||(f[0]=p=>w("reset"))},{icon:E(()=>[...f[8]||(f[8]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[ant-design--reload-outlined]"})],-1)])]),_:1},8,["disabled"])]),_:1},8,["title"]),v(g(rt),{title:g(G)("component.cropper.btn_rotate_left"),placement:"bottom"},{default:E(()=>[v(g(nt),{disabled:!r.value,size:"small",type:"primary",onClick:f[1]||(f[1]=p=>w("rotate",-45))},{icon:E(()=>[...f[9]||(f[9]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[ant-design--rotate-left-outlined]"})],-1)])]),_:1},8,["disabled"])]),_:1},8,["title"]),v(g(rt),{title:g(G)("component.cropper.btn_rotate_right"),placement:"bottom"},{default:E(()=>[v(g(nt),{disabled:!r.value,"pre-icon":"ant-design:rotate-right-outlined",size:"small",type:"primary",onClick:f[2]||(f[2]=p=>w("rotate",45))},{icon:E(()=>[...f[10]||(f[10]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[ant-design--rotate-right-outlined]"})],-1)])]),_:1},8,["disabled"])]),_:1},8,["title"]),v(g(rt),{title:g(G)("component.cropper.btn_scale_x"),placement:"bottom"},{default:E(()=>[v(g(nt),{disabled:!r.value,size:"small",type:"primary",onClick:f[3]||(f[3]=p=>w("scaleX"))},{icon:E(()=>[...f[11]||(f[11]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[vaadin--arrows-long-h]"})],-1)])]),_:1},8,["disabled"])]),_:1},8,["title"]),v(g(rt),{title:g(G)("component.cropper.btn_scale_y"),placement:"bottom"},{default:E(()=>[v(g(nt),{disabled:!r.value,size:"small",type:"primary",onClick:f[4]||(f[4]=p=>w("scaleY"))},{icon:E(()=>[...f[12]||(f[12]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[vaadin--arrows-long-v]"})],-1)])]),_:1},8,["disabled"])]),_:1},8,["title"]),v(g(rt),{title:g(G)("component.cropper.btn_zoom_in"),placement:"bottom"},{default:E(()=>[v(g(nt),{disabled:!r.value,size:"small",type:"primary",onClick:f[5]||(f[5]=p=>w("zoom",.1))},{icon:E(()=>[...f[13]||(f[13]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[ant-design--zoom-in-outlined]"})],-1)])]),_:1},8,["disabled"])]),_:1},8,["title"]),v(g(rt),{title:g(G)("component.cropper.btn_zoom_out"),placement:"bottom"},{default:E(()=>[v(g(nt),{disabled:!r.value,size:"small",type:"primary",onClick:f[6]||(f[6]=p=>w("zoom",-.1))},{icon:E(()=>[...f[14]||(f[14]=[M("div",{class:"flex items-center justify-center"},[M("span",{class:"icon-[ant-design--zoom-out-outlined]"})],-1)])]),_:1},8,["disabled"])]),_:1},8,["title"])]),_:1})],2)],2),M("div",{class:J(`${vt}-right`)},[M("div",{class:J(`${vt}-preview`)},[n.value?(V(),ut("img",{key:0,alt:g(G)("component.cropper.preview"),src:n.value},null,8,wr)):Mt("",!0)],2),n.value?(V(),ut("div",{key:0,class:J(`${vt}-group`)},[v(g(ot),{src:n.value,size:"large"},null,8,["src"]),v(g(ot),{size:48,src:n.value},null,8,["src"]),v(g(ot),{size:64,src:n.value},null,8,["src"]),v(g(ot),{size:80,src:n.value},null,8,["src"])],2)):Mt("",!0)],2)])]),_:1},16,["confirm-text","title"]))}}),Cr=["src"],Zt="cropper-avatar",Dr=st({name:"CropperAvatar",__name:"cropper-avatar",props:{btnProps:{default:()=>({}),type:Object},btnText:{default:"",type:String},showBtn:{default:!0,type:Boolean},size:{default:5,type:Number},uploadApi:{default:()=>{},type:Function},uploadType:{default:"oss",type:String},getOssInfo:{default:()=>{},type:Function},value:{default:"",type:String},width:{default:"200px",type:[String,Number]}},emits:["update:value","change"],setup(i,{expose:t,emit:a}){const e=i,o=a,r=U(()=>e.uploadType==="direct"&&!e.uploadApi?(console.error('When uploadType is "direct", uploadApi is required'),!1):e.uploadType==="oss"&&!e.getOssInfo?(console.error('When uploadType is "oss", getOssInfo is required'),!1):!0),n=bt(e.value||""),[l,d]=sa({connectedComponent:Sr}),h=U(()=>[Zt]),s=U(()=>`${`${e.width}`.replace(/px/,"")}px`),c=U(()=>`${Number.parseInt(`${e.width}`.replace(/px/,""))/2}px`),u=U(()=>({width:g(s)})),m=U(()=>({height:g(s),width:g(s)}));na(()=>{n.value=e.value||""}),ce(()=>n.value,S=>{o("update:value",S)});function x(f){return wt(this,arguments,function*({file:S,filename:b,name:y}){if(!r.value)throw new Error("Invalid props configuration");if(e.uploadType==="oss"){const p=yield e.getOssInfo();return new Promise((C,O)=>{Ka(new File([S],b,{type:S.type}),p,B=>C({url:B})).catch(O)})}else return e.uploadApi({file:S,filename:b,name:y})})}function $({data:S,source:b}){n.value=b,o("change",{data:S,source:b})}const D=()=>d.close(),w=()=>d.open();return t({closeModal:D,openModal:w}),(S,b)=>(V(),ut("div",{class:J(h.value),style:$t(u.value)},[M("div",{class:J(`${Zt}-image-wrapper`),style:$t(m.value),onClick:w},[M("div",{class:J(`${Zt}-image-mask`),style:$t(m.value)},[M("span",{style:$t(Ft(xt({},m.value),{width:`${c.value}`,height:`${c.value}`,lineHeight:`${c.value}`})),class:"icon-[ant-design--cloud-upload-outlined] text-[#d6d6d6]"},null,4)],6),n.value?(V(),ut("img",{key:0,src:n.value,alt:"avatar"},null,8,Cr)):Mt("",!0)],6),i.showBtn?(V(),jt(g(nt),oa({key:0,class:`${Zt}-upload-btn`,onClick:w},i.btnProps),{default:E(()=>[Z(Q(i.btnText?i.btnText:g(G)("component.cropper.selectImage")),1)]),_:1},16,["class"])):Mt("",!0),v(g(l),{size:i.size,"upload-api":x,src:n.value,onUploadSuccess:$},null,8,["size","src"])],6))}}),$r=Xa(Dr,[["__scopeId","data-v-3103f27f"]]),Tr={key:0,class:"flex flex-col items-center gap-[24px]"},Er={class:"flex flex-col items-center gap-[20px]"},Mr={class:"flex flex-col items-center gap-[8px]"},Or={class:"text-foreground text-xl font-bold"},Ar={class:"w-full px-[24px]"},Gr=st({__name:"profile-panel",setup(i){const t=ja(),{updateUser:a}=ka(),e=U(()=>{var n;return((n=t.userInfo)==null?void 0:n.photo)||Za.app.defaultAvatar});function o(n){const l=Ya.find(d=>d.value===n);return(l==null?void 0:l.color)||"blue"}function r(n){return wt(this,null,function*(){(yield a(Ft(xt({},t.userInfo),{photo:n.data})))&&ia.success("")})}return(n,l)=>(V(),jt(g(Ot),{loading:!g(t).userInfo,class:"h-full lg:w-1/3"},{default:E(()=>{var d,h;return[g(t).userInfo?(V(),ut("div",Tr,[M("div",Er,[v(g(rt),{title:""},{default:E(()=>[v(g($r),{"show-btn":!1,"get-oss-info":g(Oi),value:e.value,width:"120",onChange:r},null,8,["get-oss-info","value"])]),_:1}),M("div",Mr,[M("span",Or,Q((h=(d=g(t).userInfo)==null?void 0:d.nickname)!=null?h:""),1)])]),M("div",Ar,[v(g(ii),{column:1,bordered:"",size:"small"},{default:E(()=>[v(g(it),{label:"","label-style":{width:"120px"}},{default:E(()=>{var s;return[Z(Q((s=g(t).userInfo)==null?void 0:s.account),1)]}),_:1}),v(g(it),{label:""},{default:E(()=>{var s;return[Z(Q((s=g(t).userInfo)==null?void 0:s.name),1)]}),_:1}),v(g(it),{label:""},{default:E(()=>{var s;return[Z(Q((s=g(t).userInfo)==null?void 0:s.nickname),1)]}),_:1}),v(g(it),{label:""},{default:E(()=>[v(g(ne),{color:"processing"},{default:E(()=>{var s;return[Z(Q(((s=g(t).userInfo)==null?void 0:s.deptName)||"--"),1)]}),_:1})]),_:1}),v(g(it),{label:""},{default:E(()=>[v(g(ne),{color:"processing"},{default:E(()=>{var s;return[Z(Q(((s=g(t).userInfo)==null?void 0:s.positionName)||"--"),1)]}),_:1})]),_:1}),v(g(it),{label:""},{default:E(()=>{var s,c;return[(s=g(t).userInfo)!=null&&s.roleList&&g(t).userInfo.roleList.length>0?(V(!0),ut(Ie,{key:0},Qa((c=g(t).userInfo)==null?void 0:c.roleList,u=>(V(),jt(g(ne),{key:u.roleName,color:o(u.dataScope),style:{"margin-right":"4px"}},{default:E(()=>[Z(Q(u.roleName),1)]),_:2},1032,["color"]))),128)):(V(),ut(Ie,{key:1},[Z(" -- ")],64))]}),_:1}),v(g(it),{label:""},{default:E(()=>{var s;return[Z(Q(((s=g(t).userInfo)==null?void 0:s.phone)||"--"),1)]}),_:1}),v(g(it),{label:""},{default:E(()=>{var s;return[Z(Q(((s=g(t).userInfo)==null?void 0:s.email)||"--"),1)]}),_:1}),v(g(it),{label:""},{default:E(()=>{var s;return[Z(Q(((s=g(t).userInfo)==null?void 0:s.updateTime)||"--"),1)]}),_:1})]),_:1})])])):Mt("",!0)]}),_:1},8,["loading"]))}});export{Gr as _};
