var O=Object.defineProperty,v=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var T=(i,e,t)=>e in i?O(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,r=(i,e)=>{for(var t in e||(e={}))B.call(e,t)&&T(i,t,e[t]);if(g)for(var t of g(e))N.call(e,t)&&T(i,t,e[t]);return i},P=(i,e)=>v(i,k(e));var S=(i,e,t)=>new Promise((u,f)=>{var m=l=>{try{a(t.next(l))}catch(n){f(n)}},w=l=>{try{a(t.throw(l))}catch(n){f(n)}},a=l=>l.done?u(l.value):Promise.resolve(l.value).then(m,w);a((t=t.apply(i,e)).next())});import{W as x}from"./index-C4NAiFfA.js";import{dI as F,dJ as D,dz as L,a7 as I}from"./bootstrap-DjYyHEgg.js";import{F as M}from"./table-FRaKquww.js";import{u as j}from"./useDownLoad-Cw45s4VH.js";import{u as G}from"./useShopCheck-DKIjDUfz.js";import{ci as y,m as V,b9 as z,aa as E,ab as s,b2 as c,bJ as h,u as d,ac as J,ai as Y,j as q}from"../jse/index-index-rmdNY63r.js";import{b as H,a as $}from"./contast-C3bEivmW.js";import{u as W}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as K}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{_ as U}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import"./fileTransfer-p8-3apt7.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:Q}=W(),p=[{label:"交易成功",value:1},{label:"TOB失败流水",value:2},{label:"TOB重复流水",value:3},{label:"特殊差异数据",value:4},{label:"TOB赠送及拼团流水",value:5}],R={toolbarConfig:{resizable:!0},columns:[{field:"seq",title:"序号",type:"seq",width:70,fixed:"left"},{field:"tobOrderNo",title:"TOB订单号",width:240},{field:"tmallOrderNo",title:"	天猫订单号",width:240},{field:"transactionTime",title:"交易时间（腾讯）",width:200},{field:"transactionTimeAli",title:"交易时间（支付宝）",width:200},{field:"productActivityPrice",title:"商品活动价(每月计划TOC售卖价)",width:245},{field:"privateCoupon",title:"私密优惠券(每月特殊活动发放，负数代表原价支付需调账)",width:245},{field:"platformSubsidy",title:"平台补贴",width:180},{field:"platformSubsidyRefund",title:"平台补贴退款",width:180},{field:"limitedTimeSubsidy",title:"秒杀补贴",width:180},{field:"goldCoins",title:"淘金币",width:150},{field:"goldCoinsRefund",title:"淘金币退款",width:150},{field:"farmSubsidy",title:"芭芭农场砍价补贴",width:150},{field:"farmSubsidyRefund",title:"芭芭农场砍价补贴退款",width:150},{field:"jfbAmount",title:"集分宝",width:150},{field:"hybAmount",title:"惠营宝",width:150},{title:"技术服务费_扣款",children:[{field:"techFeeAutoRenewal",title:"连包自动续订_alicom",width:180},{field:"techFeeBasicSoftware",title:"基础软件服务费_基础软件",width:180},{field:"techFeeDigitalLifeNew",title:"数字生活类目_天猫佣金(新)",width:160},{field:"techFeeRechargeSoftwareNew",title:"各种充值软件服务费(新)",width:160},{field:"techFeeStudentPrice",title:"学生价技术服务费",width:160},{field:"techFeeTmallPoints",title:"天猫返点积分_代扣返点积分",width:185},{field:"techFeeConsumerExper",title:"消费者体验提升计划服务费",width:160}]},{title:"达人佣金_扣款",children:[{field:"kolFeeSubsidy",title:"百亿补贴_全渠道",width:180},{field:"kolFeeLiveSubsidy",title:"百亿补贴_直播",width:180},{field:"kolFeeJhs",title:"聚划算",width:180},{field:"kolFeeTcpLive",title:"TCP直播达人_淘宝内容推广服务费",width:180},{field:"kolFeeCpsTb",title:"淘宝联盟CPS_淘宝联盟佣金代扣",width:180},{field:"kolFeeCpsAlimama",title:"阿里妈妈CPS采买_淘宝联盟佣金代扣",width:180},{field:"techFeeNewMembers",title:"品牌新享",width:160},{field:"techFeePhotosynthesis",title:"达人佣金-光合平台软件服务费",width:160}]},{field:"rightsDeductionPlatform",title:"订单维权错判被扣保证金金额（平台）-平台补贴",width:180},{field:"rightsDeductionPlatformGoldCoins",title:"订单维权错判被扣保证金金额（平台）-淘金币",width:180},{field:"rightsDeductionPlatformFarm",title:"订单维权错判被扣保证金金额（平台）-芭芭农场",width:180},{field:"rightsDeductionMerchant",title:"订单维权错判被扣保证金金额（商家）",width:180},{field:"afterSalesRefundPlatform",title:"售后退款（平台）-平台补贴",width:190},{field:"afterSalesRefundPlatformGoldCoins",title:"售后退款（平台）-淘金币",width:190},{field:"afterSalesRefundPlatformFarm",title:"售后退款（平台）-芭芭农场",width:190},{field:"afterSalesRefundMerchant",title:"售后退款（商家）",width:180},{title:"错判技术服务费返还_退回金额",children:[{field:"techRefundAutoRenewal",title:"连包自动续订_alicom",width:180},{field:"techRefundBasicSoftware",title:"基础软件服务费_基础软件",width:180},{field:"techRefundDigitalLifeNew",title:"数字生活类目_天猫佣金(新)",width:160},{field:"techRefundRechargeSoftwareNew",title:"各种充值软件服务费(新)",width:160},{field:"techRefundStudentPrice",title:"学生价技术服务费",width:160},{field:"techRefundTmallPoints",title:"天猫返点积分_代扣返点积分",width:185},{field:"techRefundConsumerExper",title:"消费者体验提升计划服务费",width:160}]},{title:"错判达人佣金返还__退回金额",children:[{field:"kolRefundSubsidy",title:"百亿补贴_全渠道",width:180},{field:"kolRefundLiveSubsidy",title:"百亿补贴_直播",width:180},{field:"kolRefundJhs",title:"聚划算",width:180},{field:"kolRefundTcpLive",title:"TCP直播达人_淘宝内容推广服务费",width:180},{field:"kolRefundCpsTb",title:"淘宝联盟CPS_淘宝联盟佣金代扣",width:180},{field:"kolRefundCpsAlimama",title:"阿里妈妈CPS采买_淘宝联盟佣金代扣",width:180},{field:"techRefundNewMembers",title:"品牌新享",width:160},{field:"techRefundPhotosynthesis",title:" 达人佣金返还-光合平台软件服务费",width:160}]},{field:"rightsRecoveryAmount",title:"订单维权错判追回金额",width:180},{field:"smallPaymentAmount",title:"小额打款（未体现在支付宝账单）",width:180},{field:"userActualPayment",title:"用户实付金额（宝贝销售账单）",width:150},{field:"userActualPaymentNew",title:"用户实付金额",width:150},{field:"shopReceivedAmount",title:"店铺实收金额",width:150},{field:"platformIncomeTotal",title:"平台收入金额合计",width:150},{field:"tobSettlementAmount",title:"TOB应结算金额",width:150},{field:"tobAmount",title:"TOB金额",width:150},{field:"tobSettlementAmountExcludeGift",title:"TOB应结算金额（剔除赠送和拼团部分）",width:150},{field:"tobAddonAmount",title:"TOB赠送及拼团流水金额",width:150},{field:"tobUserPaymentDiff",title:"TOB和用户实付差额",width:150},{field:"tobShopReceivedDiff",title:"TOB和店铺实收差额",width:150},{field:"tobPlatformIncomeDiff",title:"TOB和平台收入差额",width:150},{field:"extraMemberPerformance",title:"加赠或联合会员业绩",width:150},{field:"agentActualPerformance",title:"代理实际业绩",width:150},{field:"orderStatus",title:"订单状态",width:150,formatter({cellValue:i}){const e=p.find(t=>t.value===i);return e?e.label:i}},{field:"depositAdjustment",title:"保证金及售后调整",width:150},{field:"adjustmentReason",title:"调整原因",width:150},{field:"productTitle",title:"商品标题",width:420},{field:"productId",title:"商品ID",width:240},{field:"productName",title:"商品名称",width:240},{field:"billType",title:"账单类型",width:150},{field:"productCategory",title:"产品分类",width:150},{field:"deptId",title:"所属部门",width:150},{field:"tobAddonOrderNo",title:"TOB赠送及拼团流水订单号",width:150},{field:"tobAddonOrderStatus",title:"TOB赠送及拼团流水订单状态",width:150,formatter({cellValue:i}){const e=p.find(t=>t.value===i);return e?e.label:i}},{field:"tobAddonProductId",title:"TOB赠送及拼团流水商品ID",width:150},{field:"tobAddonProductName",title:"TOB赠送及拼团流水商品名称",width:150},{field:"tobAddonProductCategory",title:"TOB赠送及拼团流水产品分类",width:150},{field:"kpiDataClass",title:"KPI数据分类",width:150}]},X={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[Q.datetime("transactionTime","交易时间(腾讯)",[y().startOf("month"),y().endOf("month")]),{component:"Select",componentProps:{allowClear:!0,options:H,placeholder:"请选择"},fieldName:"billType",label:"账单类型"},{component:"Select",componentProps:{allowClear:!0,options:$,placeholder:"请选择"},fieldName:"productCategory",label:"产品分类"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"tobOrderNo",label:"TOB订单号"},{component:"Select",componentProps:{mode:"multiple",maxTagCount:1,maxTagTextLength:6,allowClear:!0,options:p,placeholder:"请选择"},fieldName:"orderStatusList",label:"订单状态"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"productTitle",label:"商品标题"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"productName",label:"商品名称"}],fieldMappingTime:[["transactionTime",["startTime","endTime"],"YYYY-MM-DD HH:mm:ss"]],showCollapseButton:!0,submitOnChange:!1,submitOnEnter:!1},he=V({__name:"index",setup(i){const{checkShopSelected:e}=G(),t=z(F.tmallTxReconciliationCsv),u=r({},X),f=P(r({},R),{toolbarConfig:r({},R.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(we,pe)=>S(null,[we,pe],function*({page:{currentPage:b,pageSize:o}},C){return e()?yield M(r({current:b,size:o},C)):{result:{records:[],total:0}}})}}}),m={},[w,a]=D({gridEvents:m,formOptions:u,gridOptions:f}),{hasAccessByCodes:l}=L(),n=E(()=>l(["financeAccount:tmallTencentReconciliation:list"])),{handleDownload:_,downLoading:A}=j();return(b,o)=>(c(),s(d(U),{"auto-content-height":""},{default:h(()=>[n.value?(c(),s(d(w),{key:0,"table-title":"财务对账总表"},{"toolbar-tools":h(()=>[d(l)(["inanceAccount:tmallTencentReconciliation:export"])?(c(),s(d(I),{key:0,loading:d(A),class:"mr-2",type:"primary",onClick:o[0]||(o[0]=C=>d(_)(d(a),t.value))},{icon:h(()=>[q(d(x),{class:"mr-1 inline-block size-6"})]),default:h(()=>[o[1]||(o[1]=Y(" 导出数据 ",-1))]),_:1},8,["loading"])):J("",!0)]),_:1})):(c(),s(d(K),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))]),_:1}))}});export{he as default};
