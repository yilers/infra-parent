var B=Object.defineProperty,V=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var S=(o,e,i)=>e in o?B(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i,n=(o,e)=>{for(var i in e||(e={}))$.call(e,i)&&S(o,i,e[i]);if(P)for(var i of P(e))j.call(e,i)&&S(o,i,e[i]);return o},T=(o,e)=>V(o,H(e));var x=(o,e,i)=>new Promise((g,p)=>{var u=r=>{try{m(i.next(r))}catch(d){p(d)}},C=r=>{try{m(i.throw(r))}catch(d){p(d)}},m=r=>r.done?g(r.value):Promise.resolve(r.value).then(u,C);m((i=i.apply(o,e)).next())});import{W as q}from"./index-C4NAiFfA.js";import{dI as G,dJ as J,dz as U,a7 as D}from"./bootstrap-DjYyHEgg.js";import{h as W,q as Q}from"./fileTransfer-p8-3apt7.js";import{v as K}from"./table-FRaKquww.js";import{u as X,_ as Z}from"./useTableImport-CNd8lRg2.js";import{u as tt}from"./useDownLoad-Cw45s4VH.js";import{u as et}from"./useShopCheck-DKIjDUfz.js";import{ci as _,m as it,b9 as ot,aa as rt,be as at,ab as h,b2 as c,bJ as s,j as w,u as t,bL as v,ai as E,ad as lt,I as st,bb as mt,bp as dt}from"../jse/index-index-rmdNY63r.js";import{p as L}from"./contast-C3bEivmW.js";import{u as nt}from"./useDateRangePicker-DjB1zMnJ.js";import{_ as ct}from"./page.vue_vue_type_script_setup_true_lang-CmAABu9Z.js";import{_ as pt}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import"./index-ld-cT6bn.js";import"./hasIn-CXmLCMBI.js";import"./isSymbol-BoOBgcZb.js";import"./useRefs-ReJqRy3L.js";import"./dateTime-Ce6Ez397.js";import"./index-CovW7kLz.js";import"./rotate-cw-Dzdn7gja.js";const{dateRangePresets:k}=nt(),I={toolbarConfig:{resizable:!0},columns:[{title:"序号",type:"seq",width:50,fixed:"left"},{field:"commonOrderNo",title:"子订单编号",width:200},{field:"tmMainOrderNo",title:"主订单编号",width:200},{field:"commonProductName",title:"商品标题",width:430},{field:"tmProductPrice",title:"商品价格",width:150},{field:"commonProductQuantity",title:"购买数量",width:150},{field:"tmExternalSystemNo",title:"外部系统编号",width:200},{field:"tmProductAttributes",title:"商品属性",width:180,formatter:"defaultEmpty"},{field:"tmPackageInfo",title:"套餐信息",width:240,formatter:"defaultEmpty"},{field:"tmContactRemark",title:"联系方式备注",width:240,formatter:"defaultEmpty"},{field:"commonOrderStatus",title:"订单状态",width:150},{field:"tmMerchantCode",title:"商家编码",width:200},{field:"tmPaymentNo",title:"支付单号",width:250},{field:"commonDueAmount",title:"买家应付货款",width:150},{field:"commonPaidAmount",title:"买家实付金额",width:150},{field:"tmRefundStatus",title:"退款状态",width:150},{field:"tmRefundAmount",title:"退款金额",width:150},{field:"commonCreateTime",title:"订单创建时间",width:160},{field:"commonPaymentTime",title:"订单付款时间",width:160},{field:"tmFreshChannel",title:"淘鲜达渠道",width:160},{field:"commonProductId",title:"商品ID",width:240},{field:"tmStageInfo",title:"分阶段信息",width:200,formatter:"defaultEmpty"},{field:"tmRemarkTags",title:"备注标签",width:200,formatter:"defaultEmpty"},{field:"tmMerchantRemark",title:"商家备注",width:200},{field:"tmBuyerMessage",title:"主订单买家留言",width:300},{field:"tmDeliveryTime",title:"发货时间",width:160},{field:"tmLogisticsNo",title:"物流单号",width:200},{field:"tmLogisticsCompany",title:"物流公司",width:200},{field:"tmIsActiveCompensation",title:"是否主动赔付",width:130},{field:"tmCompensationAmount",title:"主动赔付金额",width:150},{field:"tmCompensationTime",title:"主动赔付出账时间",width:160},{field:"tmExpectedDeliveryTime",title:"应发货时间",width:160},{field:"progressStatus",title:"进度状态",width:150,formatter({cellValue:o}){const e=L.find(i=>i.value===o);return e?e.label:o}},{field:"createTime",title:"创建时间",width:160}]},ut={wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",compact:!0,collapsed:!0,commonConfig:{componentProps:{class:"w-full"}},schema:[k.datetime("orderCreateTime","订单创建时间",[_().startOf("month"),_().endOf("month")]),k.datetime("orderPaymentTime","订单付款时间"),{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"productId",label:"商品ID"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"subOrderNo",label:"子订单编号"},{component:"Input",componentProps:{allowClear:!0},defaultValue:"",fieldName:"mainOrderNo",label:"主订单编号"},{component:"Select",componentProps:{allowClear:!0,options:L,placeholder:"请选择",mode:"multiple",maxTagCount:1,maxTagTextLength:6},fieldName:"progressStatusList",label:"进度状态"}],fieldMappingTime:[["orderCreateTime",["orderCreateStartTime","orderCreateEndTime"],"YYYY-MM-DD HH:mm:ss"],["orderPaymentTime",["orderPaymentStartTime","orderPaymentEndTime"],"YYYY-MM-DD HH:mm:ss"]]},Mt=it({__name:"index",setup(o){const{checkShopSelected:e}=et(),{bizImportType:i,bizImportTypeList:g,uploadFormRef:p,isError:u,extension:C,handleImport:m,ImportSettingButton:r}=X({importTypeList:[{id:1,label:"导入数据",bizCode:"TM_SALES",isError:!1,auth:"basic:tmallProductSaleDetail:import"},{id:2,label:"导入异常数据",bizCode:"TM_SALES",isError:!0,auth:"basic:tmallProductSaleDetail:importFail"}],defaultExtension:".xlsx,.csv",errorExtension:".xlsx"}),d=ot(G.tmallProductSalesDetailCsv),N=n({},ut),z=T(n({},I),{toolbarConfig:n({},I.toolbarConfig),stripe:!0,border:!0,rowConfig:{isHover:!0},columnConfig:{resizable:!1},showOverflow:!0,exportConfig:{},height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(l,ft)=>x(null,[l,ft],function*({page:{currentPage:y,pageSize:a}},f){return e()?yield K(n({current:y,size:a},f)):{result:{records:[],total:0}}})}}}),A={},[M,b]=J({gridEvents:A,formOptions:N,gridOptions:z}),{handleDownload:O,downLoading:R}=tt(),{hasAccessByCodes:F}=U(),Y=rt(()=>F(["basic:tmallProductSaleDetail:list"]));return(y,a)=>{const f=at("access");return Y.value?(c(),h(t(ct),{key:0,"auto-content-height":""},{default:s(()=>[w(t(M),null,{"toolbar-actions":s(()=>[(c(!0),lt(st,null,mt(t(g),l=>v((c(),h(t(D),{key:l.id,type:"primary",style:{"margin-right":"12px"},onClick:ft=>t(m)(l.bizCode,l.isError,t(b))},{default:s(()=>[E(dt(l.label),1)]),_:2},1032,["onClick"])),[[f,[l.auth],"codes"]])),128))]),"toolbar-tools":s(()=>[v((c(),h(t(D),{loading:t(R),class:"mr-2",type:"primary",onClick:a[0]||(a[0]=l=>t(O)(t(b),d.value))},{icon:s(()=>[w(t(q),{class:"mr-1 inline-block size-6"})]),default:s(()=>[a[1]||(a[1]=E(" 导出数据 ",-1))]),_:1},8,["loading"])),[[f,["basic:tmallProductSaleDetail:export"],"codes"]]),w(t(r))]),_:1}),w(t(Z),{ref_key:"uploadFormRef",ref:p,"biz-import-type":t(i),"is-error":t(u),extension:t(C),"upload-fn":t(u)?t(Q):t(W)},null,8,["biz-import-type","is-error","extension","upload-fn"])]),_:1})):(c(),h(t(pt),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))}}});export{Mt as default};
