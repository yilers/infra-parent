var S=Object.defineProperty,F=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var w=(r,t,n)=>t in r?S(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,E=(r,t)=>{for(var n in t||(t={}))P.call(t,n)&&w(r,n,t[n]);if(g)for(var n of g(t))T.call(t,n)&&w(r,n,t[n]);return r},N=(r,t)=>F(r,C(t));function M(r,t,n,o=!0){return[...r].sort((e,c)=>{const l=e[t]||0,i=c[t]||0,s=o?l-i:i-l;if(s===0){if(typeof e[n]=="string"&&typeof c[n]=="string")return o?e[n].localeCompare(c[n]):c[n].localeCompare(e[n]);const f=e[n]||0,u=c[n]||0;return o?f-u:u-f}return s})}const m={id:"id",pid:"parentId",children:"children",title:"title"},a=r=>Object.assign({},m,r);function j(r,t={}){const n=a(t),o=new Map,e=[],{id:c,pid:l,children:i}=n;for(const s of r)s[i]=s[i]||[],o.set(s[c],s);for(const s of r){const f=o.get(s[l]);(f?f[i]:e).push(s)}return e}function x(r,t={}){t=a(t);const{children:n}=t,o=[...r];for(let e=0;e<o.length;e++)o[e][n]&&o.splice(e+1,0,...o[e][n]);return o}function y(r,t,n={}){r.forEach(o=>{const e=t(o,n)||o;o.children&&y(o.children,t,e)})}function z(r,t="label",n="-"){function o(e,c=[]){const l=[...c,e[t]];e.fullName=l.join(n),e.children&&e.children.length>0&&e.children.forEach(i=>{o(i,l)})}r.forEach(e=>{o(e)})}function V(r,t,n={}){const o=a(n),{id:e,children:c}=o,l=[];function i(s,f){if(s[e]===f)return!0;if(s[c]){for(const u of s[c])if(i(u,f))return l.push(s[e]),!0}return!1}for(const s of r)if(i(s,t))break;return l.sort()}function G(r,t,n={}){const o=new Set;return t.forEach(e=>{V(r,e,n).forEach(c=>{o.add(c)})}),[...o].sort()}function b(r,t={}){const n=a(t),{id:o,children:e}=n,c=[],l=i=>{for(const s of i)c.push(s[o]),s[e]&&s[e].length>0&&l(s[e])};return l(r),c}function I(r,t={},n=[]){const o=a(t),{id:e,children:c}=o,l=t.title||"title";for(const i of r)n.push({key:i[e],title:i[l]}),i[c]&&i[c].length>0&&I(i[c],t,n);return n}function k(r,t,n={}){const o=a(n),{id:e,children:c}=o,l=[],i=(f,u)=>{let p;for(const d of u)if(d[c]&&d[c].length>0)if(d[c].some(h=>h[e]===f))p=d[e];else{const h=i(f,d[c]);h&&(p=h)}return p};let s=i(r,t);for(;s;)l.push(s),s=i(s,t);return l}function K(r,t,n={}){if(!r)return b(t,n);const o=a(n),e=o.title||"title",c=I(t,N(E({},o),{title:e})),l=[],i=[];return c.forEach(s=>{if(s.title.includes(r)){l.push(s.key);const f=k(s.key,t,o);i.push(...f)}}),[...new Set([...l,...i])]}function O(r,t,n="title"){if(!t)return r;const o=t.toLowerCase(),e=new Set;return r.filter(l=>String(l[n]||"").toLowerCase().includes(o)).forEach(l=>{e.add(l.id);let i=l.parentId;for(;i&&i!=="0";){const f=r.find(u=>u.id===i);if(f)e.add(f.id),i=f.parentId;else break}const s=f=>{r.forEach(u=>{u.parentId===f&&(e.add(u.id),s(u.id))})};s(l.id)}),r.filter(l=>e.has(l.id))}export{O as a,z as b,K as c,y as e,G as f,b as g,j as l,M as s,x as t};
