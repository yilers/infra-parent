var l=(i,c,r)=>new Promise((a,t)=>{var s=e=>{try{o(r.next(e))}catch(n){t(n)}},d=e=>{try{o(r.throw(e))}catch(n){t(n)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,d);o((r=r.apply(i,c)).next())});import{bj as m,dK as p,bu as f}from"./bootstrap-DjYyHEgg.js";import{i as _}from"./fileTransfer-p8-3apt7.js";import{m as b,b9 as u,ab as g,b2 as v,u as x,bJ as C,ae as k}from"../jse/index-index-rmdNY63r.js";const h=b({__name:"form",setup(i,{expose:c}){const r=u({}),a=u(),[t,s]=m({onOpenChange(o){const e=s.getData();a.value=o?e==null?void 0:e.gridApi:null,r.value=o?(e==null?void 0:e.record)||{}:{}},onConfirm(){return l(this,null,function*(){var o;try{s.lock(!0),yield _({id:r.value.id}),p.success("撤销成功"),(o=a.value)==null||o.reload(),s.close()}catch(e){p.error(`撤销失败，原因: ${e.message}`)}finally{s.lock(!1)}})}});return c(s),(o,e)=>(v(),g(x(t),{title:"撤销",class:"w-300px"},{default:C(()=>[...e[0]||(e[0]=[k("div",{class:"common-form"}," 注意:此操作仅撤销已上传的基础数据，由基础数据生成的报表不会因此操作而撤销。 ",-1)])]),_:1}))}}),I=f(h,[["__scopeId","data-v-037de864"]]);export{I as default};
