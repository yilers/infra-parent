var N=Object.defineProperty;var C=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var I=(o,a,e)=>a in o?N(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,b=(o,a)=>{for(var e in a||(a={}))W.call(a,e)&&I(o,e,a[e]);if(C)for(var e of C(a))V.call(a,e)&&I(o,e,a[e]);return o};var x=(o,a,e)=>new Promise((r,l)=>{var d=u=>{try{g(e.next(u))}catch(t){l(t)}},m=u=>{try{g(e.throw(u))}catch(t){l(t)}},g=u=>u.done?r(u.value):Promise.resolve(u.value).then(d,m);g((e=e.apply(o,a)).next())});import{aQ as O,aR as U,aS as Z,aT as q,aU as D,aV as Q}from"./bootstrap-B0IOIL79.js";import{_ as j}from"./login.vue_vue_type_script_setup_true_lang-DoIcIhhw.js";import{b9 as S,x as F,b8 as H,n as J,bV as G,m as P,aP as K,bz as X,w as T,aa as L,ad as Y,b2 as z,j as p,bJ as w,u as c,bc as ee,bW as k,aV as ae,ab as te}from"../jse/index-index-StHjciy-.js";import{_ as oe,u as ne,a as se,N as re,b as le,c as ie}from"./layout.vue_vue_type_script_setup_true_lang-CiM6FyjU.js";import{u as ue}from"./use-modal-RS0jGB5k.js";import"./auth-title-9h8Ycpuq.js";import"./index-Cm8lEwIC.js";import"./crypto-BIPOTUv7.js";import"./theme-toggle.vue_vue_type_script_setup_true_lang-eDNDRggI.js";import"./use-drawer-zBZwZnKb.js";import"./x-eg9hdiEc.js";import"./TabsList.vue_vue_type_script_setup_true_lang-Dqcwx_Td.js";import"./rotate-cw-G598-s-f.js";const f=S(),A=S(!1),_=S({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function ce(){function o(r){return x(this,null,function*(){var d;const{Watermark:l}=yield G(()=>x(null,null,function*(){const{Watermark:m}=yield import("./index.esm-j49SPltB.js");return{Watermark:m}}),[]);_.value=b(b({},_.value),r),f.value=new l(_.value),yield(d=f.value)==null?void 0:d.create()})}function a(r){return x(this,null,function*(){var l;f.value?(yield J(),yield(l=f.value)==null?void 0:l.changeOptions(b(b({},_.value),r))):yield o(r)})}function e(){f.value&&(f.value.destroy(),f.value=void 0)}return A.value||(A.value=!0,F(()=>{e()})),{destroyWatermark:e,updateWatermark:a,watermark:H(f)}}const de=P({name:"LoginExpiredModal",__name:"login-expired-modal",props:K({avatar:{default:""},zIndex:{default:0},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(o){const a=o,e=X(o,"open"),[r,l]=ue();T(()=>e.value,t=>{l.setState({isOpen:t})});const d=L(()=>a.zIndex||u()),m=["ant-message","loading"];function g(t){return m.some(v=>t.classList.contains(v))}function u(){let t=0;return[...document.querySelectorAll("*")].forEach(h=>{const y=window.getComputedStyle(h).getPropertyValue("z-index");y&&!Number.isNaN(Number.parseInt(y))&&!g(h)&&(t=Math.max(t,Number.parseInt(y)))}),t+1}return(t,v)=>(z(),Y("div",null,[p(c(r),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,"z-index":d.value,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:w(()=>[p(c(oe),{src:o.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),p(c(O),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":t.$t("authentication.loginAgainSubTitle"),title:t.$t("authentication.loginAgainTitle")},{default:w(()=>[ee(t.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3},8,["z-index"])]))}}),Me=P({__name:"basic",setup(o){const{setMenuList:a}=ne();a(["close","affix","maximize","reload","open-in-new-window","close-left","close-right","close-other","close-all"]);const e=S([]),r=U(),l=Z(),d=q(),{destroyWatermark:m,updateWatermark:g}=ce(),u=L(()=>e.value.some(s=>!s.isRead)),t=L(()=>[{handler:()=>{Q.push("/profile")},icon:D,text:"个人中心"}]),v=L(()=>{var s,n;return(n=(s=r.userInfo)==null?void 0:s.photo)!=null?n:k.app.defaultAvatar});function h(){return x(this,null,function*(){yield l.doLogout(),yield l.logout(!1)})}function M(){e.value=[]}function y(s){const n=e.value.find(i=>i.id===s);n&&(n.isRead=!0)}function E(s){e.value=e.value.filter(n=>n.id!==s)}function R(){e.value.forEach(s=>s.isRead=!0)}function $(){}return T(()=>({enable:k.app.watermark,content:k.app.watermarkContent}),i=>x(null,[i],function*({enable:s,content:n}){var B;s?yield g({content:n||`${(B=r.userInfo)==null?void 0:B.account}`}):m()}),{immediate:!0}),ae(()=>{k.app.watermark&&m()}),(s,n)=>(z(),te(c(ie),{onClearPreferencesAndLogout:h,onClickLogo:$},{"user-dropdown":w(()=>{var i;return[p(c(le),{avatar:v.value,menus:t.value,text:(i=c(r).userInfo)==null?void 0:i.nickname,description:"","tag-text":"",onLogout:h},null,8,["avatar","menus","text"])]}),notification:w(()=>[p(c(re),{dot:u.value,notifications:e.value,onClear:M,onRead:n[0]||(n[0]=i=>i.id&&y(i.id)),onRemove:n[1]||(n[1]=i=>i.id&&E(i.id)),onMakeAll:R},null,8,["dot","notifications"])]),extra:w(()=>[p(c(de),{open:c(d).loginExpired,"onUpdate:open":n[2]||(n[2]=i=>c(d).loginExpired=i),avatar:v.value},{default:w(()=>[p(j)]),_:1},8,["open","avatar"])]),"lock-screen":w(()=>[p(c(se),{avatar:v.value,onToLogin:h},null,8,["avatar"])]),_:1}))}});export{Me as default};
