var h=Object.defineProperty;var c=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var f=(i,e,t)=>e in i?h(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,u=(i,e)=>{for(var t in e||(e={}))w.call(e,t)&&f(i,t,e[t]);if(c)for(var t of c(e))g.call(e,t)&&f(i,t,e[t]);return i};var m=(i,e,t)=>new Promise((n,l)=>{var d=a=>{try{s(t.next(a))}catch(r){l(r)}},o=a=>{try{s(t.throw(a))}catch(r){l(r)}},s=a=>a.done?n(a.value):Promise.resolve(a.value).then(d,o);s((t=t.apply(i,e)).next())});import{dL as S,bj as b,dK as C}from"./bootstrap-DjYyHEgg.js";import{D as _}from"./table-FRaKquww.js";import{ci as y,m as x,b9 as M,ab as Y,b2 as A,u as p,bJ as v,j as D}from"../jse/index-index-rmdNY63r.js";const F={1:"processing",2:"success",3:"error",0:"default"},L={0:"待处理",1:"处理中",2:"处理完成",3:"处理失败"},N={toolbarConfig:{resizable:!0},headerAlign:"center",columns:[{title:"创建时间",field:"createTime",width:150},{title:"耗时时间",field:"consumingTime",width:100},{title:"任务月份",field:"month",width:80},{title:"任务名称",field:"taskName",width:180},{field:"importStatus",title:"导入原数据状态",width:120,slots:{default:"importStatus"}},{field:"reconciliationStatus",title:"对账汇总状态",slots:{default:"reconciliationStatus"},width:100},{field:"summaryStatus",title:"对账概况状态",slots:{default:"summaryStatus"},width:100},{title:"制作对账表状态",field:"productionStatus",width:120,slots:{default:"productionStatus"}},{field:"totalCount",title:"总记录数",width:100},{field:"successCount",title:"成功记录数",width:100},{field:"failCount",title:"失败记录数",width:100},{field:"errorReason",title:"错误原因",width:120},{field:"errorDetails",title:"错误详情",width:450},{width:200,title:"操作",align:"left",slots:{default:"action"},fixed:"right"}]},k={wrapperClass:"flex justify-center",commonConfig:{formItemClass:"col-span-12",labelWidth:70},schema:[{fieldName:"month",label:"选择月份",component:"DatePicker",rules:"required",componentProps:{picker:"month",format:"YYYYMM",valueFormat:"YYYYMM",disabledDate:i=>i.isAfter(y().endOf("day"))}}]},R=x({__name:"form",setup(i,{expose:e}){const t=M(),[n,l]=S(u({showDefaultActions:!1},k)),[d,o]=b({onOpenChange(s){var a;t.value=s?(a=o.getData())==null?void 0:a.gridApi:null},onConfirm(){l.validate().then(s=>m(null,null,function*(){var a;if(s.valid){const r=yield l.getValues();o.setState({loading:!0,confirmLoading:!0});try{yield _(r),C.success("对账成功"),(a=t.value)==null||a.reload(),o.close()}finally{o.setState({loading:!1,confirmLoading:!1})}}}))}});return e(o),(s,a)=>(A(),Y(p(d),{class:"w-[25%]",title:"汇总报表数据"},{default:v(()=>[D(p(n))]),_:1}))}});export{L as E,R as _,F as a,N as g};
