var u=(w,f,t)=>new Promise((c,n)=>{var p=a=>{try{l(t.next(a))}catch(o){n(o)}},m=a=>{try{l(t.throw(a))}catch(o){n(o)}},l=a=>a.done?c(a.value):Promise.resolve(a.value).then(p,m);l((t=t.apply(w,f)).next())});import{dJ as I,bj as L,dz as A,dK as O}from"./bootstrap-DjYyHEgg.js";import{q as R,r as T}from"./index-BWhM0zNP.js";import{_ as q}from"./table-form.vue_vue_type_script_setup_true_lang-9KSMpnah.js";import{t as z}from"./index-BiID8tjB.js";import{_ as y}from"./table-action.vue_vue_type_style_index_0_lang-BluPqhNI.js";import{_ as B}from"./fallback.vue_vue_type_script_setup_true_lang-CaaeY5iC.js";import{m as P,b9 as b,aa as j,ab as h,b2 as g,bJ as C,j as _,u as r}from"../jse/index-index-rmdNY63r.js";const H=P({__name:"table-configuration-modal",setup(w,{expose:f}){const t=b();function c(){return[{color:"error",label:"否",value:0},{color:"processing",label:"是",value:1}]}const n=b([]),p={border:!0,columns:[{title:"序号",type:"seq",width:50,fixed:"left"},{field:"id",title:"ID",width:180},{field:"tableId",title:"表配置id",width:120},{field:"code",title:"表配置编码",width:300},{field:"name",title:"表配置名称",width:300},{field:"type",title:"日期类型",width:120,formatter({cellValue:e}){const i=z.find(s=>s.value===e);return i?i.label:e}},{field:"sortNumber",title:"排序",width:120},{field:"summarySale",title:"店铺直充销量报表",width:150,cellRender:{name:"CellTag",options:c()}},{field:"summaryFinance",title:"财务对账报表",width:150,cellRender:{name:"CellTag",options:c()}},{field:"shopId",title:"店铺ID",width:180},{width:200,title:"操作",align:"center",slots:{default:"action"},fixed:"right"}],pagerConfig:{enabled:!0},columnConfig:{resizable:!1},height:"auto",keepSource:!0,showOverflow:!1,proxyConfig:{ajax:{query:s=>u(null,[s],function*({page:{currentPage:e,pageSize:i}}){return yield R({current:e,size:i,shopId:t.value.id})})}}},[m,l]=I({gridOptions:p}),[a,o]=L({closeOnClickModal:!1,showConfirmButton:!1,cancelText:"关闭",onOpenChange(e){var i,s;t.value=e?((i=o.getData())==null?void 0:i.record)||{}:{},n.value=((s=o.getData())==null?void 0:s.tableStatusList)||[]},onConfirm(){return u(this,null,function*(){})}}),d=b(),v=()=>{d.value.setData({shopId:t.value.id,tableStatusList:n.value,gridApi:l}),d.value.open()},k=e=>{d.value.setData({shopId:t.value.id,tableStatusList:n.value,record:e,gridApi:l}),d.value.open()},x=e=>u(null,null,function*(){yield T(e.id),O.success("删除成功"),l.query()}),{hasAccessByCodes:D}=A(),S=j(()=>D(["table:tableConfig:list"]));return f(o),(e,i)=>(g(),h(r(a),{title:"表配置信息",class:"h-[90%] w-[90%]","content-class":"h-[100%]"},{default:C(()=>[_(q,{ref_key:"tableFormRef",ref:d},null,512),S.value?(g(),h(r(m),{key:0},{"toolbar-actions":C(()=>[_(r(y),{actions:[{label:"新增",type:"primary",icon:"ant-design:plus-outlined",auth:["table:tableConfig:add"],onClick:v.bind(null)}]},null,8,["actions"])]),action:C(({row:s})=>[_(r(y),{actions:[{label:"编辑",icon:"ant-design:edit-outlined",type:"link",size:"small",auth:["table:tableConfig:edit"],onClick:k.bind(null,s)}],"drop-down-actions":[{label:"删除",icon:"ant-design:delete-outlined",auth:["table:tableConfig:delete"],popConfirm:{title:"确定删除吗？",confirm:x.bind(null,s)}}]},null,8,["actions","drop-down-actions"])]),_:1})):(g(),h(r(B),{key:1,description:"抱歉，您没有权限访问此页面。",status:"403"}))]),_:1}))}});export{H as _};
