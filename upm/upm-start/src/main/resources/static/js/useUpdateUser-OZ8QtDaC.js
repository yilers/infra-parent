var U=Object.defineProperty;var u=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var l=(e,a,t)=>a in e?U(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,m=(e,a)=>{for(var t in a||(a={}))f.call(a,t)&&l(e,t,a[t]);if(u)for(var t of u(a))g.call(a,t)&&l(e,t,a[t]);return e};var h=(e,a,t)=>new Promise((r,p)=>{var c=o=>{try{n(t.next(o))}catch(s){p(s)}},i=o=>{try{n(t.throw(o))}catch(s){p(s)}},n=o=>o.done?r(o.value):Promise.resolve(o.value).then(c,i);n((t=t.apply(e,a)).next())});import{h as y}from"./index-DOXJoA8u.js";import{b9 as k}from"../jse/index-index-StHjciy-.js";import{aR as v}from"./bootstrap-B0IOIL79.js";function x(){const e=k(!1);return{updating:e,updateUser:t=>h(null,null,function*(){var i,n,o,s;const r=v(),p=((n=(i=r.userInfo)==null?void 0:i.roleList)==null?void 0:n.map(d=>d.id))||[],c=t.photo||((o=r.userInfo)==null?void 0:o.photo);try{e.value=!0;const d={id:t.id,photo:c,name:t.name,nickname:t.nickname,email:t.email,phone:t.phone,gender:t.gender,deptId:t.deptId,account:t.account,roleIdList:p,positionId:((s=r.userInfo)==null?void 0:s.positionId)||""};return yield y(d),r.setUserInfo(m(m({},r.userInfo),t)),!0}catch(d){return!1}finally{e.value=!1}})}}export{x as u};
